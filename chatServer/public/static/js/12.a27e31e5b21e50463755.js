webpackJsonp([12],{O0Nm:function(e,t){},j72h:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("mvHQ"),l=o.n(i),s=o("fZjL"),a=o.n(s),n=o("gyMJ"),r={name:"dialogTodo",props:{visible:{type:Boolean,default:!1},date:{default:new Date},info:{type:Object,default:function(){return{}}}},data:function(){return{logTitle:"新建活动",todoForm:{title:"",start:"",end:"",address:"",content:""},dialogVisible:!1,loading:!1}},watch:{visible:function(e){this.dialogVisible=e},date:function(e){this.todoForm.start=e._d.getTime(),this.todoForm.end=e._d.getTime()+864e5-1e3},info:function(e){var t=this;e.title?(this.logTitle="编辑活动",a()(this.todoForm).forEach(function(o){t.todoForm[o]=e[o]}),this.todoForm._id=e._id):this.logTitle="新建活动"}},methods:{close:function(){this.$refs.todoForm.resetFields(),this.$emit("close")},cancel:function(){this.$emit("close")},sure:function(){var e=this;this.$refs.todoForm.validate(function(t){if(!t||!1!==e.loading)return!1;e.loading=!0,e.info.title?e.upTodo(JSON.parse(l()(e.todoForm))):e.addTodo(JSON.parse(l()(e.todoForm)))})},addTodo:function(e){var t=this;n.a.addTodo(e).then(function(o){t.loading=!1,0===o.code?(t.$emit("sure",e),t.$message({message:"新建成功",type:"success"})):t.$message({message:"新建失败",type:"warning"})})},upTodo:function(e){var t=this;n.a.upTodo(e).then(function(o){t.loading=!1,0===o.code?(t.$emit("up",e),t.$message({message:"修改成功",type:"success"})):t.$message({message:"修改失败",type:"warning"})})}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.logTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[o("el-form",{ref:"todoForm",attrs:{model:e.todoForm}},[o("el-form-item",{attrs:{label:"活动主题","label-width":"100px",prop:"title",rules:[{required:!0,message:"主题不能为空"}]}},[o("el-input",{model:{value:e.todoForm.title,callback:function(t){e.$set(e.todoForm,"title",t)},expression:"todoForm.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"活动内容","label-width":"100px",prop:"content",rules:[{required:!0,message:"内容不能为空"}]}},[o("el-input",{attrs:{type:"textarea",resize:"none"},model:{value:e.todoForm.content,callback:function(t){e.$set(e.todoForm,"content",t)},expression:"todoForm.content"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"活动地点","label-width":"100px"}},[o("el-input",{model:{value:e.todoForm.address,callback:function(t){e.$set(e.todoForm,"address",t)},expression:"todoForm.address"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"开始时间","label-width":"100px"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.todoForm.start,callback:function(t){e.$set(e.todoForm,"start",t)},expression:"todoForm.start"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"结束时间","label-width":"100px"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.todoForm.end,callback:function(t){e.$set(e.todoForm,"end",t)},expression:"todoForm.end"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.sure}},[e.loading?o("v-icon",{staticClass:"el-icon-loading",attrs:{color:"#fff",size:14}}):e._e(),e._v("\n            确 定\n        ")],1)],1)],1)},staticRenderFns:[]};var c=o("VU/8")(r,d,!1,function(e){o("O0Nm")},"data-v-e91a0466",null);t.default=c.exports}});