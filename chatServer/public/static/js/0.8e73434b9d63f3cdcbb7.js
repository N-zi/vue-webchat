webpackJsonp([0],{"+Gq9":function(t,e){},"36HN":function(t,e){},"3oot":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAeFBMVEX////nvCbrx03lthHrylTqxUPu0WvkswntzmLszFvmuBrv03Hx2Ybw1nr8/Pvpwjnsz2jovzLz3pb29fP046fo6OfdrgvCnR2fgh6xkB3NzcyNdB65t69eXVnQphKlpaV5eXlHRDN1XxTb2tndvU2NjIp5ZBjTwoNeFVBWAAAHZElEQVRo3u2Z6WKbOBSFbRCLwGBhx7Rx3Cat5fj933DuouWKJe1M/G9yEBIhtj7OlZAE3my+9KUv/e90fFrR8YGQp7p16nDraAfp6wMhu7ZsZ+pgvz8wWqZtDWwThOnMvX9ctHSJCIMYLLuAqs8Pg7SmNIjAJLa2LbuHxeuoDEpg2oC5P6h/9QdtvLwLw61kjDo9yElXm6lan5ftg5q+03Vt6jmHvXSPoex0DRhttFm0pA+nY//XWmnDvtOaMKglVK3Cv1MZSqU8pde6Y6egapDBugweY2YirISKSgOpdH+bkgUDBRX4N+2mvvSrEPKiXQHXA47QlL9egCDSU7jClmqFAnqig5pSXdbuRYDYGlNAGWeMdgQRxZGkHcMW0AyR67WBqLNKaYi7hZotIawzVYe20KIhOI4hdKZ0/rDH61UnmVbKAgYKql2BH2sYVCc0Q8EzgeRgHliut0mbqQysYAYWLLpCGANFa2FTYdcIXUuwSk9a612lhfqzDNwoL43GlNXcUEF1HZLsxKLTrzspMpAiFPqxmhqJ3SilJp7qaEq2E5fZWpuUBPFydjIVRfGzdaA5lidRX6c+jzdjvwaxRZaAGJZx/DQ5U9TziKKUCGBM5GX1PjH7rABKUSQo5TL0pIMhV+qUw740Qfo1CALIDmTASVwpTtRgWewWvg8mqrVa6101Q9gKuiFbHmVF+CLHN5ZgkaNVJwhBzt46lOUdk0NZFz+kYANZ2Se4CzLNrjnRw97u9wUmADnixFxwZUMMreuFlqJHQ4b6yMmw3xOFiyJissIG1LQHKs5db6BBCVAfOAFBxn6GIDjc8wXsw1UU7Jevg2NaUFgLNFkUrytOFNVosUqs8bDbiRQ2p53Il/R0TBWcbPfuwtGQfcLV9g4TZ5gwo2JJ4kp2M3ofIINQcWjDqn6uXfcRDjmTh48QrgSyP5TJY0Qb6/f5ztOWMCuQbLvdDpgIkh3K2ROEfGYRwG4JCBUfKFERHnBUQwjSsFW7sBppW04S2S24822I6eAQvvQQu/UAJClatbplAi332zKySu9uudnAEdR+ePLbLFxOWStmomS1UJYzY2xOEncHSYnhyppAGLYNrDhoopVzrF+flB7I67oE2fF2J4S/aXbhoaBotrihoITHhWS+kPNsWHmVjCyFOcfzN4oDnfroBBEj5Y3RYoRNJwudrINhvVcGlO8ppktuxU44AUrDRrZN7Qa+6dQhzdUpsPZLSti6ZMyJ4bINukAQKG/TmZFmxXRRkcYycQcsZITRrjtOnIzUJHknZpLpRCymxunc63qKvouhFdKxj5DGGwEn+3TSWsJNoylgrRzIdsJJ3kTM2IbJYwk2XWNkcpWGXcYkI5mAjAzhoh3SqcpPVFPeorspZLdJnIxbB2rDrMgzY0qb4bLJGsr4qYjmoTgZF2OO7Y5OxiY3ycDviQu85QWHTYdO6STPKVYAG+swWA4LOMEa4sxfxLWH3iUDZpjxiwprh33ModRxJIsjGqW5vVnD7a3t3JhJiuHao48c1ORjvlUNjTLNAknMbdsJzAMHCFecDNpDhIw5MZCSD1nsz2HcnGsga9upN1gmytFSOCkqRozkZO/uGnGDfsxLY2n5yd5lT9IJ24C2qYYBGygXpERbx5sEdAilpeduHpmNEZAKHORMqoqtixvnzapcPHkSijhb4qsFN3Xrcy8geYU7FlnjgjcRAfMm/8AdKgcn/LoFdqOlE7CCdY9QFmCpqkbnrZqjHG6Z1zRWzjT6mjghL7BVhT/Ago5yjOY4ozWemODygd9f8EyTXaUTVyfsmo5HSujIwbh01qpcQJuYEGLl2iCLLxcHf+24q2qiMTnOmZwz2RFjUGGclRNncRJdODipxiyp1Z2dMvN4njxVvm/mo1XuHQ2isjAxopN4yZmsbJRWxgXWGK+F/YETFR4iVRFfFg7y62o9WIvKZSBBP2t+vqMsO24mTirvZF6x7wd/YOLHBh1mZK1sP4GMXEPxx2ufkUZ5Dpz49wowIfeyC7sQw1ZUq03wN9EjJ7R0Aoa28cG0EAPukI2f00/lHvZpF0+/27B0GAr783P6ZoXCdNJvdnFBsO+ev31Oz6J4Pm+oUfDN9zWr/SOCuT9/WjdMt2+wfe/x/TtCjqfjnR8FIb+/fH+AXCUv5yO+5QfI8Xi6nm/uweXy8hC9v7/A9n65Xk/HI0FOp/P58nKD54r7y+9/p3eRy9Pvv3/9/vX2ej6fT2TFQS63tx+sX7j9N/3AxLW8vb2CzmewEsJ1uVzg3O31Bnrz+gFcj/5Q8Mmg2xvWgYTXCzIIskHI9YxmHMixWG+8rYrrvPny9kr1Q0VQGzB8m4AViNiVQMjCjfTK26v71pL86YvXGRPVc0W5FqFfAAlDgvNXpzMm+PDZ0VflP3EVosqwXrpN0MqGf4vyOmE6nTxX6Bq2mdxXxMu03v0OFn/Vor96PM+JqJzhx9fV8+az8GWub+VNIbbSJn6onx324go24h8+IhvfCH/7w2GfHPd8Bf5o/pEvfelLn9A/gr5TYH8qZBEAAAAASUVORK5CYII="},"4RJ8":function(t,e,i){
/*!
 * Cropper.js v1.5.13
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2022-11-20T05:30:46.114Z
 */
var n;n=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function e(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?t(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var s="undefined"!=typeof window&&void 0!==window.document,l=s?window:{},c=!(!s||!l.document.documentElement)&&"ontouchstart"in l.document.documentElement,u=!!s&&"PointerEvent"in l,d="".concat("cropper","-crop"),h="".concat("cropper","-disabled"),p="".concat("cropper","-hidden"),f="".concat("cropper","-hide"),m="".concat("cropper","-invisible"),v="".concat("cropper","-modal"),y="".concat("cropper","-move"),g="".concat("cropper","Action"),b="".concat("cropper","Preview"),w=u?"pointerdown":c?"touchstart":"mousedown",E=u?"pointermove":c?"touchmove":"mousemove",T=u?"pointerup pointercancel":c?"touchend touchcancel":"mouseup",S=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,A=/^data:/,k=/^data:image\/jpeg;base64,/,_=/^img|canvas$/i,L={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},x=Number.isNaN||l.isNaN;function R(t){return"number"==typeof t&&!x(t)}var C=function(t){return t>0&&t<1/0};function D(t){return void 0===t}function O(t){return"object"===i(t)&&null!==t}var I=Object.prototype.hasOwnProperty;function M(t){if(!O(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&I.call(i,"isPrototypeOf")}catch(t){return!1}}function P(t){return"function"==typeof t}var F=Array.prototype.slice;function N(t){return Array.from?Array.from(t):F.call(t)}function B(t,e){return t&&P(e)&&(Array.isArray(t)||R(t.length)?N(t).forEach(function(i,n){e.call(t,i,n,t)}):O(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var U=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return O(t)&&i.length>0&&i.forEach(function(e){O(e)&&Object.keys(e).forEach(function(i){t[i]=e[i]})}),t},j=/\.\d*(?:0|9){12}\d*$/;function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return j.test(t)?Math.round(t*e)/e:t}var G=/^width|height|left|top|marginLeft|marginTop$/;function H(t,e){var i=t.style;B(e,function(t,e){G.test(e)&&R(t)&&(t="".concat(t,"px")),i[e]=t})}function z(t,e){if(e)if(R(t.length))B(t,function(t){z(t,e)});else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function W(t,e){e&&(R(t.length)?B(t,function(t){W(t,e)}):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function V(t,e,i){e&&(R(t.length)?B(t,function(t){V(t,e,i)}):i?z(t,e):W(t,e))}var Y=/([a-z\d])([A-Z])/g;function K(t){return t.replace(Y,"$1-$2").toLowerCase()}function X(t,e){return O(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(K(e)))}function Q(t,e,i){O(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(K(e)),i)}var J=/\s\s*/,Z=function(){var t=!1;if(s){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});l.addEventListener("test",i,n),l.removeEventListener("test",i,n)}return t}();function $(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(J).forEach(function(e){if(!Z){var r=t.listeners;r&&r[e]&&r[e][i]&&(a=r[e][i],delete r[e][i],0===Object.keys(r[e]).length&&delete r[e],0===Object.keys(r).length&&delete t.listeners)}t.removeEventListener(e,a,n)})}function tt(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(J).forEach(function(e){if(n.once&&!Z){var r=t.listeners,o=void 0===r?{}:r;a=function(){delete o[e][i],t.removeEventListener(e,a,n);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];i.apply(t,s)},o[e]||(o[e]={}),o[e][i]&&t.removeEventListener(e,o[e][i],n),o[e][i]=a,t.listeners=o}t.addEventListener(e,a,n)})}function et(t,e,i){var n;return P(Event)&&P(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function it(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var nt=l.location,at=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function rt(t){var e=t.match(at);return null!==e&&(e[1]!==nt.protocol||e[2]!==nt.hostname||e[3]!==nt.port)}function ot(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function st(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,a=t.translateX,r=t.translateY,o=[];R(a)&&0!==a&&o.push("translateX(".concat(a,"px)")),R(r)&&0!==r&&o.push("translateY(".concat(r,"px)")),R(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),R(i)&&1!==i&&o.push("scaleX(".concat(i,")")),R(n)&&1!==n&&o.push("scaleY(".concat(n,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function lt(t,i){var n=t.pageX,a=t.pageY,r={endX:n,endY:a};return i?r:e({startX:n,startY:a},r)}function ct(t){var e=t.aspectRatio,i=t.height,n=t.width,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",r=C(n),o=C(i);if(r&&o){var s=i*e;"contain"===a&&s>n||"cover"===a&&s<n?i=n/e:n=i*e}else r?i=n/e:o&&(n=i*e);return{width:n,height:i}}var ut=String.fromCharCode;var dt=/^data:.*,/;function ht(t){var e,i=new DataView(t);try{var n,a,r;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var o=i.byteLength,s=2;s+1<o;){if(255===i.getUint8(s)&&225===i.getUint8(s+1)){a=s;break}s+=1}if(a){var l=a+10;if("Exif"===function(t,e,i){var n="";i+=e;for(var a=e;a<i;a+=1)n+=ut(t.getUint8(a));return n}(i,a+4,4)){var c=i.getUint16(l);if(((n=18761===c)||19789===c)&&42===i.getUint16(l+2,n)){var u=i.getUint32(l+4,n);u>=8&&(r=l+u)}}}if(r){var d,h,p=i.getUint16(r,n);for(h=0;h<p;h+=1)if(d=r+12*h+2,274===i.getUint16(d,n)){d+=8,e=i.getUint16(d,n),i.setUint16(d,1,n);break}}}catch(t){e=1}return e}var pt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper,a=Number(e.minContainerWidth),r=Number(e.minContainerHeight);z(n,p),W(t,p);var o={width:Math.max(i.offsetWidth,a>=0?a:200),height:Math.max(i.offsetHeight,r>=0?r:100)};this.containerData=o,H(n,{width:o.width,height:o.height}),z(t,p),W(n,p)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=Math.abs(e.rotate)%180==90,a=n?e.naturalHeight:e.naturalWidth,r=n?e.naturalWidth:e.naturalHeight,o=a/r,s=t.width,l=t.height;t.height*o>t.width?3===i?s=t.height*o:l=t.width/o:3===i?l=t.width/o:s=t.height*o;var c={aspectRatio:o,naturalWidth:a,naturalHeight:r,width:s,height:l};this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=U({},c)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,a=this.canvasData,r=this.cropBoxData,o=i.viewMode,s=a.aspectRatio,l=this.cropped&&r;if(t){var c=Number(i.minCanvasWidth)||0,u=Number(i.minCanvasHeight)||0;o>1?(c=Math.max(c,n.width),u=Math.max(u,n.height),3===o&&(u*s>c?c=u*s:u=c/s)):o>0&&(c?c=Math.max(c,l?r.width:0):u?u=Math.max(u,l?r.height:0):l&&(c=r.width,(u=r.height)*s>c?c=u*s:u=c/s));var d=ct({aspectRatio:s,width:c,height:u});c=d.width,u=d.height,a.minWidth=c,a.minHeight=u,a.maxWidth=1/0,a.maxHeight=1/0}if(e)if(o>(l?0:1)){var h=n.width-a.width,p=n.height-a.height;a.minLeft=Math.min(0,h),a.minTop=Math.min(0,p),a.maxLeft=Math.max(0,h),a.maxTop=Math.max(0,p),l&&this.limited&&(a.minLeft=Math.min(r.left,r.left+(r.width-a.width)),a.minTop=Math.min(r.top,r.top+(r.height-a.height)),a.maxLeft=r.left,a.maxTop=r.top,2===o&&(a.width>=n.width&&(a.minLeft=Math.min(0,h),a.maxLeft=Math.max(0,h)),a.height>=n.height&&(a.minTop=Math.min(0,p),a.maxTop=Math.max(0,p))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var a=function(t){var e=t.width,i=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:e};var a=n%90*Math.PI/180,r=Math.sin(a),o=Math.cos(a),s=e*o+i*r,l=e*r+i*o;return n>90?{width:l,height:s}:{width:s,height:l}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),r=a.width,o=a.height,s=i.width*(r/i.naturalWidth),l=i.height*(o/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(l-i.height)/2,i.width=s,i.height=l,i.aspectRatio=r/o,i.naturalWidth=r,i.naturalHeight=o,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,H(this.canvas,U({width:i.width,height:i.height},st({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),a=i.naturalHeight*(e.height/e.naturalHeight);U(i,{width:n,height:a,left:(e.width-n)/2,top:(e.height-a)/2}),H(this.image,U({width:i.width,height:i.height},st(U({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,a={width:e.width,height:e.height};i&&(e.height*i>e.width?a.height=a.width/i:a.width=a.height*i),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=e.left+(e.width-a.width)/2,a.top=e.top+(e.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=U({},a)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,a=this.canvasData,r=this.cropBoxData,o=this.limited,s=i.aspectRatio;if(t){var l=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,u=o?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,d=o?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;l=Math.min(l,n.width),c=Math.min(c,n.height),s&&(l&&c?c*s>l?c=l/s:l=c*s:l?c=l/s:c&&(l=c*s),d*s>u?d=u/s:u=d*s),r.minWidth=Math.min(l,u),r.minHeight=Math.min(c,d),r.maxWidth=u,r.maxHeight=d}e&&(o?(r.minLeft=Math.max(0,a.left),r.minTop=Math.max(0,a.top),r.maxLeft=Math.min(n.width,a.left+a.width)-r.width,r.maxTop=Math.min(n.height,a.top+a.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=n.width-r.width,r.maxTop=n.height-r.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Q(this.face,g,i.width>=e.width&&i.height>=e.height?"move":"all"),H(this.cropBox,U({width:i.width,height:i.height},st({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),et(this.element,"crop",this.getData())}},ft={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",r=document.createElement("img");if(e&&(r.crossOrigin=e),r.src=n,r.alt=a,this.viewBox.appendChild(r),this.viewBoxImage=r,i){var o=i;"string"==typeof i?o=t.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),this.previews=o,B(o,function(t){var i=document.createElement("img");Q(t,b,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=n,i.alt=a,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)})}},resetPreview:function(){B(this.previews,function(t){var e=X(t,b);H(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(O(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(K(e)))}(t,b)})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,a=i.height,r=t.width,o=t.height,s=i.left-e.left-t.left,l=i.top-e.top-t.top;this.cropped&&!this.disabled&&(H(this.viewBoxImage,U({width:r,height:o},st(U({translateX:-s,translateY:-l},t)))),B(this.previews,function(e){var i=X(e,b),c=i.width,u=i.height,d=c,h=u,p=1;n&&(h=a*(p=c/n)),a&&h>u&&(d=n*(p=u/a),h=u),H(e,{width:d,height:h}),H(e.getElementsByTagName("img")[0],U({width:r*p,height:o*p},st(U({translateX:-s*p,translateY:-l*p},t))))}))}},mt={bind:function(){var t=this.element,e=this.options,i=this.cropper;P(e.cropstart)&&tt(t,"cropstart",e.cropstart),P(e.cropmove)&&tt(t,"cropmove",e.cropmove),P(e.cropend)&&tt(t,"cropend",e.cropend),P(e.crop)&&tt(t,"crop",e.crop),P(e.zoom)&&tt(t,"zoom",e.zoom),tt(i,w,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&tt(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&tt(i,"dblclick",this.onDblclick=this.dblclick.bind(this)),tt(t.ownerDocument,E,this.onCropMove=this.cropMove.bind(this)),tt(t.ownerDocument,T,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&tt(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;P(e.cropstart)&&$(t,"cropstart",e.cropstart),P(e.cropmove)&&$(t,"cropmove",e.cropmove),P(e.cropend)&&$(t,"cropend",e.cropend),P(e.crop)&&$(t,"crop",e.crop),P(e.zoom)&&$(t,"zoom",e.zoom),$(i,w,this.onCropStart),e.zoomable&&e.zoomOnWheel&&$(i,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&$(i,"dblclick",this.onDblclick),$(t.ownerDocument,E,this.onCropMove),$(t.ownerDocument,T,this.onCropEnd),e.responsive&&$(window,"resize",this.onResize)}},vt={resize:function(){if(!this.disabled){var t,e,i=this.options,n=this.container,a=this.containerData,r=n.offsetWidth/a.width,o=n.offsetHeight/a.height,s=Math.abs(r-1)>Math.abs(o-1)?r:o;if(1!==s)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(B(t,function(e,i){t[i]=e*s})),this.setCropBoxData(B(e,function(t,i){e[i]=t*s})))}},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=this.dragBox,e=d,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?"move":"crop"))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(R(e)&&1!==e||R(i)&&0!==i||t.ctrlKey))){var n,a=this.options,r=this.pointers;t.changedTouches?B(t.changedTouches,function(t){r[t.identifier]=lt(t)}):r[t.pointerId||0]=lt(t),n=Object.keys(r).length>1&&a.zoomable&&a.zoomOnTouch?"zoom":X(t.target,g),S.test(n)&&!1!==et(this.element,"cropstart",{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,"crop"===n&&(this.cropping=!0,z(this.dragBox,v)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==et(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?B(t.changedTouches,function(t){U(i[t.identifier]||{},lt(t,!0))}):U(i[t.pointerId||0]||{},lt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?B(t.changedTouches,function(t){delete i[t.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,V(this.dragBox,v,this.cropped&&this.options.modal)),et(this.element,"cropend",{originalEvent:t,action:e}))}}},yt={change:function(t){var i,n=this.options,a=this.canvasData,r=this.containerData,o=this.cropBoxData,s=this.pointers,l=this.action,c=n.aspectRatio,u=o.left,d=o.top,h=o.width,f=o.height,m=u+h,v=d+f,y=0,g=0,b=r.width,w=r.height,E=!0;!c&&t.shiftKey&&(c=h&&f?h/f:1),this.limited&&(y=o.minLeft,g=o.minTop,b=y+Math.min(r.width,a.width,a.left+a.width),w=g+Math.min(r.height,a.height,a.top+a.height));var T=s[Object.keys(s)[0]],S={x:T.endX-T.startX,y:T.endY-T.startY},A=function(t){switch(t){case"e":m+S.x>b&&(S.x=b-m);break;case"w":u+S.x<y&&(S.x=y-u);break;case"n":d+S.y<g&&(S.y=g-d);break;case"s":v+S.y>w&&(S.y=w-v)}};switch(l){case"all":u+=S.x,d+=S.y;break;case"e":if(S.x>=0&&(m>=b||c&&(d<=g||v>=w))){E=!1;break}A("e"),(h+=S.x)<0&&(l="w",u-=h=-h),c&&(f=h/c,d+=(o.height-f)/2);break;case"n":if(S.y<=0&&(d<=g||c&&(u<=y||m>=b))){E=!1;break}A("n"),f-=S.y,d+=S.y,f<0&&(l="s",d-=f=-f),c&&(h=f*c,u+=(o.width-h)/2);break;case"w":if(S.x<=0&&(u<=y||c&&(d<=g||v>=w))){E=!1;break}A("w"),h-=S.x,u+=S.x,h<0&&(l="e",u-=h=-h),c&&(f=h/c,d+=(o.height-f)/2);break;case"s":if(S.y>=0&&(v>=w||c&&(u<=y||m>=b))){E=!1;break}A("s"),(f+=S.y)<0&&(l="n",d-=f=-f),c&&(h=f*c,u+=(o.width-h)/2);break;case"ne":if(c){if(S.y<=0&&(d<=g||m>=b)){E=!1;break}A("n"),f-=S.y,d+=S.y,h=f*c}else A("n"),A("e"),S.x>=0?m<b?h+=S.x:S.y<=0&&d<=g&&(E=!1):h+=S.x,S.y<=0?d>g&&(f-=S.y,d+=S.y):(f-=S.y,d+=S.y);h<0&&f<0?(l="sw",d-=f=-f,u-=h=-h):h<0?(l="nw",u-=h=-h):f<0&&(l="se",d-=f=-f);break;case"nw":if(c){if(S.y<=0&&(d<=g||u<=y)){E=!1;break}A("n"),f-=S.y,d+=S.y,h=f*c,u+=o.width-h}else A("n"),A("w"),S.x<=0?u>y?(h-=S.x,u+=S.x):S.y<=0&&d<=g&&(E=!1):(h-=S.x,u+=S.x),S.y<=0?d>g&&(f-=S.y,d+=S.y):(f-=S.y,d+=S.y);h<0&&f<0?(l="se",d-=f=-f,u-=h=-h):h<0?(l="ne",u-=h=-h):f<0&&(l="sw",d-=f=-f);break;case"sw":if(c){if(S.x<=0&&(u<=y||v>=w)){E=!1;break}A("w"),h-=S.x,u+=S.x,f=h/c}else A("s"),A("w"),S.x<=0?u>y?(h-=S.x,u+=S.x):S.y>=0&&v>=w&&(E=!1):(h-=S.x,u+=S.x),S.y>=0?v<w&&(f+=S.y):f+=S.y;h<0&&f<0?(l="ne",d-=f=-f,u-=h=-h):h<0?(l="se",u-=h=-h):f<0&&(l="nw",d-=f=-f);break;case"se":if(c){if(S.x>=0&&(m>=b||v>=w)){E=!1;break}A("e"),f=(h+=S.x)/c}else A("s"),A("e"),S.x>=0?m<b?h+=S.x:S.y>=0&&v>=w&&(E=!1):h+=S.x,S.y>=0?v<w&&(f+=S.y):f+=S.y;h<0&&f<0?(l="nw",d-=f=-f,u-=h=-h):h<0?(l="sw",u-=h=-h):f<0&&(l="ne",d-=f=-f);break;case"move":this.move(S.x,S.y),E=!1;break;case"zoom":this.zoom(function(t){var i=e({},t),n=0;return B(t,function(t,e){delete i[e],B(i,function(e){var i=Math.abs(t.startX-e.startX),a=Math.abs(t.startY-e.startY),r=Math.abs(t.endX-e.endX),o=Math.abs(t.endY-e.endY),s=Math.sqrt(i*i+a*a),l=(Math.sqrt(r*r+o*o)-s)/s;Math.abs(l)>Math.abs(n)&&(n=l)})}),n}(s),t),E=!1;break;case"crop":if(!S.x||!S.y){E=!1;break}i=it(this.cropper),u=T.startX-i.left,d=T.startY-i.top,h=o.minWidth,f=o.minHeight,S.x>0?l=S.y>0?"se":"ne":S.x<0&&(u-=h,l=S.y>0?"sw":"nw"),S.y<0&&(d-=f),this.cropped||(W(this.cropBox,p),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}E&&(o.width=h,o.height=f,o.left=u,o.top=d,this.action=l,this.renderCropBox()),B(s,function(t){t.startX=t.endX,t.startY=t.endY})}},gt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&z(this.dragBox,v),W(this.cropBox,p),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=U({},this.initialImageData),this.canvasData=U({},this.initialCanvasData),this.cropBoxData=U({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(U(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),W(this.dragBox,v),z(this.cropBox,p)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,B(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,W(this.cropper,h)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,z(this.cropper,h)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=i.left,a=i.top;return this.moveTo(D(t)?t:n+Number(t),D(e)?e:a+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(R(t)&&(i.left=t,n=!0),R(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,a=this.canvasData,r=a.width,o=a.height,s=a.naturalWidth,l=a.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var c=s*t,u=l*t;if(!1===et(this.element,"zoom",{ratio:t,oldRatio:r/s,originalEvent:i}))return this;if(i){var d=this.pointers,h=it(this.cropper),p=d&&Object.keys(d).length?function(t){var e=0,i=0,n=0;return B(t,function(t){var a=t.startX,r=t.startY;e+=a,i+=r,n+=1}),{pageX:e/=n,pageY:i/=n}}(d):{pageX:i.pageX,pageY:i.pageY};a.left-=(c-r)*((p.pageX-h.left-a.left)/r),a.top-=(u-o)*((p.pageY-h.top-a.top)/o)}else M(e)&&R(e.x)&&R(e.y)?(a.left-=(c-r)*((e.x-a.left)/r),a.top-=(u-o)*((e.y-a.top)/o)):(a.left-=(c-r)/2,a.top-=(u-o)/2);a.width=c,a.height=u,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return R(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,R(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(R(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(R(t)&&(i.scaleX=t,n=!0),R(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,a=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-a.left,y:r.top-a.top,width:r.width,height:r.height};var o=n.width/n.naturalWidth;if(B(t,function(e,i){t[i]=e/o}),e){var s=Math.round(t.y+t.height),l=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=l-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=n.rotate||0),i.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&M(t)){var r=!1;e.rotatable&&R(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,r=!0),e.scalable&&(R(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,r=!0),R(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var o=i.width/i.naturalWidth;R(t.x)&&(a.left=t.x*o+n.left),R(t.y)&&(a.top=t.y*o+n.top),R(t.width)&&(a.width=t.width*o),R(t.height)&&(a.height=t.height*o),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?U({},this.containerData):{}},getImageData:function(){return this.sized?U({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&B(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&M(t)&&(R(t.left)&&(e.left=t.left),R(t.top)&&(e.top=t.top),R(t.width)?(e.width=t.width,e.height=t.width/i):R(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&M(t)&&(R(t.left)&&(n.left=t.left),R(t.top)&&(n.top=t.top),R(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),R(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),a&&(e?n.height=n.width/a:i&&(n.width=n.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,n){var a=e.aspectRatio,o=e.naturalWidth,s=e.naturalHeight,l=e.rotate,c=void 0===l?0:l,u=e.scaleX,d=void 0===u?1:u,h=e.scaleY,p=void 0===h?1:h,f=i.aspectRatio,m=i.naturalWidth,v=i.naturalHeight,y=n.fillColor,g=void 0===y?"transparent":y,b=n.imageSmoothingEnabled,w=void 0===b||b,E=n.imageSmoothingQuality,T=void 0===E?"low":E,S=n.maxWidth,A=void 0===S?1/0:S,k=n.maxHeight,_=void 0===k?1/0:k,L=n.minWidth,x=void 0===L?0:L,R=n.minHeight,C=void 0===R?0:R,D=document.createElement("canvas"),O=D.getContext("2d"),I=ct({aspectRatio:f,width:A,height:_}),M=ct({aspectRatio:f,width:x,height:C},"cover"),P=Math.min(I.width,Math.max(M.width,m)),F=Math.min(I.height,Math.max(M.height,v)),N=ct({aspectRatio:a,width:A,height:_}),B=ct({aspectRatio:a,width:x,height:C},"cover"),U=Math.min(N.width,Math.max(B.width,o)),j=Math.min(N.height,Math.max(B.height,s)),G=[-U/2,-j/2,U,j];return D.width=q(P),D.height=q(F),O.fillStyle=g,O.fillRect(0,0,P,F),O.save(),O.translate(P/2,F/2),O.rotate(c*Math.PI/180),O.scale(d,p),O.imageSmoothingEnabled=w,O.imageSmoothingQuality=T,O.drawImage.apply(O,[t].concat(r(G.map(function(t){return Math.floor(q(t))})))),O.restore(),D}(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(),a=n.x,o=n.y,s=n.width,l=n.height,c=i.width/Math.floor(e.naturalWidth);1!==c&&(a*=c,o*=c,s*=c,l*=c);var u=s/l,d=ct({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),h=ct({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=ct({aspectRatio:u,width:t.width||(1!==c?i.width:s),height:t.height||(1!==c?i.height:l)}),f=p.width,m=p.height;f=Math.min(d.width,Math.max(h.width,f)),m=Math.min(d.height,Math.max(h.height,m));var v=document.createElement("canvas"),y=v.getContext("2d");v.width=q(f),v.height=q(m),y.fillStyle=t.fillColor||"transparent",y.fillRect(0,0,f,m);var g=t.imageSmoothingEnabled,b=void 0===g||g,w=t.imageSmoothingQuality;y.imageSmoothingEnabled=b,w&&(y.imageSmoothingQuality=w);var E,T,S,A,k,_,L=i.width,x=i.height,R=a,C=o;R<=-s||R>L?(R=0,E=0,S=0,k=0):R<=0?(S=-R,R=0,k=E=Math.min(L,s+R)):R<=L&&(S=0,k=E=Math.min(s,L-R)),E<=0||C<=-l||C>x?(C=0,T=0,A=0,_=0):C<=0?(A=-C,C=0,_=T=Math.min(x,l+C)):C<=x&&(A=0,_=T=Math.min(l,x-C));var D=[R,C,E,T];if(k>0&&_>0){var O=f/s;D.push(S*O,A*O,k*O,_*O)}return y.drawImage.apply(y,[i].concat(r(D.map(function(t){return Math.floor(q(t))})))),v},setAspectRatio:function(t){var e=this.options;return this.disabled||D(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var a="crop"===t,r=e.movable&&"move"===t;t=a||r?t:"none",e.dragMode=t,Q(i,g,t),V(i,d,a),V(i,y,r),e.cropBoxMovable||(Q(n,g,t),V(n,d,a),V(n,y,r))}return this}},bt=l.Cropper,wt=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!_.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=U({},L,M(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,i,a;return e=t,a=[{key:"noConflict",value:function(){return window.Cropper=bt,t}},{key:"setDefaults",value:function(t){U(L,M(t)&&t)}}],(i=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(A.test(t))k.test(t)?this.read((a=t.replace(dt,""),r=atob(a),o=new ArrayBuffer(r.length),B(s=new Uint8Array(o),function(t,e){s[e]=r.charCodeAt(e)}),o)):this.clone();else{var a,r,o,s,l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){"image/jpeg"!==l.getResponseHeader("content-type")&&l.abort()},l.onload=function(){e.read(l.response)},l.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&rt(t)&&i.crossOrigin&&(t=ot(t)),l.open("GET",t,!0),l.responseType="arraybuffer",l.withCredentials="use-credentials"===i.crossOrigin,l.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,n=ht(t),a=0,r=1,o=1;if(n>1){this.url=function(t,e){for(var i=[],n=new Uint8Array(t);n.length>0;)i.push(ut.apply(null,N(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,"image/jpeg");var s=function(t){var e=0,i=1,n=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:n}}(n);a=s.rotate,r=s.scaleX,o=s.scaleY}e.rotatable&&(i.rotate=a),e.scalable&&(i.scaleX=r,i.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.options.checkCrossOrigin&&rt(e)&&(i||(i="anonymous"),n=ot(e)),this.crossOrigin=i,this.crossOriginUrl=n;var a=document.createElement("img");i&&(a.crossOrigin=i),a.src=n||e,a.alt=t.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),z(a,f),t.parentNode.insertBefore(a,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=l.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(l.navigator.userAgent),n=function(e,i){U(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=U({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var a=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){n(a.width,a.height),i||r.removeChild(a)},a.src=e.src,i||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(a))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,n=t.parentNode,a=document.createElement("div");a.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var r=a.querySelector(".".concat("cropper","-container")),o=r.querySelector(".".concat("cropper","-canvas")),s=r.querySelector(".".concat("cropper","-drag-box")),l=r.querySelector(".".concat("cropper","-crop-box")),c=l.querySelector(".".concat("cropper","-face"));this.container=n,this.cropper=r,this.canvas=o,this.dragBox=s,this.cropBox=l,this.viewBox=r.querySelector(".".concat("cropper","-view-box")),this.face=c,o.appendChild(i),z(t,p),n.insertBefore(r,t.nextSibling),W(i,f),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,z(l,p),e.guides||z(l.getElementsByClassName("".concat("cropper","-dashed")),p),e.center||z(l.getElementsByClassName("".concat("cropper","-center")),p),e.background&&z(r,"".concat("cropper","-bg")),e.highlight||z(c,m),e.cropBoxMovable&&(z(c,y),Q(c,g,"all")),e.cropBoxResizable||(z(l.getElementsByClassName("".concat("cropper","-line")),p),z(l.getElementsByClassName("".concat("cropper","-point")),p)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),P(e.ready)&&tt(t,"ready",e.ready,{once:!0}),et(t,"ready")}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),W(this.element,p)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&n(e.prototype,i),a&&n(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();return U(wt.prototype,pt,ft,mt,vt,yt,gt),wt},t.exports=n()},"4gCw":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),r=i("gyMJ"),o=i("ZRIN"),s=i.n(o),l=i("NYxO"),c={name:"emoji",data:function(){return{IMG_URL:"",expressionList:[],myEmojiList:[],currEmojiDetail:{},emojiJson:s.a.data.split(","),activeName:"default"}},computed:a()({},Object(l.c)(["user"])),watch:{"user.emoji":function(){var t=this;this.myEmojiList=[],this.expressionList.forEach(function(e){t.user.emoji.forEach(function(i){e.code===i&&t.myEmojiList.push(e)})})}},methods:{getExpression:function(){var t=this;r.a.getExpression().then(function(e){0===e.code&&(t.myEmojiList=[],t.expressionList=e.data,e.data.forEach(function(e){t.user.emoji.forEach(function(i){e.code===i&&t.myEmojiList.push(e)})}))})},chooseEmoji:function(t){this.$emit("chooseEmoji",t)},emojiDetail:function(t){this.currEmojiDetail=t},chooseEmojiDefault:function(t){this.$emit("chooseEmojiDefault",t)},addEmoji:function(t){var e=this;this.user.emoji.push(t);var i={emoji:this.user.emoji};r.a.upUserInfo(i).then(function(t){0===t.code?e.$message({message:"添加成功",type:"success"}):e.$message({message:"添加失败",type:"warning"})})}},mounted:function(){this.user.emoji&&this.getExpression()}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vchat-emoji"},[i("el-tabs",{attrs:{type:"border-card","tab-position":"bottom"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{name:"default"}},[i("span",{staticClass:"emoji-tap",attrs:{slot:"label",lazy:!0},slot:"label"},[t._v("\n                "+t._s(t.emojiJson[0])+"\n            ")]),t._v(" "),i("ul",{staticClass:"emoji-default"},t._l(t.emojiJson,function(e,n){return i("li",{key:n,on:{click:function(i){return i.stopPropagation(),t.chooseEmojiDefault(e)}}},[t._v("\n                    "+t._s(e)+"\n                ")])}),0)]),t._v(" "),t._l(t.myEmojiList,function(e){return i("el-tab-pane",{key:e.code,attrs:{name:e.code+""}},[i("span",{staticClass:"emoji-tap",attrs:{slot:"label",lazy:!0},slot:"label"},[i("img",{staticClass:"emoji-tap-img",attrs:{src:t.IMG_URL+e.list[0],alt:""}})]),t._v(" "),t.activeName===e.code+""?i("ul",{staticClass:"emoji-ul"},t._l(e.list,function(e,n){return i("li",{key:n,on:{click:function(i){return i.stopPropagation(),t.chooseEmoji(e)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.IMG_URL+e,expression:"IMG_URL + m"}]})])}),0):t._e()])}),t._v(" "),i("el-tab-pane",{attrs:{name:"shop"}},[i("span",{staticClass:"emoji-tap",attrs:{slot:"label",lazy:!0},slot:"label"},[i("v-icon",{attrs:{name:"jia2",color:"rgba(50, 50, 50, 0.64)"}})],1),t._v(" "),"shop"===t.activeName?i("div",{staticClass:"emoji-shop"},[i("h3",[t._v("表情商城")]),t._v(" "),i("ul",{staticClass:"emoji-shop-ul"},t._l(t.expressionList,function(e,n){return i("li",{key:n,on:{click:function(i){return i.stopPropagation(),t.emojiDetail(e)}}},[i("a",[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.IMG_URL+e.list[0],expression:"IMG_URL + m.list[0]"}],attrs:{alt:""}})]),t._v(" "),i("p",{staticClass:"vchat-line1"},[t._v(t._s(e.name))])])}),0),t._v(" "),i("div",{staticClass:"emojiDetail",class:{active:t.currEmojiDetail.name}},[i("h3",[t._v(t._s(t.currEmojiDetail.name))]),t._v(" "),i("v-icon",{staticClass:"el-icon-circle-close-outline deClose",attrs:{color:"#323232",size:24,cursor:"pointer"},on:{clickIcon:function(e){t.currEmojiDetail={}}}}),t._v(" "),i("ul",{staticClass:"emoji-detail"},t._l(t.currEmojiDetail.list,function(e,n){return i("li",{key:n},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.IMG_URL+e,expression:"IMG_URL + m"}],attrs:{alt:""}})])}),0),t._v(" "),-1===t.user.emoji.indexOf(t.currEmojiDetail.code)?i("p",{staticClass:"vchat-button addEmoji",on:{click:function(e){return e.stopPropagation(),t.addEmoji(t.currEmojiDetail.code)}}},[t._v("添加")]):i("p",{staticClass:"vchat-button info addEmoji"},[t._v("已添加")])],1)]):t._e()])],2)],1)},staticRenderFns:[]};var d=i("VU/8")(c,u,!1,function(t){i("LHvg")},"data-v-2093a174",null);e.default=d.exports},"8q76":function(t,e){},BkFi:function(t,e){},EDzG:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("36HN");var n=i("YT+p"),a=i.n(n),r=i("Igiw"),o=i.n(r),s={name:"dplayer",props:["videoInfo"],data:function(){return{dp:null,hls:null}},watch:{"videoInfo.src":{handler:function(t){var e=this;"hls"===this.videoInfo.type&&(this.hls&&this.hls.destroy(),this.dp.switchVideo({url:t,type:"customHls",customType:{customHls:function(t,i){e.hls=new a.a,e.hls.loadSource(t.src),e.hls.attachMedia(t)}}}),this.dp.on("canplaythrough",function(){e.dp.play()}))}}},beforeDestroy:function(){this.hls&&this.hls.destroy(),this.dp.destroy()},computed:{playerName:function(){return"dplayer-"+Math.random()}},methods:{initHlsPlayer:function(){var t=this;this.dp=new o.a({container:document.getElementById(this.playerName),autoplay:this.videoInfo.autoplay||!1,video:{url:this.videoInfo.src,type:"customHls",customType:{customHls:function(e,i){t.hls=new a.a,t.hls.loadSource(e.src),t.hls.attachMedia(e)}}}})},initMp4Player:function(){this.dp=new o.a({container:document.getElementById(this.playerName),autoplay:this.videoInfo.autoplay||!1,preload:"none",video:{url:this.videoInfo.src,type:"auto",pic:this.videoInfo.pic},mutex:!0})}},mounted:function(){var t=this;this.$nextTick(function(e){"hls"===t.videoInfo.type?t.initHlsPlayer():"mp4"===t.videoInfo.type&&t.initMp4Player()})}},l={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vchat-dplayer",attrs:{id:this.playerName}})},staticRenderFns:[]};var c=i("VU/8")(s,l,!1,function(t){i("p60H")},null,null);e.default=c.exports},ExVr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("tRMW"),a=i.n(n),r=i("gyMJ"),o=i("oAV5"),s=i.n(o),l={name:"backLog",data:function(){return{bg:a.a,todoList:[]}},methods:{getTodoList:function(){var t=this;r.a.getTodoList().then(function(e){0===e.code&&(t.todoList=e.data)})},formatTime:function(t){return s.a.formatTime(new Date(t))},delTodo:function(t){var e=this;this.$confirm("确认删除该日程记录吗？","确认信息").then(function(){r.a.delTodo({_id:t}).then(function(i){0===i.code?(e.todoList=e.todoList.filter(function(e){return t!==e._id}),e.$message({message:"删除成功",type:"success"})):e.$message({message:"删除失败",type:"warning"})})}).catch(function(t){})}},mounted:function(){this.getTodoList()}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"backLog"},[i("h3",[i("span",[t._v("待办日程")]),t._v(" "),i("v-icon",{attrs:{name:"jia2",color:"#ff6b6b",cursor:"pointer",title:"前往日程管理"},on:{clickIcon:function(e){return t.$router.push({name:"todo"})}}})],1),t._v(" "),i("div",{staticClass:"todoList"},[t.todoList.length?i("ul",t._l(t.todoList,function(e,n){return i("li",{key:n},[i("p",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),i("p",{staticClass:"content"},[i("v-icon",{attrs:{name:"clock",color:"#686868",size:18}}),t._v("： "+t._s(e.content)+"\n                ")],1),t._v(" "),i("p",{staticClass:"info"},[i("span",[i("i",{staticClass:"address"},[t._v(t._s(e.address)+" ")]),t._v(" "+t._s(t.formatTime(e.start))+" 至 "+t._s(t.formatTime(e.end)))]),t._v(" "),i("span",[i("v-icon",{staticClass:"el-icon-delete",attrs:{cursor:"pointer",size:14},on:{clickIcon:function(i){return t.delTodo(e._id)}}})],1)])])}),0):i("v-nodata",{attrs:{url:t.bg}},[i("p",{staticClass:"vchat-no-have"},[t._v("\n                暂无日程安排哟!\n            ")])])],1)])},staticRenderFns:[]};var u=i("VU/8")(l,c,!1,function(t){i("+Gq9")},"data-v-28d44ba6",null);e.default=u.exports},IKvY:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weather-icon-box"},["sun-shower"===t.type?i("div",{staticClass:"weather-icon sun-shower"},[i("div",{staticClass:"cloud"}),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"rain"})]):t._e(),t._v(" "),"thunder-storm"===t.type?i("div",{staticClass:"weather-icon thunder-storm"},[i("div",{staticClass:"cloud"}),t._v(" "),t._m(1)]):t._e(),t._v(" "),"cloudy"===t.type?i("div",{staticClass:"weather-icon cloudy"},[i("div",{staticClass:"cloud"}),t._v(" "),i("div",{staticClass:"cloud"})]):t._e(),t._v(" "),"flurries"===t.type?i("div",{staticClass:"weather-icon flurries"},[i("div",{staticClass:"cloud"}),t._v(" "),t._m(2)]):t._e(),t._v(" "),"sunny"===t.type?i("div",{staticClass:"weather-icon sunny"},[t._m(3)]):t._e(),t._v(" "),"rainy"===t.type?i("div",{staticClass:"weather-icon rainy"},[i("div",{staticClass:"cloud"}),t._v(" "),i("div",{staticClass:"rain"})]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sun"},[e("div",{staticClass:"rays"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lightning"},[e("div",{staticClass:"bolt"}),this._v(" "),e("div",{staticClass:"bolt"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"snow"},[e("div",{staticClass:"flake"}),this._v(" "),e("div",{staticClass:"flake"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sun"},[e("div",{staticClass:"rays"})])}]};var a=i("VU/8")({props:["type"],name:"weatherIcon",data:function(){return{}}},n,!1,function(t){i("Q9Vu")},"data-v-2a2955fc",null);e.default=a.exports},Igiw:function(t,e,i){var n;window,n=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=78)}([function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=i(11),r=i(65),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function l(t){return null!==t&&"object"===(void 0===t?"undefined":n(t))}function c(t){return"[object Function]"===o.call(t)}function u(t,e){if(null!==t&&void 0!==t)if("object"!==(void 0===t?"undefined":n(t))&&(t=[t]),s(t))for(var i=0,a=t.length;i<a;i++)e.call(null,t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:r,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:l,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:c,isStream:function(t){return l(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function t(){var e={};function i(i,a){"object"===n(e[a])&&"object"===(void 0===i?"undefined":n(i))?e[a]=t(e[a],i):e[a]=i}for(var a=0,r=arguments.length;a<r;a++)u(arguments[a],i);return e},extend:function(t,e,i){return u(e,function(e,n){t[n]=i&&"function"==typeof e?a(e,i):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/mobile/i.test(window.navigator.userAgent),a={secondToTime:function(t){var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=Math.floor(t-3600*e-60*i);return(e>0?[e,i,n]:[i,n]).map(function(t){return t<10?"0"+t:""+t}).join(":")},getElementViewLeft:function(t){var e=t.offsetLeft,i=t.offsetParent,n=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==i&&i!==t;)e+=i.offsetLeft,i=i.offsetParent;else for(;null!==i;)e+=i.offsetLeft,i=i.offsetParent;return e-n},getBoundingClientRectViewLeft:function(t){var e=document.documentElement.scrollTop;if(t.getBoundingClientRect){if("number"!=typeof this.getBoundingClientRectViewLeft.offset){var i=document.createElement("div");i.style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(i),this.getBoundingClientRectViewLeft.offset=-i.getBoundingClientRect().top-e,document.body.removeChild(i),i=null}var n=t.getBoundingClientRect(),a=this.getBoundingClientRectViewLeft.offset;return n.left+a}return this.getElementViewLeft(t)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(t){var e=t.left,i=void 0===e?0:e,n=t.top,a=void 0===n?0:n;this.isFirefox?(document.documentElement.scrollLeft=i,document.documentElement.scrollTop=a):window.scrollTo(i,a)},isMobile:n,isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(t,e){localStorage.setItem(t,e)},get:function(t){return localStorage.getItem(t)}},cumulativeOffset:function(t){var e=0,i=0;do{e+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent}while(t);return{top:e,left:i}},nameMap:{dragStart:n?"touchstart":"mousedown",dragMove:n?"touchmove":"mousemove",dragEnd:n?"touchend":"mouseup"},color2Number:function(t){return"#"===t[0]&&(t=t.substr(1)),3===t.length&&(t=""+t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),parseInt(t,16)+0&16777215},number2Color:function(t){return"#"+("00000"+t.toString(16)).slice(-6)},number2Type:function(t){switch(t){case 0:return"right";case 1:return"top";case 2:return"bottom";default:return"right"}}};e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=b(i(46)),a=b(i(45)),r=b(i(44)),o=b(i(43)),s=b(i(42)),l=b(i(41)),c=b(i(40)),u=b(i(39)),d=b(i(38)),h=b(i(37)),p=b(i(36)),f=b(i(35)),m=b(i(34)),v=b(i(33)),y=b(i(32)),g=b(i(31));function b(t){return t&&t.__esModule?t:{default:t}}var w={play:n.default,pause:a.default,volumeUp:r.default,volumeDown:o.default,volumeOff:s.default,full:l.default,fullWeb:c.default,setting:u.default,right:d.default,comment:h.default,commentOff:p.default,send:f.default,pallette:m.default,camera:v.default,subtitle:y.default,loading:g.default};e.default=w},function(t,e,i){"use strict";(function(e){var n=i(0),a=i(63),r={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,l={adapter:("undefined"!=typeof XMLHttpRequest?s=i(10):void 0!==e&&(s=i(10)),s),transformRequest:[function(t,e){return a(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(t){l.headers[t]={}}),n.forEach(["post","put","patch"],function(t){l.headers[t]=n.merge(r)}),t.exports=l}).call(this,i(12))},function(t,e,i){"use strict";var n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":a(window))&&(n=window)}t.exports=n},function(t,e,i){var n=i(6);t.exports=function(t){"use strict";var e="",i=(t=t||{}).enableSubtitle,a=t.subtitle,r=t.current,o=t.pic,s=n.$escape,l=t.screenshot,c=t.preload,u=t.url;return i=a&&"webvtt"===a.type,e+='\n<video\n    class="dplayer-video ',r&&(e+="dplayer-video-current"),e+='"\n    webkit-playsinline\n    playsinline\n    ',o&&(e+='poster="',e+=s(o),e+='"'),e+="\n    ",(l||i)&&(e+='crossorigin="anonymous"'),e+="\n    ",c&&(e+='preload="',e+=s(c),e+='"'),e+="\n    ",u&&(e+='src="',e+=s(u),e+='"'),e+="\n    >\n    ",i&&(e+='\n    <track kind="metadata" default src="',e+=s(a.url),e+='"></track>\n    '),e+"\n</video>"}},function(t,e,i){"use strict";t.exports=i(29)},function(t,e,i){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,i){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,i){"use strict";var n=i(61);t.exports=function(t,e,i,a,r){var o=new Error(t);return n(o,e,i,a,r)}},function(t,e,i){"use strict";var n=i(0),a=i(62),r=i(60),o=i(59),s=i(58),l=i(9),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||i(57);t.exports=function(t){return new Promise(function(e,u){var d=t.data,h=t.headers;n.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest,f="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(t.url)||(p=new window.XDomainRequest,f="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var v=t.auth.username||"",y=t.auth.password||"";h.Authorization="Basic "+c(v+":"+y)}if(p.open(t.method.toUpperCase(),r(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[f]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:i,config:t,request:p};a(e,u,n),p=null}},p.onerror=function(){u(l("Network Error",t,null,p)),p=null},p.ontimeout=function(){u(l("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var g=i(56),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?g.read(t.xsrfCookieName):void 0;b&&(h[t.xsrfHeaderName]=b)}if("setRequestHeader"in p&&n.forEach(h,function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete h[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),u(t),p=null)}),void 0===d&&(d=null),p.send(d)})}},function(t,e,i){"use strict";t.exports=function(t,e){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return t.apply(e,i)}}},function(t,e,i){"use strict";var n,a,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(t){a=s}}();var c,u=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!d){var t=l(p);d=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,d=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new m(t,e)),1!==u.length||d||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.template.infoPanel,this.template=e.template,this.video=e.video,this.player=e,this.template.infoPanelClose.addEventListener("click",function(){i.hide()})}return n(t,[{key:"show",value:function(){this.beginTime=Date.now(),this.update(),this.player.timer.enable("info"),this.player.timer.enable("fps"),this.container.classList.remove("dplayer-info-panel-hide")}},{key:"hide",value:function(){this.player.timer.disable("info"),this.player.timer.disable("fps"),this.container.classList.add("dplayer-info-panel-hide")}},{key:"triggle",value:function(){this.container.classList.contains("dplayer-info-panel-hide")?this.show():this.hide()}},{key:"update",value:function(){this.template.infoVersion.innerHTML="v1.25.0 fdcf45b",this.template.infoType.innerHTML=this.player.type,this.template.infoUrl.innerHTML=this.player.options.video.url,this.template.infoResolution.innerHTML=this.player.video.videoWidth+" x "+this.player.video.videoHeight,this.template.infoDuration.innerHTML=this.player.video.duration,this.player.options.danmaku&&(this.template.infoDanmakuId.innerHTML=this.player.options.danmaku.id,this.template.infoDanmakuApi.innerHTML=this.player.options.danmaku.api,this.template.infoDanmakuAmount.innerHTML=this.player.danmaku.dan.length)}},{key:"fps",value:function(t){this.template.infoFPS.innerHTML=""+t.toFixed(1)}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.shown=!1,Array.prototype.slice.call(this.player.template.menuItem).forEach(function(t,e){i.player.options.contextmenu[e].click&&t.addEventListener("click",function(){i.player.options.contextmenu[e].click(i.player),i.hide()})}),this.player.container.addEventListener("contextmenu",function(t){if(i.shown)i.hide();else{var e=t||window.event;e.preventDefault();var n=i.player.container.getBoundingClientRect();i.show(e.clientX-n.left,e.clientY-n.top),i.player.template.mask.addEventListener("click",function(){i.hide()})}})}return n(t,[{key:"show",value:function(t,e){this.player.template.menu.classList.add("dplayer-menu-show");var i=this.player.container.getBoundingClientRect();t+this.player.template.menu.offsetWidth>=i.width?(this.player.template.menu.style.right=i.width-t+"px",this.player.template.menu.style.left="initial"):(this.player.template.menu.style.left=t+"px",this.player.template.menu.style.right="initial"),e+this.player.template.menu.offsetHeight>=i.height?(this.player.template.menu.style.bottom=i.height-e+"px",this.player.template.menu.style.top="initial"):(this.player.template.menu.style.top=e+"px",this.player.template.menu.style.bottom="initial"),this.player.template.mask.classList.add("dplayer-mask-show"),this.shown=!0,this.player.events.trigger("contextmenu_show")}},{key:"hide",value:function(){this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.template.menu.classList.remove("dplayer-menu-show"),this.shown=!1,this.player.events.trigger("contextmenu_hide")}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.options.hotkey&&document.addEventListener("keydown",function(t){if(e.focus){var i=document.activeElement.tagName.toUpperCase(),n=document.activeElement.getAttribute("contenteditable");if("INPUT"!==i&&"TEXTAREA"!==i&&""!==n&&"true"!==n){var a=t||window.event,r=void 0;switch(a.keyCode){case 32:a.preventDefault(),e.toggle();break;case 37:a.preventDefault(),e.seek(e.video.currentTime-5),e.controller.setAutoHide();break;case 39:a.preventDefault(),e.seek(e.video.currentTime+5),e.controller.setAutoHide();break;case 38:a.preventDefault(),r=e.volume()+.1,e.volume(r);break;case 40:a.preventDefault(),r=e.volume()-.1,e.volume(r)}}}}),document.addEventListener("keydown",function(t){switch((t||window.event).keyCode){case 27:e.fullScreen.isFullScreen("web")&&e.fullScreen.cancel("web")}})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(1))&&n.__esModule?n:{default:n},o=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.template.mask.addEventListener("click",function(){i.hide()}),this.player.template.commentButton.addEventListener("click",function(){i.show()}),this.player.template.commentSettingButton.addEventListener("click",function(){i.toggleSetting()}),this.player.template.commentColorSettingBox.addEventListener("click",function(){if(i.player.template.commentColorSettingBox.querySelector("input:checked+span")){var t=i.player.template.commentColorSettingBox.querySelector("input:checked").value;i.player.template.commentSettingFill.style.fill=t,i.player.template.commentInput.style.color=t,i.player.template.commentSendFill.style.fill=t}}),this.player.template.commentInput.addEventListener("click",function(){i.hideSetting()}),this.player.template.commentInput.addEventListener("keydown",function(t){13===(t||window.event).keyCode&&i.send()}),this.player.template.commentSendButton.addEventListener("click",function(){i.send()})}return a(t,[{key:"show",value:function(){this.player.controller.disableAutoHide=!0,this.player.template.controller.classList.add("dplayer-controller-comment"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.container.classList.add("dplayer-show-controller"),this.player.template.commentInput.focus()}},{key:"hide",value:function(){this.player.template.controller.classList.remove("dplayer-controller-comment"),this.player.template.mask.classList.remove("dplayer-mask-show"),this.player.container.classList.remove("dplayer-show-controller"),this.player.controller.disableAutoHide=!1,this.hideSetting()}},{key:"showSetting",value:function(){this.player.template.commentSettingBox.classList.add("dplayer-comment-setting-open")}},{key:"hideSetting",value:function(){this.player.template.commentSettingBox.classList.remove("dplayer-comment-setting-open")}},{key:"toggleSetting",value:function(){this.player.template.commentSettingBox.classList.contains("dplayer-comment-setting-open")?this.hideSetting():this.showSetting()}},{key:"send",value:function(){var t=this;this.player.template.commentInput.blur(),this.player.template.commentInput.value.replace(/^\s+|\s+$/g,"")?this.player.danmaku.send({text:this.player.template.commentInput.value,color:r.default.color2Number(this.player.container.querySelector(".dplayer-comment-setting-color input:checked").value),type:parseInt(this.player.container.querySelector(".dplayer-comment-setting-type input:checked").value)},function(){t.player.template.commentInput.value="",t.hide()}):this.player.notice(this.player.tran("Please input danmaku content!"))}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(1))&&n.__esModule?n:{default:n},o=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.template.mask.addEventListener("click",function(){i.hide()}),this.player.template.settingButton.addEventListener("click",function(){i.show()}),this.loop=this.player.options.loop,this.player.template.loopToggle.checked=this.loop,this.player.template.loop.addEventListener("click",function(){i.player.template.loopToggle.checked=!i.player.template.loopToggle.checked,i.player.template.loopToggle.checked?i.loop=!0:i.loop=!1,i.hide()}),this.showDanmaku=this.player.user.get("danmaku"),this.showDanmaku||this.player.danmaku&&this.player.danmaku.hide(),this.player.template.showDanmakuToggle.checked=this.showDanmaku,this.player.template.showDanmaku.addEventListener("click",function(){i.player.template.showDanmakuToggle.checked=!i.player.template.showDanmakuToggle.checked,i.player.template.showDanmakuToggle.checked?(i.showDanmaku=!0,i.player.danmaku.show()):(i.showDanmaku=!1,i.player.danmaku.hide()),i.player.user.set("danmaku",i.showDanmaku?1:0),i.hide()}),this.unlimitDanmaku=this.player.user.get("unlimited"),this.player.template.unlimitDanmakuToggle.checked=this.unlimitDanmaku,this.player.template.unlimitDanmaku.addEventListener("click",function(){i.player.template.unlimitDanmakuToggle.checked=!i.player.template.unlimitDanmakuToggle.checked,i.player.template.unlimitDanmakuToggle.checked?(i.unlimitDanmaku=!0,i.player.danmaku.unlimit(!0)):(i.unlimitDanmaku=!1,i.player.danmaku.unlimit(!1)),i.player.user.set("unlimited",i.unlimitDanmaku?1:0),i.hide()}),this.player.template.speed.addEventListener("click",function(){i.player.template.settingBox.classList.add("dplayer-setting-box-narrow"),i.player.template.settingBox.classList.add("dplayer-setting-box-speed")});for(var n=function(t){i.player.template.speedItem[t].addEventListener("click",function(){i.player.speed(i.player.template.speedItem[t].dataset.speed),i.hide()})},a=0;a<this.player.template.speedItem.length;a++)n(a);if(this.player.danmaku){this.player.on("danmaku_opacity",function(t){i.player.bar.set("danmaku",t,"width"),i.player.user.set("opacity",t)}),this.player.danmaku.opacity(this.player.user.get("opacity"));var o=function(t){var e=t||window.event,n=((e.clientX||e.changedTouches[0].clientX)-r.default.getBoundingClientRectViewLeft(i.player.template.danmakuOpacityBarWrap))/130;n=Math.max(n,0),n=Math.min(n,1),i.player.danmaku.opacity(n)},s=function t(){document.removeEventListener(r.default.nameMap.dragEnd,t),document.removeEventListener(r.default.nameMap.dragMove,o),i.player.template.danmakuOpacityBox.classList.remove("dplayer-setting-danmaku-active")};this.player.template.danmakuOpacityBarWrapWrap.addEventListener("click",function(t){var e=t||window.event,n=((e.clientX||e.changedTouches[0].clientX)-r.default.getBoundingClientRectViewLeft(i.player.template.danmakuOpacityBarWrap))/130;n=Math.max(n,0),n=Math.min(n,1),i.player.danmaku.opacity(n)}),this.player.template.danmakuOpacityBarWrapWrap.addEventListener(r.default.nameMap.dragStart,function(){document.addEventListener(r.default.nameMap.dragMove,o),document.addEventListener(r.default.nameMap.dragEnd,s),i.player.template.danmakuOpacityBox.classList.add("dplayer-setting-danmaku-active")})}}return a(t,[{key:"hide",value:function(){var t=this;this.player.template.settingBox.classList.remove("dplayer-setting-box-open"),this.player.template.mask.classList.remove("dplayer-mask-show"),setTimeout(function(){t.player.template.settingBox.classList.remove("dplayer-setting-box-narrow"),t.player.template.settingBox.classList.remove("dplayer-setting-box-speed")},300),this.player.controller.disableAutoHide=!1}},{key:"show",value:function(){this.player.template.settingBox.classList.add("dplayer-setting-box-open"),this.player.template.mask.classList.add("dplayer-mask-show"),this.player.controller.disableAutoHide=!0}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.barWidth=e.barWidth,this.container.style.backgroundImage="url('"+e.url+"')",this.events=e.events}return n(t,[{key:"resize",value:function(t,e){this.container.style.width=t+"px",this.container.style.height=e+"px",this.container.style.top=2-e+"px"}},{key:"show",value:function(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}},{key:"move",value:function(t){this.container.style.backgroundPosition="-"+160*(Math.ceil(t/this.barWidth*100)-1)+"px 0",this.container.style.left=Math.min(Math.max(t-this.container.offsetWidth/2,-10),this.barWidth-150)+"px"}},{key:"hide",value:function(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=s(i(1)),r=s(i(18)),o=s(i(2));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.autoHideTimer=0,a.default.isMobile||(this.player.container.addEventListener("mousemove",function(){i.setAutoHide()}),this.player.container.addEventListener("click",function(){i.setAutoHide()}),this.player.on("play",function(){i.setAutoHide()}),this.player.on("pause",function(){i.setAutoHide()})),this.initPlayButton(),this.initThumbnails(),this.initPlayedBar(),this.initFullButton(),this.initQualityButton(),this.initScreenshotButton(),this.initSubtitleButton(),this.initHighlights(),a.default.isMobile||this.initVolumeButton()}return n(t,[{key:"initPlayButton",value:function(){var t=this;this.player.template.playButton.addEventListener("click",function(){t.player.toggle()}),a.default.isMobile?(this.player.template.videoWrap.addEventListener("click",function(){t.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){t.toggle()})):(this.player.template.videoWrap.addEventListener("click",function(){t.player.toggle()}),this.player.template.controllerMask.addEventListener("click",function(){t.player.toggle()}))}},{key:"initHighlights",value:function(){var t=this;this.player.on("durationchange",function(){if(1!==t.player.video.duration&&t.player.video.duration!==1/0&&t.player.options.highlight){var e=document.querySelectorAll(".dplayer-highlight");[].slice.call(e,0).forEach(function(e){t.player.template.playedBarWrap.removeChild(e)});for(var i=0;i<t.player.options.highlight.length;i++)if(t.player.options.highlight[i].text&&t.player.options.highlight[i].time){var n=document.createElement("div");n.classList.add("dplayer-highlight"),n.style.left=t.player.options.highlight[i].time/t.player.video.duration*100+"%",n.innerHTML='<span class="dplayer-highlight-text">'+t.player.options.highlight[i].text+"</span>",t.player.template.playedBarWrap.insertBefore(n,t.player.template.playedBarTime)}}})}},{key:"initThumbnails",value:function(){var t=this;this.player.options.video.thumbnails&&(this.thumbnails=new r.default({container:this.player.template.barPreview,barWidth:this.player.template.barWrap.offsetWidth,url:this.player.options.video.thumbnails,events:this.player.events}),this.player.on("loadedmetadata",function(){t.thumbnails.resize(160,t.player.video.videoHeight/t.player.video.videoWidth*160)}))}},{key:"initPlayedBar",value:function(){var t=this,e=function(e){var i=((e.clientX||e.changedTouches[0].clientX)-a.default.getBoundingClientRectViewLeft(t.player.template.playedBarWrap))/t.player.template.playedBarWrap.clientWidth;i=Math.max(i,0),i=Math.min(i,1),t.player.bar.set("played",i,"width"),t.player.template.ptime.innerHTML=a.default.secondToTime(i*t.player.video.duration)},i=function i(n){document.removeEventListener(a.default.nameMap.dragEnd,i),document.removeEventListener(a.default.nameMap.dragMove,e);var r=((n.clientX||n.changedTouches[0].clientX)-a.default.getBoundingClientRectViewLeft(t.player.template.playedBarWrap))/t.player.template.playedBarWrap.clientWidth;r=Math.max(r,0),r=Math.min(r,1),t.player.bar.set("played",r,"width"),t.player.seek(t.player.bar.get("played")*t.player.video.duration),t.player.timer.enable("progress")};this.player.template.playedBarWrap.addEventListener(a.default.nameMap.dragStart,function(){t.player.timer.disable("progress"),document.addEventListener(a.default.nameMap.dragMove,e),document.addEventListener(a.default.nameMap.dragEnd,i)}),this.player.template.playedBarWrap.addEventListener(a.default.nameMap.dragMove,function(e){if(t.player.video.duration){var i=a.default.cumulativeOffset(t.player.template.playedBarWrap).left,n=(e.clientX||e.changedTouches[0].clientX)-i;if(n<0||n>t.player.template.playedBarWrap.offsetWidth)return;var r=t.player.video.duration*(n/t.player.template.playedBarWrap.offsetWidth);a.default.isMobile&&t.thumbnails&&t.thumbnails.show(),t.thumbnails&&t.thumbnails.move(n),t.player.template.playedBarTime.style.left=n-(r>=3600?25:20)+"px",t.player.template.playedBarTime.innerText=a.default.secondToTime(r),t.player.template.playedBarTime.classList.remove("hidden")}}),this.player.template.playedBarWrap.addEventListener(a.default.nameMap.dragEnd,function(){a.default.isMobile&&t.thumbnails&&t.thumbnails.hide()}),a.default.isMobile||(this.player.template.playedBarWrap.addEventListener("mouseenter",function(){t.player.video.duration&&(t.thumbnails&&t.thumbnails.show(),t.player.template.playedBarTime.classList.remove("hidden"))}),this.player.template.playedBarWrap.addEventListener("mouseleave",function(){t.player.video.duration&&(t.thumbnails&&t.thumbnails.hide(),t.player.template.playedBarTime.classList.add("hidden"))}))}},{key:"initFullButton",value:function(){var t=this;this.player.template.browserFullButton.addEventListener("click",function(){t.player.fullScreen.toggle("browser")}),this.player.template.webFullButton.addEventListener("click",function(){t.player.fullScreen.toggle("web")})}},{key:"initVolumeButton",value:function(){var t=this,e=function(e){var i=e||window.event,n=((i.clientX||i.changedTouches[0].clientX)-a.default.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(n)},i=function i(){document.removeEventListener(a.default.nameMap.dragEnd,i),document.removeEventListener(a.default.nameMap.dragMove,e),t.player.template.volumeButton.classList.remove("dplayer-volume-active")};this.player.template.volumeBarWrapWrap.addEventListener("click",function(e){var i=e||window.event,n=((i.clientX||i.changedTouches[0].clientX)-a.default.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(n)}),this.player.template.volumeBarWrapWrap.addEventListener(a.default.nameMap.dragStart,function(){document.addEventListener(a.default.nameMap.dragMove,e),document.addEventListener(a.default.nameMap.dragEnd,i),t.player.template.volumeButton.classList.add("dplayer-volume-active")}),this.player.template.volumeButtonIcon.addEventListener("click",function(){t.player.video.muted?(t.player.video.muted=!1,t.player.switchVolumeIcon(),t.player.bar.set("volume",t.player.volume(),"width")):(t.player.video.muted=!0,t.player.template.volumeIcon.innerHTML=o.default.volumeOff,t.player.bar.set("volume",0,"width"))})}},{key:"initQualityButton",value:function(){var t=this;this.player.options.video.quality&&this.player.template.qualityList.addEventListener("click",function(e){e.target.classList.contains("dplayer-quality-item")&&t.player.switchQuality(e.target.dataset.index)})}},{key:"initScreenshotButton",value:function(){var t=this;this.player.options.screenshot&&this.player.template.camareButton.addEventListener("click",function(){var e=document.createElement("canvas");e.width=t.player.video.videoWidth,e.height=t.player.video.videoHeight,e.getContext("2d").drawImage(t.player.video,0,0,e.width,e.height);var i=void 0;e.toBlob(function(t){i=URL.createObjectURL(t);var e=document.createElement("a");e.href=i,e.download="DPlayer.png",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(i)}),t.player.events.trigger("screenshot",i)})}},{key:"initSubtitleButton",value:function(){var t=this;this.player.options.subtitle&&(this.player.events.on("subtitle_show",function(){t.player.template.subtitleButton.dataset.balloon=t.player.tran("Hide subtitle"),t.player.template.subtitleButtonInner.style.opacity="",t.player.user.set("subtitle",1)}),this.player.events.on("subtitle_hide",function(){t.player.template.subtitleButton.dataset.balloon=t.player.tran("Show subtitle"),t.player.template.subtitleButtonInner.style.opacity="0.4",t.player.user.set("subtitle",0)}),this.player.template.subtitleButton.addEventListener("click",function(){t.player.subtitle.toggle()}))}},{key:"setAutoHide",value:function(){var t=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){!t.player.video.played.length||t.player.paused||t.disableAutoHide||t.hide()},3e3)}},{key:"show",value:function(){this.player.container.classList.remove("dplayer-hide-controller")}},{key:"hide",value:function(){this.player.container.classList.add("dplayer-hide-controller"),this.player.setting.hide(),this.player.comment&&this.player.comment.hide()}},{key:"isShow",value:function(){return!this.player.container.classList.contains("dplayer-hide-controller")}},{key:"toggle",value:function(){this.isShow()?this.hide():this.show()}},{key:"destroy",value:function(){clearTimeout(this.autoHideTimer)}}]),t}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.container.addEventListener("animationend",function(){i.container.classList.remove("dplayer-bezel-transition")})}return n(t,[{key:"switch",value:function(t){this.container.innerHTML=t,this.container.classList.add("dplayer-bezel-transition")}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},this.types=["loading","info","fps"],this.init()}return n(t,[{key:"init",value:function(){var t=this;this.types.map(function(e){return"fps"!==e&&t["init"+e+"Checker"](),e})}},{key:"initloadingChecker",value:function(){var t=this,e=0,i=0,n=!1;this.loadingChecker=setInterval(function(){t.enableloadingChecker&&(i=t.player.video.currentTime,n||i!==e||t.player.video.paused||(t.player.container.classList.add("dplayer-loading"),n=!0),n&&i>e&&!t.player.video.paused&&(t.player.container.classList.remove("dplayer-loading"),n=!1),e=i)},100)}},{key:"initfpsChecker",value:function(){var t=this;window.requestAnimationFrame(function(){if(t.enablefpsChecker)if(t.initfpsChecker(),t.fpsStart){t.fpsIndex++;var e=new Date;e-t.fpsStart>1e3&&(t.player.infoPanel.fps(t.fpsIndex/(e-t.fpsStart)*1e3),t.fpsStart=new Date,t.fpsIndex=0)}else t.fpsStart=new Date,t.fpsIndex=0;else t.fpsStart=0,t.fpsIndex=0})}},{key:"initinfoChecker",value:function(){var t=this;this.infoChecker=setInterval(function(){t.enableinfoChecker&&t.player.infoPanel.update()},1e3)}},{key:"enable",value:function(t){this["enable"+t+"Checker"]=!0,"fps"===t&&this.initfpsChecker()}},{key:"disable",value:function(t){this["enable"+t+"Checker"]=!1}},{key:"destroy",value:function(){var t=this;this.types.map(function(e){return t["enable"+e+"Checker"]=!1,t[e+"Checker"]&&clearInterval(t[e+"Checker"]),e})}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={},this.elements.volume=e.volumeBar,this.elements.played=e.playedBar,this.elements.loaded=e.loadedBar,this.elements.danmaku=e.danmakuOpacityBar}return n(t,[{key:"set",value:function(t,e,i){e=Math.max(e,0),e=Math.min(e,1),this.elements[t].style[i]=100*e+"%"}},{key:"get",value:function(t){return parseFloat(this.elements[t].style.width)/100}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e,i,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.video=i,this.options=n,this.events=a,this.init()}return n(t,[{key:"init",value:function(){var t=this;if(this.container.style.fontSize=this.options.fontSize,this.container.style.bottom=this.options.bottom,this.container.style.color=this.options.color,this.video.textTracks&&this.video.textTracks[0]){var e=this.video.textTracks[0];e.oncuechange=function(){var i=e.activeCues[0];if(i){t.container.innerHTML="";var n=document.createElement("p");n.appendChild(i.getCueAsHTML()),t.container.appendChild(n)}else t.container.innerHTML="";t.events.trigger("subtitle_change")}}}},{key:"show",value:function(){this.container.classList.remove("dplayer-subtitle-hide"),this.events.trigger("subtitle_show")}},{key:"hide",value:function(){this.container.classList.add("dplayer-subtitle-hide"),this.events.trigger("subtitle_hide")}},{key:"toggle",value:function(){this.container.classList.contains("dplayer-subtitle-hide")?this.show():this.hide()}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(1))&&n.__esModule?n:{default:n},o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageName={opacity:"dplayer-danmaku-opacity",volume:"dplayer-volume",unlimited:"dplayer-danmaku-unlimited",danmaku:"dplayer-danmaku-show",subtitle:"dplayer-subtitle-show"},this.default={opacity:.7,volume:e.options.hasOwnProperty("volume")?e.options.volume:.7,unlimited:(e.options.danmaku&&e.options.danmaku.unlimited?1:0)||0,danmaku:1,subtitle:1},this.data={},this.init()}return a(t,[{key:"init",value:function(){for(var t in this.storageName){var e=this.storageName[t];this.data[t]=parseFloat(r.default.storage.get(e)||this.default[t])}}},{key:"get",value:function(t){return this.data[t]}},{key:"set",value:function(t,e){this.data[t]=e,r.default.storage.set(this.storageName[t],e)}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(1))&&n.__esModule?n:{default:n},o=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.events.on("webfullscreen",function(){i.player.resize()}),this.player.events.on("webfullscreen_cancel",function(){i.player.resize(),r.default.setScrollPosition(i.lastScrollPosition)});var n=function(){i.player.resize(),i.isFullScreen("browser")?i.player.events.trigger("fullscreen"):(r.default.setScrollPosition(i.lastScrollPosition),i.player.events.trigger("fullscreen_cancel"))},a=function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;t&&t!==i.player.container||(i.player.resize(),t?i.player.events.trigger("fullscreen"):(r.default.setScrollPosition(i.lastScrollPosition),i.player.events.trigger("fullscreen_cancel")))};/Firefox/.test(navigator.userAgent)?(document.addEventListener("mozfullscreenchange",a),document.addEventListener("fullscreenchange",a)):(this.player.container.addEventListener("fullscreenchange",n),this.player.container.addEventListener("webkitfullscreenchange",n),document.addEventListener("msfullscreenchange",a),document.addEventListener("MSFullscreenChange",a))}return a(t,[{key:"isFullScreen",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser"){case"browser":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;case"web":return this.player.container.classList.contains("dplayer-fulled")}}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser",e="browser"===t?"web":"browser",i=this.isFullScreen(e);switch(i||(this.lastScrollPosition=r.default.getScrollPosition()),t){case"browser":this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen?this.player.video.webkitEnterFullScreen():this.player.container.msRequestFullscreen&&this.player.container.msRequestFullscreen();break;case"web":this.player.container.classList.add("dplayer-fulled"),document.body.classList.add("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen")}i&&this.cancel(e)}},{key:"cancel",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser"){case"browser":document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();break;case"web":this.player.container.classList.remove("dplayer-fulled"),document.body.classList.remove("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen_cancel")}}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";this.isFullScreen(t)?this.cancel(t):this.request(t)}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["screenshot","thumbnails_show","thumbnails_hide","danmaku_show","danmaku_hide","danmaku_clear","danmaku_loaded","danmaku_send","danmaku_opacity","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","subtitle_show","subtitle_hide","subtitle_change"]}return n(t,[{key:"on",value:function(t,e){this.type(t)&&"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}},{key:"trigger",value:function(t,e){if(this.events[t]&&this.events[t].length)for(var i=0;i<this.events[t].length;i++)this.events[t][i](e)}},{key:"type",value:function(t){return-1!==this.playerEvents.indexOf(t)?"player":-1!==this.videoEvents.indexOf(t)?"video":(console.error("Unknown event name: "+t),null)}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=(n=i(1))&&n.__esModule?n:{default:n},s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.container=this.options.container,this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.dan=[],this.showing=!0,this._opacity=this.options.opacity,this.events=this.options.events,this.unlimited=this.options.unlimited,this._measure(""),this.load()}return r(t,[{key:"load",value:function(){var t,e=this;t=this.options.api.maximum?this.options.api.address+"v3/?id="+this.options.api.id+"&max="+this.options.api.maximum:this.options.api.address+"v3/?id="+this.options.api.id;var i=(this.options.api.addition||[]).slice(0);i.push(t),this.events&&this.events.trigger("danmaku_load_start",i),this._readAllEndpoints(i,function(t){e.dan=[].concat.apply([],t).sort(function(t,e){return t.time-e.time}),window.requestAnimationFrame(function(){e.frame()}),e.options.callback(),e.events&&e.events.trigger("danmaku_load_end")})}},{key:"reload",value:function(t){this.options.api=t,this.dan=[],this.clear(),this.load()}},{key:"_readAllEndpoints",value:function(t,e){for(var i=this,n=[],a=0,r=function(r){i.options.apiBackend.read({url:t[r],success:function(i){n[r]=i,++a===t.length&&e(n)},error:function(o){i.options.error(o||i.options.tran("Danmaku load failed")),n[r]=[],++a===t.length&&e(n)}})},o=0;o<t.length;++o)r(o)}},{key:"send",value:function(t,e){var i=this,n={token:this.options.api.token,id:this.options.api.id,author:this.options.api.user,time:this.options.time(),text:t.text,color:t.color,type:t.type};this.options.apiBackend.send({url:this.options.api.address+"v3/",data:n,success:e,error:function(t){i.options.error(t||i.options.tran("Danmaku send failed"))}}),this.dan.splice(this.danIndex,0,n),this.danIndex++;var a={text:this.htmlEncode(n.text),color:n.color,type:n.type,border:"2px solid "+this.options.borderColor};this.draw(a),this.events&&this.events.trigger("danmaku_send",n)}},{key:"frame",value:function(){var t=this;if(this.dan.length&&!this.paused&&this.showing){for(var e=this.dan[this.danIndex],i=[];e&&this.options.time()>parseFloat(e.time);)i.push(e),e=this.dan[++this.danIndex];this.draw(i)}window.requestAnimationFrame(function(){t.frame()})}},{key:"opacity",value:function(t){if(void 0!==t){for(var e=this.container.getElementsByClassName("dplayer-danmaku-item"),i=0;i<e.length;i++)e[i].style.opacity=t;this._opacity=t,this.events&&this.events.trigger("danmaku_opacity",this._opacity)}return this._opacity}},{key:"draw",value:function(t){var e=this;if(this.showing){var i=this.options.height,n=this.container.offsetWidth,r=this.container.offsetHeight,s=parseInt(r/i),l=function(t){var i=t.offsetWidth||parseInt(t.style.width),n=t.getBoundingClientRect().right||e.container.getBoundingClientRect().right+i;return e.container.getBoundingClientRect().right-n},c=function(t){return(n+t)/5},u=function(t,i,r){for(var o=n/c(r),u=function(a){var r=e.danTunnel[i][a+""];if(!r||!r.length)return e.danTunnel[i][a+""]=[t],t.addEventListener("animationend",function(){e.danTunnel[i][a+""].splice(0,1)}),{v:a%s};if("right"!==i)return"continue";for(var u=0;u<r.length;u++){var d=l(r[u])-10;if(d<=n-o*c(parseInt(r[u].style.width))||d<=0)break;if(u===r.length-1)return e.danTunnel[i][a+""].push(t),t.addEventListener("animationend",function(){e.danTunnel[i][a+""].splice(0,1)}),{v:a%s}}},d=0;e.unlimited||d<s;d++){var h=u(d);switch(h){case"continue":continue;default:if("object"===(void 0===h?"undefined":a(h)))return h.v}}return-1};"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var d=document.createDocumentFragment(),h=function(a){t[a].type=o.default.number2Type(t[a].type),t[a].color||(t[a].color=16777215);var r=document.createElement("div");r.classList.add("dplayer-danmaku-item"),r.classList.add("dplayer-danmaku-"+t[a].type),t[a].border?r.innerHTML='<span style="border:'+t[a].border+'">'+t[a].text+"</span>":r.innerHTML=t[a].text,r.style.opacity=e._opacity,r.style.color=o.default.number2Color(t[a].color),r.addEventListener("animationend",function(){e.container.removeChild(r)});var s=e._measure(t[a].text),l=void 0;switch(t[a].type){case"right":(l=u(r,t[a].type,s))>=0&&(r.style.width=s+1+"px",r.style.top=i*l+"px",r.style.transform="translateX(-"+n+"px)");break;case"top":(l=u(r,t[a].type))>=0&&(r.style.top=i*l+"px");break;case"bottom":(l=u(r,t[a].type))>=0&&(r.style.bottom=i*l+"px");break;default:console.error("Can't handled danmaku type: "+t[a].type)}l>=0&&(r.classList.add("dplayer-danmaku-move"),d.appendChild(r))},p=0;p<t.length;p++)h(p);return this.container.appendChild(d),d}}},{key:"play",value:function(){this.paused=!1}},{key:"pause",value:function(){this.paused=!0}},{key:"_measure",value:function(t){if(!this.context){var e=getComputedStyle(this.container.getElementsByClassName("dplayer-danmaku-item")[0],null);this.context=document.createElement("canvas").getContext("2d"),this.context.font=e.getPropertyValue("font")}return this.context.measureText(t).width}},{key:"seek",value:function(){this.clear();for(var t=0;t<this.dan.length;t++){if(this.dan[t].time>=this.options.time()){this.danIndex=t;break}this.danIndex=this.dan.length}}},{key:"clear",value:function(){this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.options.container.innerHTML="",this.events&&this.events.trigger("danmaku_clear")}},{key:"htmlEncode",value:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2f;")}},{key:"resize",value:function(){for(var t=this.container.offsetWidth,e=this.container.getElementsByClassName("dplayer-danmaku-item"),i=0;i<e.length;i++)e[i].style.transform="translateX(-"+t+"px)"}},{key:"hide",value:function(){this.showing=!1,this.pause(),this.clear(),this.events&&this.events.trigger("danmaku_hide")}},{key:"show",value:function(){this.seek(),this.showing=!0,this.play(),this.events&&this.events.trigger("danmaku_show")}},{key:"unlimit",value:function(t){this.unlimited=t}}]),t}();e.default=s},function(t,e,i){"use strict";(function(e){t.exports=!1;try{t.exports="[object process]"===Object.prototype.toString.call(e.process)}catch(t){}}).call(this,i(4))},function(t,e,i){"use strict";(function(e){var n=i(28),a=Object.create(n?e:window),r=/["&'<>]/;a.$escape=function(t){return function(t){var e=""+t,i=r.exec(e);if(!i)return t;var n="",a=void 0,o=void 0,s=void 0;for(a=i.index,o=0;a<e.length;a++){switch(e.charCodeAt(a)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}o!==a&&(n+=e.substring(o,a)),o=a+1,n+=s}return o!==a?n+e.substring(o,a):n}(function t(e){return"string"!=typeof e&&(e=void 0===e||null===e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e)),e}(t))},a.$each=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++)e(t[i],i);else for(var a in t)e(t[a],a)},t.exports=a}).call(this,i(4))},function(t,e,i){var n=i(6);t.exports=function(t){"use strict";t=t||{};var e,a="",r=(arguments[1],t.video),o=t.options,s=n.$escape,l=t.tran,c=t.icons,u=t.index,d=n.$each;return t.$value,t.$index,a+='<div class="dplayer-mask"></div>\n<div class="dplayer-video-wrap">\n    ',e=i(5)(r),a+=e,a+="\n    ",o.logo&&(a+='\n    <div class="dplayer-logo">\n        <img src="',a+=s(o.logo),a+='">\n    </div>\n    '),a+='\n    <div class="dplayer-danmaku"',o.danmaku&&o.danmaku.bottm&&(a+=' style="margin-bottom:',a+=s(o.danmaku.bottm),a+='"'),a+='>\n        <div class="dplayer-danmaku-item dplayer-danmaku-item--demo"></div>\n    </div>\n    <div class="dplayer-subtitle"></div>\n    <div class="dplayer-bezel">\n        <span class="dplayer-bezel-icon"></span>\n        ',o.danmaku&&(a+='\n        <span class="dplayer-danloading">',a+=s(l("Danmaku is loading")),a+="</span>\n        "),a+='\n        <span class="diplayer-loading-icon">',a+=c.loading,a+='</span>\n    </div>\n</div>\n<div class="dplayer-controller-mask"></div>\n<div class="dplayer-controller">\n    <div class="dplayer-icons dplayer-comment-box">\n        <button class="dplayer-icon dplayer-comment-setting-icon" data-balloon="',a+=s(l("Setting")),a+='" data-balloon-pos="up">\n            <span class="dplayer-icon-content">',a+=c.pallette,a+='</span>\n        </button>\n        <div class="dplayer-comment-setting-box">\n            <div class="dplayer-comment-setting-color">\n                <div class="dplayer-comment-setting-title">',a+=s(l("Set danmaku color")),a+='</div>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',a+=s(u),a+='" value="#fff" checked>\n                    <span style="background: #fff;"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',a+=s(u),a+='" value="#e54256">\n                    <span style="background: #e54256"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',a+=s(u),a+='" value="#ffe133">\n                    <span style="background: #ffe133"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',a+=s(u),a+='" value="#64DD17">\n                    <span style="background: #64DD17"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',a+=s(u),a+='" value="#39ccff">\n                    <span style="background: #39ccff"></span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-color-',a+=s(u),a+='" value="#D500F9">\n                    <span style="background: #D500F9"></span>\n                </label>\n            </div>\n            <div class="dplayer-comment-setting-type">\n                <div class="dplayer-comment-setting-title">',a+=s(l("Set danmaku type")),a+='</div>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-type-',a+=s(u),a+='" value="1">\n                    <span>',a+=s(l("Top")),a+='</span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-type-',a+=s(u),a+='" value="0" checked>\n                    <span>',a+=s(l("Rolling")),a+='</span>\n                </label>\n                <label>\n                    <input type="radio" name="dplayer-danmaku-type-',a+=s(u),a+='" value="2">\n                    <span>',a+=s(l("Bottom")),a+='</span>\n                </label>\n            </div>\n        </div>\n        <input class="dplayer-comment-input" type="text" placeholder="',a+=s(l("Input danmaku, hit Enter")),a+='" maxlength="30">\n        <button class="dplayer-icon dplayer-send-icon" data-balloon="',a+=s(l("Send")),a+='" data-balloon-pos="up">\n            <span class="dplayer-icon-content">',a+=c.send,a+='</span>\n        </button>\n    </div>\n    <div class="dplayer-icons dplayer-icons-left">\n        <button class="dplayer-icon dplayer-play-icon">\n            <span class="dplayer-icon-content">',a+=c.play,a+='</span>\n        </button>\n        <div class="dplayer-volume">\n            <button class="dplayer-icon dplayer-volume-icon">\n                <span class="dplayer-icon-content">',a+=c.volumeDown,a+='</span>\n            </button>\n            <div class="dplayer-volume-bar-wrap" data-balloon-pos="up">\n                <div class="dplayer-volume-bar">\n                    <div class="dplayer-volume-bar-inner" style="background: ',a+=s(o.theme),a+=';">\n                        <span class="dplayer-thumb" style="background: ',a+=s(o.theme),a+='"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <span class="dplayer-time">\n            <span class="dplayer-ptime">0:00</span> /\n            <span class="dplayer-dtime">0:00</span>\n        </span>\n        ',o.live&&(a+='\n        <span class="dplayer-live-badge"><span class="dplayer-live-dot" style="background: ',a+=s(o.theme),a+=';"></span>',a+=s(l("Live")),a+="</span>\n        "),a+='\n    </div>\n    <div class="dplayer-icons dplayer-icons-right">\n        ',o.video.quality&&(a+='\n        <div class="dplayer-quality">\n            <button class="dplayer-icon dplayer-quality-icon">',a+=s(o.video.quality[o.video.defaultQuality].name),a+='</button>\n            <div class="dplayer-quality-mask">\n                <div class="dplayer-quality-list">\n                ',d(o.video.quality,function(t,e){a+='\n                    <div class="dplayer-quality-item" data-index="',a+=s(e),a+='">',a+=s(t.name),a+="</div>\n                "}),a+="\n                </div>\n            </div>\n        </div>\n        "),a+="\n        ",o.screenshot&&(a+='\n        <div class="dplayer-icon dplayer-camera-icon" data-balloon="',a+=s(l("Screenshot")),a+='" data-balloon-pos="up">\n            <span class="dplayer-icon-content">',a+=c.camera,a+="</span>\n        </div>\n        "),a+='\n        <div class="dplayer-comment">\n            <button class="dplayer-icon dplayer-comment-icon" data-balloon="',a+=s(l("Send danmaku")),a+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',a+=c.comment,a+="</span>\n            </button>\n        </div>\n        ",o.subtitle&&(a+='\n        <div class="dplayer-subtitle-btn">\n            <button class="dplayer-icon dplayer-subtitle-icon" data-balloon="',a+=s(l("Hide subtitle")),a+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',a+=c.subtitle,a+="</span>\n            </button>\n        </div>\n        "),a+='\n        <div class="dplayer-setting">\n            <button class="dplayer-icon dplayer-setting-icon" data-balloon="',a+=s(l("Setting")),a+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',a+=c.setting,a+='</span>\n            </button>\n            <div class="dplayer-setting-box">\n                <div class="dplayer-setting-origin-panel">\n                    <div class="dplayer-setting-item dplayer-setting-speed">\n                        <span class="dplayer-label">',a+=s(l("Speed")),a+='</span>\n                        <div class="dplayer-toggle">',a+=c.right,a+='</div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-loop">\n                        <span class="dplayer-label">',a+=s(l("Loop")),a+='</span>\n                        <div class="dplayer-toggle">\n                            <input class="dplayer-toggle-setting-input" type="checkbox" name="dplayer-toggle">\n                            <label for="dplayer-toggle"></label>\n                        </div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-showdan">\n                        <span class="dplayer-label">',a+=s(l("Show danmaku")),a+='</span>\n                        <div class="dplayer-toggle">\n                            <input class="dplayer-showdan-setting-input" type="checkbox" name="dplayer-toggle-dan">\n                            <label for="dplayer-toggle-dan"></label>\n                        </div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-danunlimit">\n                        <span class="dplayer-label">',a+=s(l("Unlimited danmaku")),a+='</span>\n                        <div class="dplayer-toggle">\n                            <input class="dplayer-danunlimit-setting-input" type="checkbox" name="dplayer-toggle-danunlimit">\n                            <label for="dplayer-toggle-danunlimit"></label>\n                        </div>\n                    </div>\n                    <div class="dplayer-setting-item dplayer-setting-danmaku">\n                        <span class="dplayer-label">',a+=s(l("Opacity for danmaku")),a+='</span>\n                        <div class="dplayer-danmaku-bar-wrap">\n                            <div class="dplayer-danmaku-bar">\n                                <div class="dplayer-danmaku-bar-inner">\n                                    <span class="dplayer-thumb"></span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="dplayer-setting-speed-panel">\n                    <div class="dplayer-setting-speed-item" data-speed="0.5">\n                        <span class="dplayer-label">0.5</span>\n                    </div>\n                    <div class="dplayer-setting-speed-item" data-speed="0.75">\n                        <span class="dplayer-label">0.75</span>\n                    </div>\n                    <div class="dplayer-setting-speed-item" data-speed="1">\n                        <span class="dplayer-label">',a+=s(l("Normal")),a+='</span>\n                    </div>\n                    <div class="dplayer-setting-speed-item" data-speed="1.25">\n                        <span class="dplayer-label">1.25</span>\n                    </div>\n                    <div class="dplayer-setting-speed-item" data-speed="1.5">\n                        <span class="dplayer-label">1.5</span>\n                    </div>\n                    <div class="dplayer-setting-speed-item" data-speed="2">\n                        <span class="dplayer-label">2</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="dplayer-full">\n            <button class="dplayer-icon dplayer-full-in-icon" data-balloon="',a+=s(l("Web full screen")),a+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',a+=c.fullWeb,a+='</span>\n            </button>\n            <button class="dplayer-icon dplayer-full-icon" data-balloon="',a+=s(l("Full screen")),a+='" data-balloon-pos="up">\n                <span class="dplayer-icon-content">',a+=c.full,a+='</span>\n            </button>\n        </div>\n    </div>\n    <div class="dplayer-bar-wrap">\n        <div class="dplayer-bar-time hidden">00:00</div>\n        <div class="dplayer-bar-preview"></div>\n        <div class="dplayer-bar">\n            <div class="dplayer-loaded" style="width: 0;"></div>\n            <div class="dplayer-played" style="width: 0; background: ',a+=s(o.theme),a+='">\n                <span class="dplayer-thumb" style="background: ',a+=s(o.theme),a+='"></span>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="dplayer-info-panel dplayer-info-panel-hide">\n    <div class="dplayer-info-panel-close">[x]</div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-version">\n        <span class="dplayer-info-panel-item-title">Player version</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-fps">\n        <span class="dplayer-info-panel-item-title">Player FPS</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-type">\n        <span class="dplayer-info-panel-item-title">Video type</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-url">\n        <span class="dplayer-info-panel-item-title">Video url</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-resolution">\n        <span class="dplayer-info-panel-item-title">Video resolution</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-duration">\n        <span class="dplayer-info-panel-item-title">Video duration</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    ',o.danmaku&&(a+='\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-id">\n        <span class="dplayer-info-panel-item-title">Danamku id</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-api">\n        <span class="dplayer-info-panel-item-title">Danamku api</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    <div class="dplayer-info-panel-item dplayer-info-panel-item-danmaku-amount">\n        <span class="dplayer-info-panel-item-title">Danamku amount</span>\n        <span class="dplayer-info-panel-item-data"></span>\n    </div>\n    '),a+='\n</div>\n<div class="dplayer-menu">\n    ',d(o.contextmenu,function(t,e){a+='\n        <div class="dplayer-menu-item">\n            <a',t.link&&(a+=' target="_blank"'),a+=' href="',a+=s(t.link||"javascript:void(0);"),a+='">',a+=s(l(t.text)),a+="</a>\n        </div>\n    "}),a+='\n</div>\n<div class="dplayer-notice"></div>'}},function(t,e){t.exports='<svg version="1.1" viewBox="0 0 22 22"><svg x="7" y="1"><circle class="diplayer-loading-dot diplayer-loading-dot-0" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-1" cx="4" cy="4" r="2"></circle></svg><svg x="13" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-2" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-3" cx="4" cy="4" r="2"></circle></svg><svg x="7" y="13"><circle class="diplayer-loading-dot diplayer-loading-dot-4" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-5" cx="4" cy="4" r="2"></circle></svg><svg x="1" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-6" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-7" cx="4" cy="4" r="2"></circle></svg></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 28"><path d="M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 32"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=o(i(2)),r=o(i(30));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.options=e.options,this.index=e.index,this.tran=e.tran,this.init()}return n(t,[{key:"init",value:function(){this.container.innerHTML=(0,r.default)({options:this.options,index:this.index,tran:this.tran,icons:a.default,video:{current:!0,pic:this.options.video.pic,screenshot:this.options.screenshot,preload:this.options.preload,url:this.options.video.url,subtitle:this.options.subtitle}}),this.volumeBar=this.container.querySelector(".dplayer-volume-bar-inner"),this.volumeBarWrap=this.container.querySelector(".dplayer-volume-bar"),this.volumeBarWrapWrap=this.container.querySelector(".dplayer-volume-bar-wrap"),this.volumeButton=this.container.querySelector(".dplayer-volume"),this.volumeButtonIcon=this.container.querySelector(".dplayer-volume-icon"),this.volumeIcon=this.container.querySelector(".dplayer-volume-icon .dplayer-icon-content"),this.playedBar=this.container.querySelector(".dplayer-played"),this.loadedBar=this.container.querySelector(".dplayer-loaded"),this.playedBarWrap=this.container.querySelector(".dplayer-bar-wrap"),this.playedBarTime=this.container.querySelector(".dplayer-bar-time"),this.danmaku=this.container.querySelector(".dplayer-danmaku"),this.danmakuLoading=this.container.querySelector(".dplayer-danloading"),this.video=this.container.querySelector(".dplayer-video-current"),this.bezel=this.container.querySelector(".dplayer-bezel-icon"),this.playButton=this.container.querySelector(".dplayer-play-icon"),this.videoWrap=this.container.querySelector(".dplayer-video-wrap"),this.controllerMask=this.container.querySelector(".dplayer-controller-mask"),this.ptime=this.container.querySelector(".dplayer-ptime"),this.settingButton=this.container.querySelector(".dplayer-setting-icon"),this.settingBox=this.container.querySelector(".dplayer-setting-box"),this.mask=this.container.querySelector(".dplayer-mask"),this.loop=this.container.querySelector(".dplayer-setting-loop"),this.loopToggle=this.container.querySelector(".dplayer-setting-loop .dplayer-toggle-setting-input"),this.showDanmaku=this.container.querySelector(".dplayer-setting-showdan"),this.showDanmakuToggle=this.container.querySelector(".dplayer-showdan-setting-input"),this.unlimitDanmaku=this.container.querySelector(".dplayer-setting-danunlimit"),this.unlimitDanmakuToggle=this.container.querySelector(".dplayer-danunlimit-setting-input"),this.speed=this.container.querySelector(".dplayer-setting-speed"),this.speedItem=this.container.querySelectorAll(".dplayer-setting-speed-item"),this.danmakuOpacityBar=this.container.querySelector(".dplayer-danmaku-bar-inner"),this.danmakuOpacityBarWrap=this.container.querySelector(".dplayer-danmaku-bar"),this.danmakuOpacityBarWrapWrap=this.container.querySelector(".dplayer-danmaku-bar-wrap"),this.danmakuOpacityBox=this.container.querySelector(".dplayer-setting-danmaku"),this.dtime=this.container.querySelector(".dplayer-dtime"),this.controller=this.container.querySelector(".dplayer-controller"),this.commentInput=this.container.querySelector(".dplayer-comment-input"),this.commentButton=this.container.querySelector(".dplayer-comment-icon"),this.commentSettingBox=this.container.querySelector(".dplayer-comment-setting-box"),this.commentSettingButton=this.container.querySelector(".dplayer-comment-setting-icon"),this.commentSettingFill=this.container.querySelector(".dplayer-comment-setting-icon path"),this.commentSendButton=this.container.querySelector(".dplayer-send-icon"),this.commentSendFill=this.container.querySelector(".dplayer-send-icon path"),this.commentColorSettingBox=this.container.querySelector(".dplayer-comment-setting-color"),this.browserFullButton=this.container.querySelector(".dplayer-full-icon"),this.webFullButton=this.container.querySelector(".dplayer-full-in-icon"),this.menu=this.container.querySelector(".dplayer-menu"),this.menuItem=this.container.querySelectorAll(".dplayer-menu-item"),this.qualityList=this.container.querySelector(".dplayer-quality-list"),this.camareButton=this.container.querySelector(".dplayer-camera-icon"),this.subtitleButton=this.container.querySelector(".dplayer-subtitle-icon"),this.subtitleButtonInner=this.container.querySelector(".dplayer-subtitle-icon .dplayer-icon-content"),this.subtitle=this.container.querySelector(".dplayer-subtitle"),this.qualityButton=this.container.querySelector(".dplayer-quality-icon"),this.barPreview=this.container.querySelector(".dplayer-bar-preview"),this.barWrap=this.container.querySelector(".dplayer-bar-wrap"),this.notice=this.container.querySelector(".dplayer-notice"),this.infoPanel=this.container.querySelector(".dplayer-info-panel"),this.infoPanelClose=this.container.querySelector(".dplayer-info-panel-close"),this.infoVersion=this.container.querySelector(".dplayer-info-panel-item-version .dplayer-info-panel-item-data"),this.infoFPS=this.container.querySelector(".dplayer-info-panel-item-fps .dplayer-info-panel-item-data"),this.infoType=this.container.querySelector(".dplayer-info-panel-item-type .dplayer-info-panel-item-data"),this.infoUrl=this.container.querySelector(".dplayer-info-panel-item-url .dplayer-info-panel-item-data"),this.infoResolution=this.container.querySelector(".dplayer-info-panel-item-resolution .dplayer-info-panel-item-data"),this.infoDuration=this.container.querySelector(".dplayer-info-panel-item-duration .dplayer-info-panel-item-data"),this.infoDanmakuId=this.container.querySelector(".dplayer-info-panel-item-danmaku-id .dplayer-info-panel-item-data"),this.infoDanmakuApi=this.container.querySelector(".dplayer-info-panel-item-danmaku-api .dplayer-info-panel-item-data"),this.infoDanmakuAmount=this.container.querySelector(".dplayer-info-panel-item-danmaku-amount .dplayer-info-panel-item-data")}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={"zh-cn":{"Danmaku is loading":"弹幕加载中",Top:"顶部",Bottom:"底部",Rolling:"滚动","Input danmaku, hit Enter":"输入弹幕，回车发送","About author":"关于作者","DPlayer feedback":"播放器意见反馈","About DPlayer":"关于 DPlayer 播放器",Loop:"洗脑循环",Speed:"速度","Opacity for danmaku":"弹幕透明度",Normal:"正常","Please input danmaku content!":"要输入弹幕内容啊喂！","Set danmaku color":"设置弹幕颜色","Set danmaku type":"设置弹幕类型","Show danmaku":"显示弹幕","Video load failed":"视频加载失败","Danmaku load failed":"弹幕加载失败","Danmaku send failed":"弹幕发送失败","Switching to":"正在切换至","Switched to":"已经切换至",quality:"画质",FF:"快进",REW:"快退","Unlimited danmaku":"海量弹幕","Send danmaku":"发送弹幕",Setting:"设置","Full screen":"全屏","Web full screen":"页面全屏",Send:"发送",Screenshot:"截图",s:"秒","Show subtitle":"显示字幕","Hide subtitle":"隐藏字幕",Volume:"音量",Live:"直播","Video info":"视频统计信息"},"zh-tw":{"Danmaku is loading":"彈幕載入中",Top:"頂部",Bottom:"底部",Rolling:"滾動","Input danmaku, hit Enter":"輸入彈幕，Enter 發送","About author":"關於作者","DPlayer feedback":"播放器意見回饋","About DPlayer":"關於 DPlayer 播放器",Loop:"循環播放",Speed:"速度","Opacity for danmaku":"彈幕透明度",Normal:"正常","Please input danmaku content!":"請輸入彈幕內容啊！","Set danmaku color":"設定彈幕顏色","Set danmaku type":"設定彈幕類型","Show danmaku":"顯示彈幕","Video load failed":"影片載入失敗","Danmaku load failed":"彈幕載入失敗","Danmaku send failed":"彈幕發送失敗","Switching to":"正在切換至","Switched to":"已經切換至",quality:"畫質",FF:"快進",REW:"快退","Unlimited danmaku":"巨量彈幕","Send danmaku":"發送彈幕",Setting:"設定","Full screen":"全螢幕","Web full screen":"頁面全螢幕",Send:"發送",Screenshot:"截圖",s:"秒","Show subtitle":"顯示字幕","Hide subtitle":"隱藏字幕",Volume:"音量",Live:"直播","Video info":"影片統計訊息"}};e.default=function(t){var e=this;this.lang=t,this.tran=function(t){return n[e.lang]&&n[e.lang][t]?n[e.lang][t]:t}}},function(t,e,i){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,i){"use strict";var n=i(7);function a(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var i=this;t(function(t){i.reason||(i.reason=new n(t),e(i.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var t;return{token:new a(function(e){t=e}),cancel:t}},t.exports=a},function(t,e,i){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,i){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,i){"use strict";var n=i(0);t.exports=function(t,e,i){return n.forEach(i,function(i){t=i(t,e)}),t}},function(t,e,i){"use strict";var n=i(0),a=i(53),r=i(8),o=i(3),s=i(52),l=i(51);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=l(t.baseURL,t.url)),t.headers=t.headers||{},t.data=a(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||o.adapter)(t).then(function(e){return c(t),e.data=a(e.data,e.headers,t.transformResponse),e},function(e){return r(e)||(c(t),e&&e.response&&(e.response.data=a(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,i){"use strict";var n=i(0);function a(){this.handlers=[]}a.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},a.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},a.prototype.forEach=function(t){n.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=a},function(t,e,i){"use strict";var n=i(0);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,i,a,r,o){var s=[];s.push(t+"="+encodeURIComponent(e)),n.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),n.isString(a)&&s.push("path="+a),n.isString(r)&&s.push("domain="+r),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,i){"use strict";function n(){this.message="String contains an invalid character"}n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,i,a=String(t),r="",o=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.charAt(0|o)||(s="=",o%1);r+=s.charAt(63&e>>8-o%1*8)){if((i=a.charCodeAt(o+=.75))>255)throw new n;e=e<<8|i}return r}},function(t,e,i){"use strict";var n=i(0);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function a(t){var n=t;return e&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=a(window.location.href),function(e){var i=n.isString(e)?a(e):e;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}},function(t,e,i){"use strict";var n=i(0),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,r,o={};return t?(n.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),e=n.trim(t.substr(0,r)).toLowerCase(),i=n.trim(t.substr(r+1)),e){if(o[e]&&a.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([i]):o[e]?o[e]+", "+i:i}}),o):o}},function(t,e,i){"use strict";var n=i(0);function a(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,i){if(!e)return t;var r;if(i)r=i(e);else if(n.isURLSearchParams(e))r=e.toString();else{var o=[];n.forEach(e,function(t,e){null!==t&&void 0!==t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),o.push(a(e)+"="+a(t))}))}),r=o.join("&")}return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},function(t,e,i){"use strict";t.exports=function(t,e,i,n,a){return t.config=e,i&&(t.code=i),t.request=n,t.response=a,t}},function(t,e,i){"use strict";var n=i(9);t.exports=function(t,e,i){var a=i.config.validateStatus;i.status&&a&&!a(i.status)?e(n("Request failed with status code "+i.status,i.config,null,i.request,i)):t(i)}},function(t,e,i){"use strict";var n=i(0);t.exports=function(t,e){n.forEach(t,function(i,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[n])})}},function(t,e,i){"use strict";var n=i(3),a=i(0),r=i(55),o=i(54);function s(t){this.defaults=t,this.interceptors={request:new r,response:new r}}s.prototype.request=function(t){"string"==typeof t&&(t=a.merge({url:arguments[0]},arguments[1])),(t=a.merge(n,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[o,void 0],i=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)i=i.then(e.shift(),e.shift());return i},a.forEach(["delete","get","head","options"],function(t){s.prototype[t]=function(e,i){return this.request(a.merge(i||{},{method:t,url:e}))}}),a.forEach(["post","put","patch"],function(t){s.prototype[t]=function(e,i,n){return this.request(a.merge(n||{},{method:t,url:e,data:i}))}}),t.exports=s},function(t,e,i){"use strict";function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,i){"use strict";var n=i(0),a=i(11),r=i(64),o=i(3);function s(t){var e=new r(t),i=a(r.prototype.request,e);return n.extend(i,r.prototype,e),n.extend(i,e),i}var l=s(o);l.Axios=r,l.create=function(t){return s(n.merge(o,t))},l.Cancel=i(7),l.CancelToken=i(50),l.isCancel=i(8),l.all=function(t){return Promise.all(t)},l.spread=i(49),t.exports=l,t.exports.default=l},function(t,e,i){"use strict";t.exports=i(66)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(67))&&n.__esModule?n:{default:n};e.default={send:function(t){a.default.post(t.url,t.data).then(function(e){var i=e.data;i&&0===i.code?t.success&&t.success(i):t.error&&t.error(i&&i.msg)}).catch(function(e){console.error(e),t.error&&t.error()})},read:function(t){a.default.get(t.url).then(function(e){var i=e.data;i&&0===i.code?t.success&&t.success(i.data.map(function(t){return{time:t[0],type:t[1],color:t[2],author:t[3],text:t[4]}})):t.error&&t.error(i&&i.msg)}).catch(function(e){console.error(e),t.error&&t.error()})}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=(n=i(68))&&n.__esModule?n:{default:n};e.default=function(t){var e={container:t.element||document.getElementsByClassName("dplayer")[0],live:!1,autoplay:!1,theme:"#b7daff",loop:!1,lang:(navigator.language||navigator.browserLanguage).toLowerCase(),screenshot:!1,hotkey:!0,preload:"metadata",volume:.7,apiBackend:r.default,video:{},contextmenu:[],mutex:!0};for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=e[i]);return t.video&&!t.video.type&&(t.video.type="auto"),"object"===a(t.danmaku)&&t.danmaku&&!t.danmaku.user&&(t.danmaku.user="DIYgod"),t.subtitle&&(!t.subtitle.type&&(t.subtitle.type="webvtt"),!t.subtitle.fontSize&&(t.subtitle.fontSize="20px"),!t.subtitle.bottom&&(t.subtitle.bottom="40px"),!t.subtitle.color&&(t.subtitle.color="#fff")),t.video.quality&&(t.video.url=t.video.quality[t.video.defaultQuality].url),t.lang&&(t.lang=t.lang.toLowerCase()),t.contextmenu=t.contextmenu.concat([{text:"Video info",click:function(t){t.infoPanel.triggle()}},{text:"About author",link:"https://diygod.me"},{text:"DPlayer v1.25.0",link:"https://github.com/MoePlayer/DPlayer"}]),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){return e.reject(i)})})}},function(t,e,i){"use strict";(function(t,e){!function(t,i){if(!t.setImmediate){var n,a,r,o,s,l=1,c={},u=!1,d=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){f(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?(o="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&f(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(o+e,"*")}):t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){f(t.data)},n=function(t){r.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,n=function(t){var e=d.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,a.removeChild(e),e=null},a.appendChild(e)}):n=function(t){setTimeout(f,0,t)},h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var a={callback:t,args:e};return c[l]=a,n(l),l++},h.clearImmediate=p}function p(t){delete c[t]}function f(t){if(u)setTimeout(f,0,t);else{var e=c[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{p(t),u=!1}}}}}("undefined"==typeof self?void 0===t?void 0:t:self)}).call(this,i(4),i(12))},function(t,e,i){"use strict";var n=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(n.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new a(n.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(71),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=(n=i(70))&&n.__esModule?n:{default:n},o=setTimeout;function s(){}function l(t){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function c(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,l._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(t){return void d(e.promise,t)}u(e.promise,n)}else(1===t._state?u:d)(e.promise,t._value)})):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":a(e))||"function"==typeof e)){var i=e.then;if(e instanceof l)return t._state=3,t._value=e,void h(t);if("function"==typeof i)return void p((n=i,r=e,function(){n.apply(r,arguments)}),t)}t._state=1,t._value=e,h(t)}catch(e){d(t,e)}var n,r}function d(t,e){t._state=2,t._value=e,h(t)}function h(t){2===t._state&&0===t._deferreds.length&&l._immediateFn(function(){t._handled||l._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)c(t,t._deferreds[e]);t._deferreds=null}function p(t,e){var i=!1;try{t(function(t){i||(i=!0,u(e,t))},function(t){i||(i=!0,d(e,t))})}catch(t){if(i)return;i=!0,d(e,t)}}l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){var i=new this.constructor(s);return c(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(t,e,i)),i},l.prototype.finally=r.default,l.all=function(t){return new l(function(e,i){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var r=n.length;function o(t,s){try{if(s&&("object"===(void 0===s?"undefined":a(s))||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(e){o(t,e)},i)}n[t]=s,0==--r&&e(n)}catch(t){i(t)}}for(var s=0;s<n.length;s++)o(s,n[s])})},l.resolve=function(t){return t&&"object"===(void 0===t?"undefined":a(t))&&t.constructor===l?t:new l(function(e){e(t)})},l.reject=function(t){return new l(function(e,i){i(t)})},l.race=function(t){return new l(function(e,i){for(var n=0,a=t.length;n<a;n++)t[n].then(e,i)})},l._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){o(t,0)},l._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.default=l}).call(this,i(72).setImmediate)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=k(i(73)),r=k(i(1)),o=k(i(69)),s=k(i(48)),l=k(i(47)),c=k(i(2)),u=k(i(27)),d=k(i(26)),h=k(i(25)),p=k(i(24)),f=k(i(23)),m=k(i(22)),v=k(i(21)),y=k(i(20)),g=k(i(19)),b=k(i(17)),w=k(i(16)),E=k(i(15)),T=k(i(14)),S=k(i(13)),A=k(i(5));function k(t){return t&&t.__esModule?t:{default:t}}var _=0,L=[],x=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=(0,o.default)(e),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.tran=new s.default(this.options.lang).tran,this.events=new d.default,this.user=new p.default(this),this.container=this.options.container,this.container.classList.add("dplayer"),this.options.danmaku||this.container.classList.add("dplayer-no-danmaku"),this.options.live&&this.container.classList.add("dplayer-live"),r.default.isMobile&&this.container.classList.add("dplayer-mobile"),this.arrow=this.container.offsetWidth<=500,this.arrow&&this.container.classList.add("dplayer-arrow"),this.template=new l.default({container:this.container,options:this.options,index:_,tran:this.tran}),this.video=this.template.video,this.bar=new m.default(this.template),this.bezel=new y.default(this.template.bezel),this.fullScreen=new h.default(this),this.controller=new g.default(this),this.options.danmaku&&(this.danmaku=new u.default({container:this.template.danmaku,opacity:this.user.get("opacity"),callback:function(){setTimeout(function(){i.template.danmakuLoading.style.display="none",i.options.autoplay&&i.play()},0)},error:function(t){i.notice(t)},apiBackend:this.options.apiBackend,borderColor:this.options.theme,height:this.arrow?24:30,time:function(){return i.video.currentTime},unlimited:this.user.get("unlimited"),api:{id:this.options.danmaku.id,address:this.options.danmaku.api,token:this.options.danmaku.token,maximum:this.options.danmaku.maximum,addition:this.options.danmaku.addition,user:this.options.danmaku.user},events:this.events,tran:function(t){return i.tran(t)}}),this.comment=new w.default(this)),this.setting=new b.default(this),document.addEventListener("click",function(){i.focus=!1},!0),this.container.addEventListener("click",function(){i.focus=!0},!0),this.paused=!0,this.timer=new v.default(this),this.hotkey=new E.default(this),this.contextmenu=new T.default(this),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.infoPanel=new S.default(this),!this.danmaku&&this.options.autoplay&&this.play(),_++,L.push(this)}return n(t,[{key:"seek",value:function(t){t=Math.max(t,0),this.video.duration&&(t=Math.min(t,this.video.duration)),this.video.currentTime<t?this.notice(this.tran("FF")+" "+(t-this.video.currentTime).toFixed(0)+" "+this.tran("s")):this.video.currentTime>t&&this.notice(this.tran("REW")+" "+(this.video.currentTime-t).toFixed(0)+" "+this.tran("s")),this.video.currentTime=t,this.danmaku&&this.danmaku.seek(),this.bar.set("played",t/this.video.duration,"width"),this.template.ptime.innerHTML=r.default.secondToTime(t)}},{key:"play",value:function(){var t=this;if(this.paused=!1,this.video.paused&&this.bezel.switch(c.default.play),this.template.playButton.innerHTML=c.default.pause,a.default.resolve(this.video.play()).catch(function(){t.pause()}).then(function(){}),this.timer.enable("loading"),this.container.classList.remove("dplayer-paused"),this.container.classList.add("dplayer-playing"),this.danmaku&&this.danmaku.play(),this.options.mutex)for(var e=0;e<L.length;e++)this!==L[e]&&L[e].pause()}},{key:"pause",value:function(){this.paused=!0,this.container.classList.remove("dplayer-loading"),this.video.paused||this.bezel.switch(c.default.pause),this.template.playButton.innerHTML=c.default.play,this.video.pause(),this.timer.disable("loading"),this.container.classList.remove("dplayer-playing"),this.container.classList.add("dplayer-paused"),this.danmaku&&this.danmaku.pause()}},{key:"switchVolumeIcon",value:function(){this.volume()>=.95?this.template.volumeIcon.innerHTML=c.default.volumeUp:this.volume()>0?this.template.volumeIcon.innerHTML=c.default.volumeDown:this.template.volumeIcon.innerHTML=c.default.volumeOff}},{key:"volume",value:function(t,e,i){if(t=parseFloat(t),!isNaN(t)){t=Math.max(t,0),t=Math.min(t,1),this.bar.set("volume",t,"width");var n=(100*t).toFixed(0)+"%";this.template.volumeBarWrapWrap.dataset.balloon=n,e||this.user.set("volume",t),i||this.notice(this.tran("Volume")+" "+(100*t).toFixed(0)+"%"),this.video.volume=t,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()}return this.video.volume}},{key:"toggle",value:function(){this.video.paused?this.play():this.pause()}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"switchVideo",value:function(t,e){this.pause(),this.video.poster=t.pic?t.pic:"",this.video.src=t.url,this.initMSE(this.video,t.type||"auto"),e&&(this.template.danmakuLoading.style.display="block",this.bar.set("played",0,"width"),this.bar.set("loaded",0,"width"),this.template.ptime.innerHTML="00:00",this.template.danmaku.innerHTML="",this.danmaku&&this.danmaku.reload({id:e.id,address:e.api,token:e.token,maximum:e.maximum,addition:e.addition,user:e.user}))}},{key:"initMSE",value:function(t,e){var i=this;if(this.type=e,this.options.video.customType&&this.options.video.customType[e])"[object Function]"===Object.prototype.toString.call(this.options.video.customType[e])?this.options.video.customType[e](this.video,this):console.error("Illegal customType: "+e);else switch("auto"===this.type&&(/m3u8(#|\?|$)/i.exec(t.src)?this.type="hls":/.flv(#|\?|$)/i.exec(t.src)?this.type="flv":/.mpd(#|\?|$)/i.exec(t.src)?this.type="dash":this.type="normal"),"hls"===this.type&&(t.canPlayType("application/x-mpegURL")||t.canPlayType("application/vnd.apple.mpegURL"))&&(this.type="normal"),this.type){case"hls":if(Hls)if(Hls.isSupported()){var n=new Hls;n.loadSource(t.src),n.attachMedia(t)}else this.notice("Error: Hls is not supported.");else this.notice("Error: Can't find Hls.");break;case"flv":if(flvjs&&flvjs.isSupported())if(flvjs.isSupported()){var a=flvjs.createPlayer({type:"flv",url:t.src});a.attachMediaElement(t),a.load()}else this.notice("Error: flvjs is not supported.");else this.notice("Error: Can't find flvjs.");break;case"dash":dashjs?dashjs.MediaPlayer().create().initialize(t,t.src,!1):this.notice("Error: Can't find dashjs.");break;case"webtorrent":if(WebTorrent)if(WebTorrent.WEBRTC_SUPPORT){this.container.classList.add("dplayer-loading");var r=new WebTorrent,o=t.src;r.add(o,function(t){t.files.find(function(t){return t.name.endsWith(".mp4")}).renderTo(i.video,{autoplay:i.options.autoplay},function(){i.container.classList.remove("dplayer-loading")})})}else this.notice("Error: Webtorrent is not supported.");else this.notice("Error: Can't find Webtorrent.")}}},{key:"initVideo",value:function(t,e){var i=this;this.initMSE(t,e),this.on("durationchange",function(){1!==t.duration&&t.duration!==1/0&&(i.template.dtime.innerHTML=r.default.secondToTime(t.duration))}),this.on("progress",function(){var e=t.buffered.length?t.buffered.end(t.buffered.length-1)/t.duration:0;i.bar.set("loaded",e,"width")}),this.on("error",function(){i.video.error&&i.tran&&i.notice&&(i.type,i.notice(i.tran("Video load failed"),-1))}),this.on("ended",function(){i.bar.set("played",1,"width"),i.setting.loop?(i.seek(0),i.play()):i.pause(),i.danmaku&&(i.danmaku.danIndex=0)}),this.on("play",function(){i.paused&&i.play()}),this.on("pause",function(){i.paused||i.pause()}),this.on("timeupdate",function(){i.bar.set("played",i.video.currentTime/i.video.duration,"width");var t=r.default.secondToTime(i.video.currentTime);i.template.ptime.innerHTML!==t&&(i.template.ptime.innerHTML=t)});for(var n=function(e){t.addEventListener(i.events.videoEvents[e],function(){i.events.trigger(i.events.videoEvents[e])})},a=0;a<this.events.videoEvents.length;a++)n(a);this.volume(this.user.get("volume"),!0,!0),this.options.subtitle&&(this.subtitle=new f.default(this.template.subtitle,this.video,this.options.subtitle,this.events),this.user.get("subtitle")||this.subtitle.hide())}},{key:"switchQuality",value:function(t){var e=this;if(this.qualityIndex!==t&&!this.switchingQuality){this.qualityIndex=t,this.switchingQuality=!0,this.quality=this.options.video.quality[t],this.template.qualityButton.innerHTML=this.quality.name;var i=this.video.paused;this.video.pause();var n=(0,A.default)({current:!1,pic:null,screenshot:this.options.screenshot,preload:"auto",url:this.quality.url,subtitle:this.options.subtitle}),a=(new DOMParser).parseFromString(n,"text/html").body.firstChild;this.template.videoWrap.insertBefore(a,this.template.videoWrap.getElementsByTagName("div")[0]),this.prevVideo=this.video,this.video=a,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice(this.tran("Switching to")+" "+this.quality.name+" "+this.tran("quality"),-1),this.events.trigger("quality_start",this.quality),this.on("canplay",function(){if(e.prevVideo){if(e.video.currentTime!==e.prevVideo.currentTime)return void e.seek(e.prevVideo.currentTime);e.template.videoWrap.removeChild(e.prevVideo),e.video.classList.add("dplayer-video-current"),i||e.video.play(),e.prevVideo=null,e.notice(e.tran("Switched to")+" "+e.quality.name+" "+e.tran("quality")),e.switchingQuality=!1,e.events.trigger("quality_end")}})}}},{key:"notice",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice.innerHTML=t,this.template.notice.style.opacity=n,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("notice_show",t),i>0&&(this.noticeTime=setTimeout(function(){e.template.notice.style.opacity=0,e.events.trigger("notice_hide")},i))}},{key:"resize",value:function(){this.danmaku&&this.danmaku.resize(),this.events.trigger("resize")}},{key:"speed",value:function(t){this.video.playbackRate=t}},{key:"destroy",value:function(){L.splice(L.indexOf(this),1),this.pause(),this.controller.destroy(),this.timer.destroy(),this.video.src="",this.container.innerHTML="",this.events.trigger("destroy")}}],[{key:"version",get:function(){return"1.25.0"}}]),t}();e.default=x},,,function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(77);var n,a=(n=i(74))&&n.__esModule?n:{default:n};console.log("\n %c DPlayer v1.25.0 fdcf45b %c http://dplayer.js.org \n\n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),e.default=a.default}]).default},t.exports=n()},"Km9/":function(t,e){},LG4Y:function(t,e){},LHvg:function(t,e){},P6zD:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),r=i("gyMJ"),o=i("YXHT"),s=i("VIAY"),l=i.n(s),c=i("oAV5"),u=i.n(c),d=i("NYxO"),h={name:"vHeader",props:{isMainHeader:{type:Boolean,default:!0}},data:function(){return{draggable:!0,handleList:[{name:"个人空间",icon:"icon-zhanghaoguanli1",link:"/mine"},{name:"日程管理",icon:"icon-huihuajilu",link:"/todo"},{name:"设置",icon:"icon-shezhi1",link:"/mySetting"}],showChat:!1,x:Number(window.localStorage.x)||100,y:Number(window.localStorage.y)||100,w:Number(window.localStorage.w)||736,h:Number(window.localStorage.h)||460}},components:{chat:o.default,VueDraggableResizable:l.a},computed:a()({avatar:function(){return""+this.$store.state.user.photo}},Object(d.c)(["user","conversationsList"]),Object(d.b)(["unReadCount"])),watch:{showChat:function(){this.x=Number(window.localStorage.x)||100,this.y=Number(window.localStorage.y)||100,this.w=Number(window.localStorage.w)||736,this.h=Number(window.localStorage.h)||460}},methods:{reset:function(){this.x=100,this.y=100,this.w=736,this.h=460,window.localStorage.w=736,window.localStorage.h=460,window.localStorage.x=100,window.localStorage.y=100},loginOut:function(){var t=this;this.leaveRoom(),r.a.loginOut().then(function(e){0===e.code&&(t.$message.success("退出成功"),t.$store.commit("setUser","out"),t.$router.replace("/"))})},leaveRoom:function(){var t=this;this.conversationsList.forEach(function(e){var i={name:t.user.name,time:u.a.formatTime(new Date),avatar:t.user.photo,roomid:e.id};t.$socket.emit("leave",i)})},onResizestop:function(t,e,i,n){window.localStorage.w=i,window.localStorage.h=n},onDragstop:function(t,e){window.localStorage.x=t,window.localStorage.y=e}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vchat-header"},[t.isMainHeader?i("div",{staticClass:"vchat-main-header"},[i("div",{staticClass:"vchat-header-container"},[i("div",{staticClass:"vchat-logo"},[t._v("Vchat")]),t._v(" "),i("div",{staticClass:"vchat-mine"},[i("nav",{staticClass:"vchat-noUser"},[i("div",[i("el-badge",{staticClass:"headerBadg",attrs:{value:t.unReadCount,max:99,hidden:0===t.unReadCount}},[i("span",{staticClass:"nav-btn"},[t._v("消息")])]),t._v(" "),i("ul",{staticClass:"handleList"},[i("li",{on:{click:function(e){t.showChat=!t.showChat}}},[i("span",[t._v("会话列表")])]),t._v(" "),i("li",{on:{click:t.reset}},[i("span",[t._v("会话窗口复位")])])])],1)]),t._v(" "),i("div",[i("a",{attrs:{href:"javascript:;"}},[i("img",{attrs:{src:t.avatar,alt:""}})]),t._v(" "),i("ul",{staticClass:"handleList"},t._l(t.handleList,function(e,n){return i("li",{key:n},[i("router-link",{attrs:{to:e.link}},[i("i",{staticClass:"iconfont",class:[e.icon?e.icon:""]}),t._v("\n                                "+t._s(e.name)+"\n                            ")])],1)}),0)]),t._v(" "),i("div",[i("p",[i("span",{staticClass:"vchat-line1",attrs:{title:t.user.nickname}},[t._v(t._s(t.user.nickname))]),t._v(" "),i("span",{staticClass:"logout",on:{click:t.loginOut}},[t._v("[退出]")])]),t._v(" "),i("p",{staticClass:"vchat-line2",attrs:{title:t.user.signature}},[t._v(t._s(t.user.signature?"个性签名："+t.user.signature:"这个人很懒，暂时没有签名哦！"))])])])]),t._v(" "),i("transition",{attrs:{name:"chat"}},[t.showChat?i("vue-draggable-resizable",{attrs:{w:t.w,h:t.h,minh:460,minw:736,handles:["tl","tr","bl","br"],draggable:t.draggable,resizable:!0,x:t.x,y:t.y,z:2001,"drag-handle":".chat-header, .chat-conversation-ul","drag-cancel":"a, .chat-conversation-li, .chat-handel, .vchat-scroll"},on:{resizestop:t.onResizestop,dragstop:t.onDragstop}},[i("chat",{on:{closeChat:function(e){t.showChat=!1}}})],1):t._e()],1)],1):i("div",{staticClass:"vchat-little-header"},[i("div",[i("router-link",{attrs:{to:"/main/personalMain"}},[t._v("vchat")]),t._v(" "),i("span",{staticClass:"logout",on:{click:function(e){return t.$router.push({name:"personalMain"})}}},[t._v("[返回]")])],1),t._v(" "),i("div",{staticClass:"avatar"},[i("a",{attrs:{href:"javascipt:;"}},[i("img",{attrs:{src:t.avatar,alt:""}})]),t._v(" "),i("span",{staticClass:"logout",on:{click:t.loginOut}},[t._v("[退出]")])])])])},staticRenderFns:[]};var f=i("VU/8")(h,p,!1,function(t){i("jSyR")},null,null);e.default=f.exports},Pn95:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),r=i("gyMJ"),o=i("NYxO"),s={data:function(){return{chooseColor:"#ffffff",IMGURL:"",predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"],aphSlider:20}},watch:{user:{handler:function(t){this.aphSlider=100*t.bgOpa||20},deep:!0,immediate:!0}},computed:a()({},Object(o.c)(["user"]),{bgList:function(){return[{name:"远方",url:"/img/wallpaper.jpg",id:1},{name:"昨日青空",url:"/img/0055.jpg",id:2},{name:"希望",url:"/img/xiang.jpg",id:3},{name:"自定义",url:this.user.wallpaper&&this.user.wallpaper.split(",")[1]||!1,id:4}]}}),methods:{Sliderchange:function(){var t={bgOpa:this.aphSlider/100};this.$store.commit("setUser",t)},saveBgopa:function(){var t={bgOpa:this.aphSlider/100};this.upUserInfo(t)},formatTooltip:function(t){return t/100},upUserInfo:function(t){var e=this;r.a.upUserInfo(t).then(function(i){0===i.code?(e.$store.commit("setUser",t),e.$message({message:"设置成功",type:"success"})):e.$message({message:"设置失败",type:"warning"})})},setChatBg:function(t){if(this.user.wallpaper.split(",")[0]!==t.url)if(t.url){var e={wallpaper:t.url+(this.user.wallpaper.split(",")[1]?","+this.user.wallpaper.split(",")[1]:"")};this.upUserInfo(e)}else this.$message({message:"请先上传自定义壁纸",type:"warning"})},colorChange:function(){this.upUserInfo({chatColor:this.chooseColor})},fileChange:function(){var t=this,e=this.$refs.wallpaperFile.files[0];if(!(e.size/1024/1024<1))return this.$message.error("图片大小不能超过 1MB!"),void(this.$refs.wallpaperFile.value="");var i=new FormData;i.append("f",e),r.a.uploadFile(i).then(function(e){if(0===e.code){var i={wallpaper:e.data+","+e.data};t.user.wallpaper.split(",")[1]&&(i.unlink=t.user.wallpaper.split(",")[1]),r.a.upUserInfo(i).then(function(i){0===i.code?(t.$store.commit("setUser",{wallpaper:e.data+","+e.data}),t.$message({message:"上传成功",type:"success"})):t.$message({message:"上传失败",type:"warning"})})}else t.$message({message:"上传失败",type:"warning"})}),this.$refs.wallpaperFile.value=""}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vchat-chatSetting"},[i("h3",[t._v("聊天设置")]),t._v(" "),i("v-icon",{staticClass:"el-icon-circle-close-outline deClose",attrs:{color:"#323232",size:24,cursor:"pointer"},on:{clickIcon:function(e){return t.$emit("clickIcon")}}}),t._v(" "),i("h5",[t._v("聊天壁纸")]),t._v(" "),i("ul",{staticClass:"bg"},[t._l(t.bgList,function(e,n){return i("li",{directives:[{name:"bgInmage",rawName:"v-bgInmage",value:t.IMGURL+e.url,expression:"IMGURL + v.url"}],key:n,staticClass:"bg-li"},[i("p",{on:{click:function(i){return t.setChatBg(e)}}},[t._v(t._s(e.name))]),t._v(" "),t.user.wallpaper.split(",")[0]===e.url?i("v-icon",{staticClass:"el-icon-circle-check-outline",attrs:{color:"rgb(80, 243, 0)"}}):t._e()],1)}),t._v(" "),i("li",{staticClass:"upload-btn"},[i("span",{staticClass:"vchat-button-mini minor"},[t._v("上传")]),t._v(" "),i("input",{ref:"wallpaperFile",attrs:{type:"file",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:t.fileChange}})])],2),t._v(" "),i("h5",[t._v("背景透明度")]),t._v(" "),i("div",{staticClass:"aphSlider-container"},[i("el-slider",{attrs:{"format-tooltip":t.formatTooltip,"tooltip-class":"aphTooltip"},on:{change:t.Sliderchange},model:{value:t.aphSlider,callback:function(e){t.aphSlider=e},expression:"aphSlider"}}),t._v(" "),i("span",{staticClass:"vchat-button-mini minor",on:{click:t.saveBgopa}},[t._v("保存")])],1),t._v(" "),i("h5",[t._v("文字颜色")]),t._v(" "),i("p",{staticClass:"isColor-container"},[i("span",[t._v("当前颜色:")]),t._v(" "),i("span",{directives:[{name:"bgColor",rawName:"v-bgColor",value:t.user.chatColor,expression:"user.chatColor"}],staticClass:"isColor"},[t._v(t._s(t.user.chatColor))])]),t._v(" "),i("div",{staticClass:"color-container"},[i("el-color-picker",{attrs:{"show-alpha":"",predefine:t.predefineColors},on:{change:t.colorChange},model:{value:t.chooseColor,callback:function(e){t.chooseColor=e},expression:"chooseColor"}})],1)],1)},staticRenderFns:[]};var c=i("VU/8")(s,l,!1,function(t){i("tvaV")},"data-v-605a96f3",null);e.default=c.exports},Q9Vu:function(t,e){},RvFq:function(t,e,i){var n;window,n=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=41)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/mobile/i.test(window.navigator.userAgent),a={secondToTime:function(t){var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=Math.floor(t-3600*e-60*i);return(e>0?[e,i,n]:[i,n]).map(function(t){return t<10?"0"+t:""+t}).join(":")},getElementViewLeft:function(t){var e=t.offsetLeft,i=t.offsetParent,n=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==i&&i!==t;)e+=i.offsetLeft,i=i.offsetParent;else for(;null!==i;)e+=i.offsetLeft,i=i.offsetParent;return e-n},getElementViewTop:function(t,e){for(var i,n=t.offsetTop,a=t.offsetParent;null!==a;)n+=a.offsetTop,a=a.offsetParent;return i=document.body.scrollTop+document.documentElement.scrollTop,e?n:n-i},isMobile:n,storage:{set:function(t,e){localStorage.setItem(t,e)},get:function(t){return localStorage.getItem(t)}},nameMap:{dragStart:n?"touchstart":"mousedown",dragMove:n?"touchmove":"mousemove",dragEnd:n?"touchend":"mouseup"},randomOrder:function(t){return function(t){for(var e=t.length-1;e>=0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[i];t[i]=t[e],t[e]=n}return t}([].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(Array(t))).map(function(t,e){return e}))}};e.default=a},function(t,e,i){var n=i(2);t.exports=function(t){"use strict";t=t||{};var e="",i=n.$each,a=t.audio,r=(t.$value,t.$index,n.$escape),o=t.theme,s=t.index;return i(a,function(t,i){e+='\n<li>\n    <span class="aplayer-list-cur" style="background-color: ',e+=r(t.theme||o),e+=';"></span>\n    <span class="aplayer-list-index">',e+=r(i+s),e+='</span>\n    <span class="aplayer-list-title">',e+=r(t.name),e+='</span>\n    <span class="aplayer-list-author">',e+=r(t.artist),e+="</span>\n</li>\n"}),e}},function(t,e,i){"use strict";t.exports=i(15)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=g(i(33)),a=g(i(32)),r=g(i(31)),o=g(i(30)),s=g(i(29)),l=g(i(28)),c=g(i(27)),u=g(i(26)),d=g(i(25)),h=g(i(24)),p=g(i(23)),f=g(i(22)),m=g(i(21)),v=g(i(20)),y=g(i(19));function g(t){return t&&t.__esModule?t:{default:t}}var b={play:n.default,pause:a.default,volumeUp:r.default,volumeDown:o.default,volumeOff:s.default,orderRandom:l.default,orderList:c.default,menu:u.default,loopAll:d.default,loopOne:h.default,loopNone:p.default,loading:f.default,right:m.default,skip:v.default,lrc:y.default};e.default=b},function(t,e,i){"use strict";var n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":a(window))&&(n=window)}t.exports=n},function(t,e,i){"use strict";var n,a,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};void 0===(a="function"==typeof(n=function(){if("object"===("undefined"==typeof window?"undefined":r(window))&&void 0!==document.querySelectorAll&&void 0!==window.pageYOffset&&void 0!==history.pushState){var t=function(t,e,i,n){return i>n?e:t+(e-t)*((a=i/n)<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1);var a},e=function(e,i,n,a){i=i||500;var r=(a=a||window).scrollTop||window.pageYOffset;if("number"==typeof e)var o=parseInt(e);else o=function(t,e){return"HTML"===t.nodeName?-e:t.getBoundingClientRect().top+e}(e,r);var s=Date.now(),l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,15)};!function c(){var u=Date.now()-s;a!==window?a.scrollTop=t(r,o,u,i):window.scroll(0,t(r,o,u,i)),u>i?"function"==typeof n&&n(e):l(c)}()},i=function(t){if(!t.defaultPrevented){t.preventDefault(),location.hash!==this.hash&&window.history.pushState(null,null,this.hash);var i=document.getElementById(this.hash.substring(1));if(!i)return;e(i,500,function(t){location.replace("#"+t.id)})}};return document.addEventListener("DOMContentLoaded",function(){for(var t,e=document.querySelectorAll('a[href^="#"]:not([href="#"])'),n=e.length;t=e[--n];)t.addEventListener("click",i,!1)}),e}})?n.call(e,i,e,t):n)||(t.exports=a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=s(i(1)),r=s(i(0)),o=s(i(5));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.index=0,this.audios=this.player.options.audio,this.bindEvents()}return n(t,[{key:"bindEvents",value:function(){var t=this;this.player.template.list.addEventListener("click",function(e){var i=void 0;i="LI"===e.target.tagName.toUpperCase()?e.target:e.target.parentElement;var n=parseInt(i.getElementsByClassName("aplayer-list-index")[0].innerHTML)-1;n!==t.index?(t.switch(n),t.player.play()):t.player.toggle()})}},{key:"show",value:function(){this.player.events.trigger("listshow"),this.player.template.list.classList.remove("aplayer-list-hide"),this.player.template.listOl.scrollTop=33*this.index}},{key:"hide",value:function(){this.player.events.trigger("listhide"),this.player.template.list.classList.add("aplayer-list-hide")}},{key:"toggle",value:function(){this.player.template.list.classList.contains("aplayer-list-hide")?this.show():this.hide()}},{key:"add",value:function(t){this.player.events.trigger("listadd",{audios:t}),"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),t.map(function(t){return t.name=t.name||t.title||"Audio name",t.artist=t.artist||t.author||"Audio artist",t.cover=t.cover||t.pic,t.type=t.type||"normal",t});var e=!(this.audios.length>1),i=0===this.audios.length;this.player.template.listOl.innerHTML+=(0,a.default)({theme:this.player.options.theme,audio:t,index:this.audios.length+1}),this.audios=this.audios.concat(t),e&&this.audios.length>1&&this.player.container.classList.add("aplayer-withlist"),this.player.randomOrder=r.default.randomOrder(this.audios.length),this.player.template.listCurs=this.player.container.querySelectorAll(".aplayer-list-cur"),this.player.template.listCurs[this.audios.length-1].style.backgroundColor=t.theme||this.player.options.theme,i&&("random"===this.player.options.order?this.switch(this.player.randomOrder[0]):this.switch(0))}},{key:"remove",value:function(t){if(this.player.events.trigger("listremove",{index:t}),this.audios[t])if(this.audios.length>1){var e=this.player.container.querySelectorAll(".aplayer-list li");e[t].remove(),this.audios.splice(t,1),this.player.lrc&&this.player.lrc.remove(t),t===this.index&&(this.audios[t]?this.switch(t):this.switch(t-1)),this.index>t&&this.index--;for(var i=t;i<e.length;i++)e[i].getElementsByClassName("aplayer-list-index")[0].textContent=i;1===this.audios.length&&this.player.container.classList.remove("aplayer-withlist"),this.player.template.listCurs=this.player.container.querySelectorAll(".aplayer-list-cur")}else this.clear()}},{key:"switch",value:function(t){if(this.player.events.trigger("listswitch",{index:t}),void 0!==t&&this.audios[t]){this.index=t;var e=this.audios[this.index];this.player.template.pic.style.backgroundImage=e.cover?"url('"+e.cover+"')":"",this.player.theme(this.audios[this.index].theme||this.player.options.theme,this.index,!1),this.player.template.title.innerHTML=e.name,this.player.template.author.innerHTML=e.artist?" - "+e.artist:"";var i=this.player.container.getElementsByClassName("aplayer-list-light")[0];i&&i.classList.remove("aplayer-list-light"),this.player.container.querySelectorAll(".aplayer-list li")[this.index].classList.add("aplayer-list-light"),(0,o.default)(33*this.index,500,null,this.player.template.listOl),this.player.setAudio(e),this.player.lrc&&this.player.lrc.switch(this.index),this.player.lrc&&this.player.lrc.update(0),1!==this.player.duration&&(this.player.template.dtime.innerHTML=r.default.secondToTime(this.player.duration))}}},{key:"clear",value:function(){this.player.events.trigger("listclear"),this.index=0,this.player.container.classList.remove("aplayer-withlist"),this.player.pause(),this.audios=[],this.player.lrc&&this.player.lrc.clear(),this.player.audio.src="",this.player.template.listOl.innerHTML="",this.player.template.pic.style.backgroundImage="",this.player.theme(this.player.options.theme,this.index,!1),this.player.template.title.innerHTML="No audio",this.player.template.author.innerHTML="",this.player.bar.set("loaded",0,"width"),this.player.template.dtime.innerHTML=r.default.secondToTime(0)}}]),t}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={},this.audioEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["destroy","listshow","listhide","listadd","listremove","listswitch","listclear","noticeshow","noticehide","lrcshow","lrchide"]}return n(t,[{key:"on",value:function(t,e){this.type(t)&&"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}},{key:"trigger",value:function(t,e){if(this.events[t]&&this.events[t].length)for(var i=0;i<this.events[t].length;i++)this.events[t][i](e)}},{key:"type",value:function(t){return-1!==this.playerEvents.indexOf(t)?"player":-1!==this.audioEvents.indexOf(t)?"audio":(console.error("Unknown event name: "+t),null)}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},this.types=["loading"],this.init()}return n(t,[{key:"init",value:function(){var t=this;this.types.forEach(function(e){t["init"+e+"Checker"]()})}},{key:"initloadingChecker",value:function(){var t=this,e=0,i=0,n=!1;this.loadingChecker=setInterval(function(){t.enableloadingChecker&&(i=t.player.audio.currentTime,n||i!==e||t.player.audio.paused||(t.player.container.classList.add("aplayer-loading"),n=!0),n&&i>e&&!t.player.audio.paused&&(t.player.container.classList.remove("aplayer-loading"),n=!1),e=i)},100)}},{key:"enable",value:function(t){this["enable"+t+"Checker"]=!0,"fps"===t&&this.initfpsChecker()}},{key:"disable",value:function(t){this["enable"+t+"Checker"]=!1}},{key:"destroy",value:function(){var t=this;this.types.forEach(function(e){t["enable"+e+"Checker"]=!1,t[e+"Checker"]&&clearInterval(t[e+"Checker"])})}}]),t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=o(i(0)),r=o(i(3));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.initPlayButton(),this.initPlayBar(),this.initOrderButton(),this.initLoopButton(),this.initMenuButton(),a.default.isMobile||this.initVolumeButton(),this.initMiniSwitcher(),this.initSkipButton(),this.initLrcButton()}return n(t,[{key:"initPlayButton",value:function(){var t=this;this.player.template.pic.addEventListener("click",function(){t.player.toggle()})}},{key:"initPlayBar",value:function(){var t=this,e=function(e){var i=((e.clientX||e.changedTouches[0].clientX)-a.default.getElementViewLeft(t.player.template.barWrap))/t.player.template.barWrap.clientWidth;i=Math.max(i,0),i=Math.min(i,1),t.player.bar.set("played",i,"width"),t.player.lrc&&t.player.lrc.update(i*t.player.duration),t.player.template.ptime.innerHTML=a.default.secondToTime(i*t.player.duration)},i=function i(n){document.removeEventListener(a.default.nameMap.dragEnd,i),document.removeEventListener(a.default.nameMap.dragMove,e);var r=((n.clientX||n.changedTouches[0].clientX)-a.default.getElementViewLeft(t.player.template.barWrap))/t.player.template.barWrap.clientWidth;r=Math.max(r,0),r=Math.min(r,1),t.player.bar.set("played",r,"width"),t.player.seek(t.player.bar.get("played","width")*t.player.duration),t.player.disableTimeupdate=!1};this.player.template.barWrap.addEventListener(a.default.nameMap.dragStart,function(){t.player.disableTimeupdate=!0,document.addEventListener(a.default.nameMap.dragMove,e),document.addEventListener(a.default.nameMap.dragEnd,i)})}},{key:"initVolumeButton",value:function(){var t=this;this.player.template.volumeButton.addEventListener("click",function(){t.player.audio.muted?(t.player.audio.muted=!1,t.player.switchVolumeIcon(),t.player.bar.set("volume",t.player.volume(),"height")):(t.player.audio.muted=!0,t.player.switchVolumeIcon(),t.player.bar.set("volume",0,"height"))});var e=function(e){var i=1-((e.clientY||e.changedTouches[0].clientY)-a.default.getElementViewTop(t.player.template.volumeBar,t.player.options.fixed))/t.player.template.volumeBar.clientHeight;i=Math.max(i,0),i=Math.min(i,1),t.player.volume(i)},i=function i(n){t.player.template.volumeBarWrap.classList.remove("aplayer-volume-bar-wrap-active"),document.removeEventListener(a.default.nameMap.dragEnd,i),document.removeEventListener(a.default.nameMap.dragMove,e);var r=1-((n.clientY||n.changedTouches[0].clientY)-a.default.getElementViewTop(t.player.template.volumeBar,t.player.options.fixed))/t.player.template.volumeBar.clientHeight;r=Math.max(r,0),r=Math.min(r,1),t.player.volume(r)};this.player.template.volumeBarWrap.addEventListener(a.default.nameMap.dragStart,function(){t.player.template.volumeBarWrap.classList.add("aplayer-volume-bar-wrap-active"),document.addEventListener(a.default.nameMap.dragMove,e),document.addEventListener(a.default.nameMap.dragEnd,i)})}},{key:"initOrderButton",value:function(){var t=this;this.player.template.order.addEventListener("click",function(){"list"===t.player.options.order?(t.player.options.order="random",t.player.template.order.innerHTML=r.default.orderRandom):"random"===t.player.options.order&&(t.player.options.order="list",t.player.template.order.innerHTML=r.default.orderList)})}},{key:"initLoopButton",value:function(){var t=this;this.player.template.loop.addEventListener("click",function(){t.player.list.audios.length>1?"one"===t.player.options.loop?(t.player.options.loop="none",t.player.template.loop.innerHTML=r.default.loopNone):"none"===t.player.options.loop?(t.player.options.loop="all",t.player.template.loop.innerHTML=r.default.loopAll):"all"===t.player.options.loop&&(t.player.options.loop="one",t.player.template.loop.innerHTML=r.default.loopOne):"one"===t.player.options.loop||"all"===t.player.options.loop?(t.player.options.loop="none",t.player.template.loop.innerHTML=r.default.loopNone):"none"===t.player.options.loop&&(t.player.options.loop="all",t.player.template.loop.innerHTML=r.default.loopAll)})}},{key:"initMenuButton",value:function(){var t=this;this.player.template.menu.addEventListener("click",function(){t.player.list.toggle()})}},{key:"initMiniSwitcher",value:function(){var t=this;this.player.template.miniSwitcher.addEventListener("click",function(){t.player.setMode("mini"===t.player.mode?"normal":"mini")})}},{key:"initSkipButton",value:function(){var t=this;this.player.template.skipBackButton.addEventListener("click",function(){t.player.skipBack()}),this.player.template.skipForwardButton.addEventListener("click",function(){t.player.skipForward()}),this.player.template.skipPlayButton.addEventListener("click",function(){t.player.toggle()})}},{key:"initLrcButton",value:function(){var t=this;this.player.template.lrcButton.addEventListener("click",function(){t.player.template.lrcButton.classList.contains("aplayer-icon-lrc-inactivity")?(t.player.template.lrcButton.classList.remove("aplayer-icon-lrc-inactivity"),t.player.lrc&&t.player.lrc.show()):(t.player.template.lrcButton.classList.add("aplayer-icon-lrc-inactivity"),t.player.lrc&&t.player.lrc.hide())})}}]),t}();e.default=s},function(t,e,i){var n=i(2);t.exports=function(t){"use strict";t=t||{};var e="",i=n.$each,a=t.lyrics,r=(t.$value,t.$index,n.$escape);return i(a,function(t,i){e+="\n    <p",0===i&&(e+=' class="aplayer-lrc-current"'),e+=">",e+=r(t[1]),e+="</p>\n"}),e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(10))&&n.__esModule?n:{default:n},o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.async=e.async,this.player=e.player,this.parsed=[],this.index=0,this.current=[]}return a(t,[{key:"show",value:function(){this.player.events.trigger("lrcshow"),this.player.template.lrcWrap.classList.remove("aplayer-lrc-hide")}},{key:"hide",value:function(){this.player.events.trigger("lrchide"),this.player.template.lrcWrap.classList.add("aplayer-lrc-hide")}},{key:"toggle",value:function(){this.player.template.lrcWrap.classList.contains("aplayer-lrc-hide")?this.show():this.hide()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.player.audio.currentTime;if(this.index>this.current.length-1||t<this.current[this.index][0]||!this.current[this.index+1]||t>=this.current[this.index+1][0])for(var e=0;e<this.current.length;e++)t>=this.current[e][0]&&(!this.current[e+1]||t<this.current[e+1][0])&&(this.index=e,this.container.style.transform="translateY("+16*-this.index+"px)",this.container.style.webkitTransform="translateY("+16*-this.index+"px)",this.container.getElementsByClassName("aplayer-lrc-current")[0].classList.remove("aplayer-lrc-current"),this.container.getElementsByTagName("p")[e].classList.add("aplayer-lrc-current"))}},{key:"switch",value:function(t){var e=this;if(!this.parsed[t])if(this.async){this.parsed[t]=[["00:00","Loading"]];var i=new XMLHttpRequest;i.onreadystatechange=function(){t===e.player.list.index&&4===i.readyState&&(i.status>=200&&i.status<300||304===i.status?e.parsed[t]=e.parse(i.responseText):(e.player.notice("LRC file request fails: status "+i.status),e.parsed[t]=[["00:00","Not available"]]),e.container.innerHTML=(0,r.default)({lyrics:e.parsed[t]}),e.update(0),e.current=e.parsed[t])};var n=this.player.list.audios[t].lrc;i.open("get",n,!0),i.send(null)}else this.player.list.audios[t].lrc?this.parsed[t]=this.parse(this.player.list.audios[t].lrc):this.parsed[t]=[["00:00","Not available"]];this.container.innerHTML=(0,r.default)({lyrics:this.parsed[t]}),this.update(0),this.current=this.parsed[t]}},{key:"parse",value:function(t){if(t){for(var e=(t=t.replace(/([^\]^\n])\[/g,function(t,e){return e+"\n["})).split("\n"),i=[],n=e.length,a=0;a<n;a++){var r=e[a].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),o=e[a].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(r)for(var s=r.length,l=0;l<s;l++){var c=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(r[l]),u=60*c[1]+parseInt(c[2])+(c[4]?parseInt(c[4])/(2===(c[4]+"").length?100:1e3):0);i.push([u,o])}}return(i=i.filter(function(t){return t[1]})).sort(function(t,e){return t[0]-e[0]}),i}return[]}},{key:"remove",value:function(t){this.parsed.splice(t,1)}},{key:"clear",value:function(){this.parsed=[],this.container.innerHTML=""}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=(n=i(0))&&n.__esModule?n:{default:n},o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageName=e.options.storageName,this.data=JSON.parse(r.default.storage.get(this.storageName)),this.data||(this.data={}),this.data.volume=this.data.volume||e.options.volume}return a(t,[{key:"get",value:function(t){return this.data[t]}},{key:"set",value:function(t,e){this.data[t]=e,r.default.storage.set(this.storageName,JSON.stringify(this.data))}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={},this.elements.volume=e.volume,this.elements.played=e.played,this.elements.loaded=e.loaded}return n(t,[{key:"set",value:function(t,e,i){e=Math.max(e,0),e=Math.min(e,1),this.elements[t].style[i]=100*e+"%"}},{key:"get",value:function(t,e){return parseFloat(this.elements[t].style[e])/100}}]),t}();e.default=a},function(t,e,i){"use strict";(function(e){t.exports=!1;try{t.exports="[object process]"===Object.prototype.toString.call(e.process)}catch(t){}}).call(this,i(4))},function(t,e,i){"use strict";(function(e){var n=i(14),a=Object.create(n?e:window),r=/["&'<>]/;a.$escape=function(t){return function(t){var e=""+t,i=r.exec(e);if(!i)return t;var n="",a=void 0,o=void 0,s=void 0;for(a=i.index,o=0;a<e.length;a++){switch(e.charCodeAt(a)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}o!==a&&(n+=e.substring(o,a)),o=a+1,n+=s}return o!==a?n+e.substring(o,a):n}(function t(e){return"string"!=typeof e&&(e=void 0===e||null===e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e)),e}(t))},a.$each=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++)e(t[i],i);else for(var a in t)e(t[a],a)},t.exports=a}).call(this,i(4))},function(t,e,i){var n=i(2);t.exports=function(t){"use strict";var e="",a=(t=t||{}).options,r=t.cover,o=n.$escape,s=t.icons,l=(arguments[1],function(t){return e+=t}),c=t.getObject;return t.theme,t.audio,t.index,a.fixed?(e+='\n<div class="aplayer-list',a.listFolded&&(e+=" aplayer-list-hide"),e+='"',a.listMaxHeight&&(e+=' style="max-height: ',e+=o(a.listMaxHeight),e+='"'),e+=">\n    <ol",a.listMaxHeight&&(e+=' style="max-height: ',e+=o(a.listMaxHeight),e+='"'),e+=">\n        ",l(i(1)(c({theme:a.theme,audio:a.audio,index:1}))),e+='\n    </ol>\n</div>\n<div class="aplayer-body">\n    <div class="aplayer-pic" style="',r&&(e+="background-image: url(&quot;",e+=o(r),e+="&quot;);"),e+="background-color: ",e+=o(a.theme),e+=';">\n        <div class="aplayer-button aplayer-play">',e+=s.play,e+='</div>\n    </div>\n    <div class="aplayer-info" style="display: none;">\n        <div class="aplayer-music">\n            <span class="aplayer-title">No audio</span>\n            <span class="aplayer-author"></span>\n        </div>\n        <div class="aplayer-controller">\n            <div class="aplayer-bar-wrap">\n                <div class="aplayer-bar">\n                    <div class="aplayer-loaded" style="width: 0"></div>\n                    <div class="aplayer-played" style="width: 0; background: ',e+=o(a.theme),e+=';">\n                        <span class="aplayer-thumb" style="background: ',e+=o(a.theme),e+=';">\n                            <span class="aplayer-loading-icon">',e+=s.loading,e+='</span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="aplayer-time">\n                <span class="aplayer-time-inner">\n                    <span class="aplayer-ptime">00:00</span> / <span class="aplayer-dtime">00:00</span>\n                </span>\n                <span class="aplayer-icon aplayer-icon-back">\n                    ',e+=s.skip,e+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-play">\n                    ',e+=s.play,e+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-forward">\n                    ',e+=s.skip,e+='\n                </span>\n                <div class="aplayer-volume-wrap">\n                    <button type="button" class="aplayer-icon aplayer-icon-volume-down">\n                        ',e+=s.volumeDown,e+='\n                    </button>\n                    <div class="aplayer-volume-bar-wrap">\n                        <div class="aplayer-volume-bar">\n                            <div class="aplayer-volume" style="height: 80%; background: ',e+=o(a.theme),e+=';"></div>\n                        </div>\n                    </div>\n                </div>\n                <button type="button" class="aplayer-icon aplayer-icon-order">\n                    ',"list"===a.order?e+=s.orderList:"random"===a.order&&(e+=s.orderRandom),e+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-loop">\n                    ',"one"===a.loop?e+=s.loopOne:"all"===a.loop?e+=s.loopAll:"none"===a.loop&&(e+=s.loopNone),e+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-menu">\n                    ',e+=s.menu,e+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-lrc">\n                    ',e+=s.lrc,e+='\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="aplayer-notice"></div>\n    <div class="aplayer-miniswitcher"><button class="aplayer-icon">',e+=s.right,e+='</button></div>\n</div>\n<div class="aplayer-lrc">\n    <div class="aplayer-lrc-contents" style="transform: translateY(0); -webkit-transform: translateY(0);"></div>\n</div>\n'):(e+='\n<div class="aplayer-body">\n    <div class="aplayer-pic" style="',r&&(e+="background-image: url(&quot;",e+=o(r),e+="&quot;);"),e+="background-color: ",e+=o(a.theme),e+=';">\n        <div class="aplayer-button aplayer-play">',e+=s.play,e+='</div>\n    </div>\n    <div class="aplayer-info">\n        <div class="aplayer-music">\n            <span class="aplayer-title">No audio</span>\n            <span class="aplayer-author"></span>\n        </div>\n        <div class="aplayer-lrc">\n            <div class="aplayer-lrc-contents" style="transform: translateY(0); -webkit-transform: translateY(0);"></div>\n        </div>\n        <div class="aplayer-controller">\n            <div class="aplayer-bar-wrap">\n                <div class="aplayer-bar">\n                    <div class="aplayer-loaded" style="width: 0"></div>\n                    <div class="aplayer-played" style="width: 0; background: ',e+=o(a.theme),e+=';">\n                        <span class="aplayer-thumb" style="background: ',e+=o(a.theme),e+=';">\n                            <span class="aplayer-loading-icon">',e+=s.loading,e+='</span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="aplayer-time">\n                <span class="aplayer-time-inner">\n                    <span class="aplayer-ptime">00:00</span> / <span class="aplayer-dtime">00:00</span>\n                </span>\n                <span class="aplayer-icon aplayer-icon-back">\n                    ',e+=s.skip,e+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-play">\n                    ',e+=s.play,e+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-forward">\n                    ',e+=s.skip,e+='\n                </span>\n                <div class="aplayer-volume-wrap">\n                    <button type="button" class="aplayer-icon aplayer-icon-volume-down">\n                        ',e+=s.volumeDown,e+='\n                    </button>\n                    <div class="aplayer-volume-bar-wrap">\n                        <div class="aplayer-volume-bar">\n                            <div class="aplayer-volume" style="height: 80%; background: ',e+=o(a.theme),e+=';"></div>\n                        </div>\n                    </div>\n                </div>\n                <button type="button" class="aplayer-icon aplayer-icon-order">\n                    ',"list"===a.order?e+=s.orderList:"random"===a.order&&(e+=s.orderRandom),e+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-loop">\n                    ',"one"===a.loop?e+=s.loopOne:"all"===a.loop?e+=s.loopAll:"none"===a.loop&&(e+=s.loopNone),e+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-menu">\n                    ',e+=s.menu,e+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-lrc">\n                    ',e+=s.lrc,e+='\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="aplayer-notice"></div>\n    <div class="aplayer-miniswitcher"><button class="aplayer-icon">',e+=s.right,e+='</button></div>\n</div>\n<div class="aplayer-list',a.listFolded&&(e+=" aplayer-list-hide"),e+='"',a.listMaxHeight&&(e+=' style="max-height: ',e+=o(a.listMaxHeight),e+='"'),e+=">\n    <ol",a.listMaxHeight&&(e+=' style="max-height: ',e+=o(a.listMaxHeight),e+='"'),e+=">\n        ",l(i(1)(c({theme:a.theme,audio:a.audio,index:1}))),e+="\n    </ol>\n</div>\n"),e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=o(i(3)),r=o(i(16));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.options=e.options,this.randomOrder=e.randomOrder,this.init()}return n(t,[{key:"init",value:function(){var t="";this.options.audio.length&&(t="random"===this.options.order?this.options.audio[this.randomOrder[0]].cover:this.options.audio[0].cover),this.container.innerHTML=(0,r.default)({options:this.options,icons:a.default,cover:t,getObject:function(t){return t}}),this.lrc=this.container.querySelector(".aplayer-lrc-contents"),this.lrcWrap=this.container.querySelector(".aplayer-lrc"),this.ptime=this.container.querySelector(".aplayer-ptime"),this.info=this.container.querySelector(".aplayer-info"),this.time=this.container.querySelector(".aplayer-time"),this.barWrap=this.container.querySelector(".aplayer-bar-wrap"),this.button=this.container.querySelector(".aplayer-button"),this.body=this.container.querySelector(".aplayer-body"),this.list=this.container.querySelector(".aplayer-list"),this.listOl=this.container.querySelector(".aplayer-list ol"),this.listCurs=this.container.querySelectorAll(".aplayer-list-cur"),this.played=this.container.querySelector(".aplayer-played"),this.loaded=this.container.querySelector(".aplayer-loaded"),this.thumb=this.container.querySelector(".aplayer-thumb"),this.volume=this.container.querySelector(".aplayer-volume"),this.volumeBar=this.container.querySelector(".aplayer-volume-bar"),this.volumeButton=this.container.querySelector(".aplayer-time button"),this.volumeBarWrap=this.container.querySelector(".aplayer-volume-bar-wrap"),this.loop=this.container.querySelector(".aplayer-icon-loop"),this.order=this.container.querySelector(".aplayer-icon-order"),this.menu=this.container.querySelector(".aplayer-icon-menu"),this.pic=this.container.querySelector(".aplayer-pic"),this.title=this.container.querySelector(".aplayer-title"),this.author=this.container.querySelector(".aplayer-author"),this.dtime=this.container.querySelector(".aplayer-dtime"),this.notice=this.container.querySelector(".aplayer-notice"),this.miniSwitcher=this.container.querySelector(".aplayer-miniswitcher"),this.skipBackButton=this.container.querySelector(".aplayer-icon-back"),this.skipForwardButton=this.container.querySelector(".aplayer-icon-forward"),this.skipPlayButton=this.container.querySelector(".aplayer-icon-play"),this.lrcButton=this.container.querySelector(".aplayer-icon-lrc")}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={container:t.element||document.getElementsByClassName("aplayer")[0],mini:t.narrow||t.fixed||!1,fixed:!1,autoplay:!1,mutex:!0,lrcType:t.showlrc||t.lrc||0,preload:"auto",theme:"#b7daff",loop:"all",order:"list",volume:.7,listFolded:t.fixed,listMaxHeight:t.listmaxheight||"250px",audio:t.music||[],storageName:"aplayer-setting"};for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=e[i]);return"[object Array]"!==Object.prototype.toString.call(t.audio)&&(t.audio=[t.audio]),t.audio.map(function(t){return t.name=t.name||t.title||"Audio name",t.artist=t.artist||t.author||"Audio artist",t.cover=t.cover||t.pic,t.type=t.type||"normal",t}),t.audio.length<=1&&"one"===t.loop&&(t.loop="all"),t}},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M25.468 6.947c-0.326-0.172-0.724-0.151-1.030 0.057l-6.438 4.38v-3.553c0-0.371-0.205-0.71-0.532-0.884-0.326-0.172-0.724-0.151-1.030 0.057l-12 8.164c-0.274 0.186-0.438 0.496-0.438 0.827s0.164 0.641 0.438 0.827l12 8.168c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-3.556l6.438 4.382c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-16.333c0-0.371-0.205-0.71-0.532-0.884z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M4 16c0-6.6 5.4-12 12-12s12 5.4 12 12c0 1.2-0.8 2-2 2s-2-0.8-2-2c0-4.4-3.6-8-8-8s-8 3.6-8 8 3.6 8 8 8c1.2 0 2 0.8 2 2s-0.8 2-2 2c-6.6 0-12-5.4-12-12z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 29 32"><path d="M2.667 7.027l1.707-1.693 22.293 22.293-1.693 1.707-4-4h-11.64v4l-5.333-5.333 5.333-5.333v4h8.973l-8.973-8.973v0.973h-2.667v-3.64l-4-4zM22.667 17.333h2.667v5.573l-2.667-2.667v-2.907zM22.667 6.667v-4l5.333 5.333-5.333 5.333v-4h-10.907l-2.667-2.667h13.573z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 33 32"><path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333zM17.333 20v-8h-1.333l-2.667 1.333v1.333h2v5.333h2z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 29 32"><path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 22 32"><path d="M20.8 14.4q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2zM1.6 11.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2zM20.8 20.8q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 28 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 28 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 28 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056zM29.728 16q0 4.096-2.272 7.552t-6.048 5.056q-0.224 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.64 0.704-1.056 0.128-0.064 0.384-0.192t0.416-0.192q0.8-0.448 1.44-0.896 2.208-1.632 3.456-4.064t1.216-5.152-1.216-5.152-3.456-4.064q-0.64-0.448-1.44-0.896-0.128-0.096-0.416-0.192t-0.384-0.192q-0.704-0.416-0.704-1.056 0-0.448 0.32-0.8t0.832-0.352q0.224 0 0.448 0.096 3.776 1.632 6.048 5.056t2.272 7.552z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 31"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(t,e,i){"use strict";var n,a,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(t){a=s}}();var c,u=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!d){var t=l(p);d=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,d=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new m(t,e)),1!==u.length||d||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";(function(t,e){!function(t,i){if(!t.setImmediate){var n,a,r,o,s,l=1,c={},u=!1,d=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){f(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?(o="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&f(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(o+e,"*")}):t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){f(t.data)},n=function(t){r.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,n=function(t){var e=d.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,a.removeChild(e),e=null},a.appendChild(e)}):n=function(t){setTimeout(f,0,t)},h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var a={callback:t,args:e};return c[l]=a,n(l),l++},h.clearImmediate=p}function p(t){delete c[t]}function f(t){if(u)setTimeout(f,0,t);else{var e=c[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{p(t),u=!1}}}}}("undefined"==typeof self?void 0===t?void 0:t:self)}).call(this,i(4),i(34))},function(t,e,i){"use strict";var n=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(n.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new a(n.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(35),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,i){"use strict";(function(e){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=setTimeout;function a(){}function r(t){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(t){return void l(e.promise,t)}s(e.promise,n)}else(1===t._state?s:l)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":i(e))||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void u((a=n,o=e,function(){a.apply(o,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){l(t,e)}var a,o}function l(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)o(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var i=!1;try{t(function(t){i||(i=!0,s(e,t))},function(t){i||(i=!0,l(e,t))})}catch(t){if(i)return;i=!0,l(e,t)}}r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var i=new this.constructor(a);return o(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(t,e,i)),i},r.prototype.finally=function(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){return e.reject(i)})})},r.all=function(t){return new r(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(t);if(0===a.length)return e([]);var r=a.length;function o(t,s){try{if(s&&("object"===(void 0===s?"undefined":i(s))||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(e){o(t,e)},n)}a[t]=s,0==--r&&e(a)}catch(t){n(t)}}for(var s=0;s<a.length;s++)o(s,a[s])})},r.resolve=function(t){return t&&"object"===(void 0===t?"undefined":i(t))&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,i){i(t)})},r.race=function(t){return new r(function(e,i){for(var n=0,a=t.length;n<a;n++)t[n].then(e,i)})},r._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){n(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},t.exports=r}).call(this,i(36).setImmediate)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=v(i(37)),r=v(i(0)),o=v(i(3)),s=v(i(18)),l=v(i(17)),c=v(i(13)),u=v(i(12)),d=v(i(11)),h=v(i(9)),p=v(i(8)),f=v(i(7)),m=v(i(6));function v(t){return t&&t.__esModule?t:{default:t}}var y=[],g=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=(0,s.default)(e),this.container=this.options.container,this.paused=!0,this.playedPromise=a.default.resolve(),this.mode="normal",this.randomOrder=r.default.randomOrder(this.options.audio.length),this.container.classList.add("aplayer"),this.options.lrcType&&!this.options.fixed&&this.container.classList.add("aplayer-withlrc"),this.options.audio.length>1&&this.container.classList.add("aplayer-withlist"),r.default.isMobile&&this.container.classList.add("aplayer-mobile"),this.arrow=this.container.offsetWidth<=300,this.arrow&&this.container.classList.add("aplayer-arrow"),this.container=this.options.container,2===this.options.lrcType||!0===this.options.lrcType)for(var i=this.container.getElementsByClassName("aplayer-lrc-content"),n=0;n<i.length;n++)this.options.audio[n]&&(this.options.audio[n].lrc=i[n].innerHTML);this.template=new l.default({container:this.container,options:this.options,randomOrder:this.randomOrder}),this.options.fixed&&(this.container.classList.add("aplayer-fixed"),this.template.body.style.width=this.template.body.offsetWidth-18+"px"),this.options.mini&&(this.setMode("mini"),this.template.info.style.display="block"),this.template.info.offsetWidth<200&&this.template.time.classList.add("aplayer-time-narrow"),this.options.lrcType&&(this.lrc=new d.default({container:this.template.lrc,async:3===this.options.lrcType,player:this})),this.events=new f.default,this.storage=new u.default(this),this.bar=new c.default(this.template),this.controller=new h.default(this),this.timer=new p.default(this),this.list=new m.default(this),this.initAudio(),this.bindEvents(),"random"===this.options.order?this.list.switch(this.randomOrder[0]):this.list.switch(0),this.options.autoplay&&this.play(),y.push(this)}return n(t,[{key:"initAudio",value:function(){var t=this;this.audio=document.createElement("audio"),this.audio.preload=this.options.preload;for(var e=function(e){t.audio.addEventListener(t.events.audioEvents[e],function(i){t.events.trigger(t.events.audioEvents[e],i)})},i=0;i<this.events.audioEvents.length;i++)e(i);this.volume(this.storage.get("volume"),!0)}},{key:"bindEvents",value:function(){var t=this;this.on("play",function(){t.paused&&t.setUIPlaying()}),this.on("pause",function(){t.paused||t.setUIPaused()}),this.on("timeupdate",function(){if(!t.disableTimeupdate){t.bar.set("played",t.audio.currentTime/t.duration,"width"),t.lrc&&t.lrc.update();var e=r.default.secondToTime(t.audio.currentTime);t.template.ptime.innerHTML!==e&&(t.template.ptime.innerHTML=e)}}),this.on("durationchange",function(){1!==t.duration&&(t.template.dtime.innerHTML=r.default.secondToTime(t.duration))}),this.on("progress",function(){var e=t.audio.buffered.length?t.audio.buffered.end(t.audio.buffered.length-1)/t.duration:0;t.bar.set("loaded",e,"width")});var e=void 0;this.on("error",function(){t.list.audios.length>1?(t.notice("An audio error has occurred, player will skip forward in 2 seconds."),e=setTimeout(function(){t.skipForward(),t.paused||t.play()},2e3)):1===t.list.audios.length&&t.notice("An audio error has occurred.")}),this.events.on("listswitch",function(){e&&clearTimeout(e)}),this.on("ended",function(){"none"===t.options.loop?"list"===t.options.order?t.list.index<t.list.audios.length-1?(t.list.switch((t.list.index+1)%t.list.audios.length),t.play()):(t.list.switch((t.list.index+1)%t.list.audios.length),t.pause()):"random"===t.options.order&&(t.randomOrder.indexOf(t.list.index)<t.randomOrder.length-1?(t.list.switch(t.nextIndex()),t.play()):(t.list.switch(t.nextIndex()),t.pause())):"one"===t.options.loop?(t.list.switch(t.list.index),t.play()):"all"===t.options.loop&&(t.skipForward(),t.play())})}},{key:"setAudio",value:function(t){this.hls&&(this.hls.destroy(),this.hls=null);var e=t.type;this.options.customAudioType&&this.options.customAudioType[e]?"[object Function]"===Object.prototype.toString.call(this.options.customAudioType[e])?this.options.customAudioType[e](this.audio,t,this):console.error("Illegal customType: "+e):(e&&"auto"!==e||(e=/m3u8(#|\?|$)/i.exec(t.url)?"hls":"normal"),"hls"===e?Hls.isSupported()?(this.hls=new Hls,this.hls.loadSource(t.url),this.hls.attachMedia(this.audio)):this.audio.canPlayType("application/x-mpegURL")||this.audio.canPlayType("application/vnd.apple.mpegURL")?this.audio.src=t.url:this.notice("Error: HLS is not supported."):"normal"===e&&(this.audio.src=t.url)),this.seek(0),this.paused||this.audio.play()}},{key:"theme",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.list.audios[this.list.index].theme||this.options.theme,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.list.index;(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.list.audios[e]&&(this.list.audios[e].theme=t),this.template.listCurs[e]&&(this.template.listCurs[e].style.backgroundColor=t),e===this.list.index&&(this.template.pic.style.backgroundColor=t,this.template.played.style.background=t,this.template.thumb.style.background=t,this.template.volume.style.background=t)}},{key:"seek",value:function(t){t=Math.max(t,0),t=Math.min(t,this.duration),this.audio.currentTime=t,this.bar.set("played",t/this.duration,"width"),this.template.ptime.innerHTML=r.default.secondToTime(t)}},{key:"setUIPlaying",value:function(){var t=this;if(this.paused&&(this.paused=!1,this.template.button.classList.remove("aplayer-play"),this.template.button.classList.add("aplayer-pause"),this.template.button.innerHTML="",setTimeout(function(){t.template.button.innerHTML=o.default.pause},100),this.template.skipPlayButton.innerHTML=o.default.pause),this.timer.enable("loading"),this.options.mutex)for(var e=0;e<y.length;e++)this!==y[e]&&y[e].pause()}},{key:"play",value:function(){var t=this;this.setUIPlaying();var e=this.audio.play();e&&e.catch(function(e){console.warn(e),"NotAllowedError"===e.name&&t.setUIPaused()})}},{key:"setUIPaused",value:function(){var t=this;this.paused||(this.paused=!0,this.template.button.classList.remove("aplayer-pause"),this.template.button.classList.add("aplayer-play"),this.template.button.innerHTML="",setTimeout(function(){t.template.button.innerHTML=o.default.play},100),this.template.skipPlayButton.innerHTML=o.default.play),this.container.classList.remove("aplayer-loading"),this.timer.disable("loading")}},{key:"pause",value:function(){this.setUIPaused(),this.audio.pause()}},{key:"switchVolumeIcon",value:function(){this.volume()>=.95?this.template.volumeButton.innerHTML=o.default.volumeUp:this.volume()>0?this.template.volumeButton.innerHTML=o.default.volumeDown:this.template.volumeButton.innerHTML=o.default.volumeOff}},{key:"volume",value:function(t,e){return t=parseFloat(t),isNaN(t)||(t=Math.max(t,0),t=Math.min(t,1),this.bar.set("volume",t,"height"),e||this.storage.set("volume",t),this.audio.volume=t,this.audio.muted&&(this.audio.muted=!1),this.switchVolumeIcon()),this.audio.muted?0:this.audio.volume}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"toggle",value:function(){this.template.button.classList.contains("aplayer-play")?this.play():this.template.button.classList.contains("aplayer-pause")&&this.pause()}},{key:"switchAudio",value:function(t){this.list.switch(t)}},{key:"addAudio",value:function(t){this.list.add(t)}},{key:"removeAudio",value:function(t){this.list.remove(t)}},{key:"destroy",value:function(){y.splice(y.indexOf(this),1),this.pause(),this.container.innerHTML="",this.audio.src="",this.timer.destroy(),this.events.trigger("destroy")}},{key:"setMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";this.mode=t,"mini"===t?this.container.classList.add("aplayer-narrow"):"normal"===t&&this.container.classList.remove("aplayer-narrow")}},{key:"notice",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice.innerHTML=t,this.template.notice.style.opacity=n,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("noticeshow",{text:t}),i&&(this.noticeTime=setTimeout(function(){e.template.notice.style.opacity=0,e.events.trigger("noticehide")},i))}},{key:"prevIndex",value:function(){if(!(this.list.audios.length>1))return 0;if("list"===this.options.order)return this.list.index-1<0?this.list.audios.length-1:this.list.index-1;if("random"===this.options.order){var t=this.randomOrder.indexOf(this.list.index);return 0===t?this.randomOrder[this.randomOrder.length-1]:this.randomOrder[t-1]}}},{key:"nextIndex",value:function(){if(!(this.list.audios.length>1))return 0;if("list"===this.options.order)return(this.list.index+1)%this.list.audios.length;if("random"===this.options.order){var t=this.randomOrder.indexOf(this.list.index);return t===this.randomOrder.length-1?this.randomOrder[0]:this.randomOrder[t+1]}}},{key:"skipBack",value:function(){this.list.switch(this.prevIndex())}},{key:"skipForward",value:function(){this.list.switch(this.nextIndex())}},{key:"duration",get:function(){return isNaN(this.audio.duration)?0:this.audio.duration}}],[{key:"version",get:function(){return"1.10.1"}}]),t}();e.default=g},,function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(40);var n,a=(n=i(38))&&n.__esModule?n:{default:n};console.log("\n %c APlayer v1.10.1 af84efb %c http://aplayer.js.org \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),e.default=a.default}]).default},t.exports=n()},Txg6:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),r=i("NYxO"),o=i("gyMJ"),s={props:["currSation"],name:"vchatSystemMessage",data:function(){return{IMGURL:"",visible:!1,InfoList:[],offset:1,limit:10}},sockets:{getSystemMessages:function(t){t.length&&this.$emit("NewMes",t[t.length-1]),t.forEach(function(t){t.visible=!1,t.delVisible=!1}),this.InfoList=t},takeValidate:function(t){this.$emit("NewMes",t),t.visible=!1,this.InfoList.unshift(t),"info"===t.type&&this.$store.dispatch("getUserInfo")},ValidateSuccess:function(){this.$store.dispatch("getUserInfo")}},watch:{currSation:{handler:function(t){t.id?(this.$socket.emit("setReadStatus",{roomid:t.id,name:this.user.name}),this.$store.commit("setUnRead",{roomid:t.id,clear:!0}),this.$socket.emit("getSystemMessages",{roomid:t.id,offset:this.offset,limit:this.limit})):this.InfoList=[]},deep:!0,immediate:!0}},computed:a()({},Object(r.c)(["user","Vchat"])),methods:{del:function(t){var e=this;o.a.removeMessage({_id:t._id}).then(function(i){0===i.code?(e.$message({message:"删除成功",type:"success"}),e.InfoList=e.InfoList.filter(function(e){return e._id!==t._id})):e.$message({message:"删除失败",type:"warning"})})},agree:function(t){t.userYphoto=this.user.photo,t.userYname=this.user.nickname,this.$socket.emit("agreeValidate",t),this.InfoList.forEach(function(e){e.userM!==t.userM||"validate"!==e.type||"friend"!==t.state&&"group"!==t.state||(e.status="1",e.visible=!1)})},refuse:function(t){t.userYphoto=this.user.photo,t.userYname=this.user.nickname,this.$socket.emit("refuseValidate",t),t.visible=!t.visible,t.status="2"}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"fontColor",rawName:"v-fontColor",value:t.user.chatColor,expression:"user.chatColor"}],staticClass:"vchat-system-Message"},[t.InfoList.length?i("ul",[t._l(t.InfoList,function(e){return["validate"===e.type?i("li",{key:e._id},[i("span",{staticClass:"vchat-line1 info"},[t._v(t._s("friend"===e.state?"验证消息："+e.nickname+"申请加您为好友":"验证消息："+e.nickname+"申请加入"+e.groupName))]),t._v(" "),i("span",{staticClass:"time"},[t._v(t._s(e.time))]),t._v(" "),i("el-popover",{attrs:{placement:"left",width:"400"},model:{value:e.visible,callback:function(i){t.$set(e,"visible",i)},expression:"v.visible"}},[i("div",{staticClass:"Validate-mes"},[i("div",{staticClass:"header"},[i("a",{staticClass:"vchat-photo"},[i("img",{attrs:{src:t.IMGURL+e.avatar,alt:""}})]),t._v(" "),i("p",[i("span",[t._v(t._s(e.nickname))]),t._v(" "),i("span",{staticClass:"signature"},[t._v(t._s(e.signature))])])]),t._v(" "),i("div",{staticClass:"info"},[t._v("\n                            附加消息："),i("span",[t._v(t._s(e.mes))])]),t._v(" "),"0"===e.status?i("div",{staticClass:"footer"},[i("button",{staticClass:"vchat-button-mini info",on:{click:function(i){return t.refuse(e)}}},[t._v("拒绝")]),t._v(" "),i("button",{staticClass:"vchat-button-mini",on:{click:function(i){return t.agree(e)}}},[t._v("同意")])]):i("div",{staticClass:"footer"},[i("span",{staticClass:"status"},[t._v(t._s("1"===e.status?"已同意":"已拒绝"))])])]),t._v(" "),"0"===e.status?i("span",{staticClass:"look",attrs:{slot:"reference"},slot:"reference"},[t._v("查看")]):i("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s("1"===e.status?"已同意":"已拒绝"))])]),t._v(" "),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.delVisible,callback:function(i){t.$set(e,"delVisible",i)},expression:"v.delVisible"}},[i("p",[t._v("确定删除吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.del(e)}}},[t._v("确定")])],1),t._v(" "),i("span",{staticClass:"del",attrs:{slot:"reference"},slot:"reference"},[t._v("删除")])])],1):t._e(),t._v(" "),"info"===e.type?i("li",{key:e._id},[i("p",[i("span",{staticClass:"vchat-line1 info"},[t._v(t._s(e.mes))]),t._v(" "),i("span",{staticClass:"time"},[t._v(t._s(e.time))])]),t._v(" "),i("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.delVisible,callback:function(i){t.$set(e,"delVisible",i)},expression:"v.delVisible"}},[i("p",[t._v("确定删除吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.delVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.del(e)}}},[t._v("确定")])],1),t._v(" "),i("span",{staticClass:"del",attrs:{slot:"reference"},slot:"reference"},[t._v("删除")])])],1):t._e()]})],2):i("span",[t._v("暂无系统消息！")])])},staticRenderFns:[]};var c=i("VU/8")(s,l,!1,function(t){i("xDE0")},"data-v-215fc1b4",null);e.default=c.exports},VIAY:function(t,e,i){var n;n=function(){return function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=39)}([function(t,e,i){var n=i(34)("wks"),a=i(22),r=i(1).Symbol,o="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=o&&r[t]||(o?r:a)("Symbol."+t))}).store=n},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){t.exports=!i(12)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(5),a=i(32);t.exports=i(2)?function(t,e,i){return n.f(t,e,a(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var n=i(6),a=i(54),r=i(70),o=Object.defineProperty;e.f=i(2)?Object.defineProperty:function(t,e,i){if(n(t),e=r(e,!0),n(i),a)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(4);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){var n=i(23);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,a){return t.call(e,i,n,a)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){var n=i(1),a=i(11),r=i(7),o=i(3),s=function(t,e,i){var l,c,u,d=t&s.F,h=t&s.G,p=t&s.S,f=t&s.P,m=t&s.B,v=t&s.W,y=h?a:a[e]||(a[e]={}),g=y.prototype,b=h?n:p?n[e]:(n[e]||{}).prototype;for(l in h&&(i=e),i)(c=!d&&b&&void 0!==b[l])&&l in y||(u=c?b[l]:i[l],y[l]=h&&"function"!=typeof b[l]?i[l]:m&&c?r(u,n):v&&b[l]==u?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(u):f&&"function"==typeof u?r(Function.call,u):u,f&&((y.virtual||(y.virtual={}))[l]=u,t&s.R&&g&&!g[l]&&o(g,l,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e){t.exports={}},function(t,e){var i=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=i)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(7),a=i(57),r=i(55),o=i(6),s=i(21),l=i(71),c={},u={};(e=t.exports=function(t,e,i,d,h){var p,f,m,v,y=h?function(){return t}:l(t),g=n(i,d,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(r(y)){for(p=s(t.length);p>b;b++)if((v=e?g(o(f=t[b])[0],f[1]):g(t[b]))===c||v===u)return v}else for(m=y.call(t);!(f=m.next()).done;)if((v=a(m,g,f.value,e))===c||v===u)return v}).BREAK=c,e.RETURN=u},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){"use strict";var n=i(59),a=i(8),r=i(64),o=i(3),s=i(9),l=i(10),c=i(58),u=i(17),d=i(61),h=i(0)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,i,m,v,y,g){c(i,e,m);var b,w,E,T=function(t){if(!p&&t in _)return _[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},S=e+" Iterator",A="values"==v,k=!1,_=t.prototype,L=_[h]||_["@@iterator"]||v&&_[v],x=L||T(v),R=v?A?T("entries"):x:void 0,C="Array"==e&&_.entries||L;if(C&&(E=d(C.call(new t)))!==Object.prototype&&E.next&&(u(E,S,!0),n||s(E,h)||o(E,h,f)),A&&L&&"values"!==L.name&&(k=!0,x=function(){return L.call(this)}),n&&!g||!p&&!k&&_[h]||o(_,h,x),l[e]=x,l[S]=f,v)if(b={values:A?x:T("values"),keys:y?x:T("keys"),entries:R},g)for(w in b)w in _||r(_,w,b[w]);else a(a.P+a.F*(p||k),e,b);return b}},function(t,e,i){var n=i(5).f,a=i(9),r=i(0)("toStringTag");t.exports=function(t,e,i){t&&!a(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e,i){var n=i(34)("keys"),a=i(22);t.exports=function(t){return n[t]||(n[t]=a(t))}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(28),a=i(15);t.exports=function(t){return n(a(t))}},function(t,e,i){var n=i(19),a=Math.min;t.exports=function(t){return t>0?a(n(t),9007199254740991):0}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(14),a=i(0)("toStringTag"),r="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),a))?i:r?n(e):"Object"==(o=n(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,i){var n=i(4),a=i(1).document,r=n(a)&&n(a.createElement);t.exports=function(t){return r?a.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(14);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){var n=i(22)("meta"),a=i(4),r=i(9),o=i(5).f,s=0,l=Object.isExtensible||function(){return!0},c=!i(12)(function(){return l(Object.preventExtensions({}))}),u=function(t){o(t,n,{value:{i:"O"+ ++s,w:{}}})},d=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,n)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[n].i},getWeak:function(t,e){if(!r(t,n)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[n].w},onFreeze:function(t){return c&&d.NEED&&l(t)&&!r(t,n)&&u(t),t}}},function(t,e,i){var n=i(6),a=i(60),r=i(27),o=i(18)("IE_PROTO"),s=function(){},l=function(){var t,e=i(26)("iframe"),n=r.length;for(e.style.display="none",i(53).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[r[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(s.prototype=n(t),i=new s,s.prototype=null,i[o]=t):i=l(),void 0===e?i:a(i,e)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var n=i(3);t.exports=function(t,e,i){for(var a in e)i&&t[a]?t[a]=e[a]:n(t,a,e[a]);return t}},function(t,e,i){var n=i(1),a=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return a[t]||(a[t]={})}},function(t,e,i){var n=i(15);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n=i(4);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){i(84);var n=i(82)(i(38),i(83),"data-v-2bcd502f",null);n.options.__file="/Applications/mampstack-7.0.26-1/apache2/htdocs/vdr/src/components/vue-draggable-resizable.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] vue-draggable-resizable.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(42),a=i.n(n),r=i(40);e.default={replace:!0,name:"VueDraggableResizable",props:{active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},w:{type:Number,default:200,validator:function(t){return t>0}},h:{type:Number,default:200,validator:function(t){return t>0}},minw:{type:Number,default:50,validator:function(t){return t>=0}},minh:{type:Number,default:50,validator:function(t){return t>=0}},x:{type:Number,default:0,validator:function(t){return"number"==typeof t}},y:{type:Number,default:0,validator:function(t){return"number"==typeof t}},z:{type:[String,Number],default:"auto",validator:function(t){return"string"==typeof t?"auto"===t:t>=0}},handles:{type:Array,default:function(){return["tl","tm","tr","mr","br","bm","bl","ml"]},validator:function(t){var e=new a.a(["tl","tm","tr","mr","br","bm","bl","ml"]);return new a.a(t.filter(function(t){return e.has(t)})).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:function(t){return-1!==["x","y","both"].indexOf(t)}},grid:{type:Array,default:function(){return[1,1]}},parent:{type:Boolean,default:!1},maximize:{type:Boolean,default:!1}},created:function(){this.parentX=0,this.parentW=9999,this.parentY=0,this.parentH=9999,this.mouseX=0,this.mouseY=0,this.lastMouseX=0,this.lastMouseY=0,this.mouseOffX=0,this.mouseOffY=0,this.elmX=0,this.elmY=0,this.elmW=0,this.elmH=0},mounted:function(){document.documentElement.addEventListener("mousemove",this.handleMove,!0),document.documentElement.addEventListener("mousedown",this.deselect,!0),document.documentElement.addEventListener("mouseup",this.handleUp,!0),document.documentElement.addEventListener("touchmove",this.handleMove,!0),document.documentElement.addEventListener("touchend touchcancel",this.deselect,!0),document.documentElement.addEventListener("touchstart",this.handleUp,!0),document.documentElement.addEventListener("touchstart",this.deselect,!0),this.elmX=parseInt(this.$el.style.left),this.elmY=parseInt(this.$el.style.top),this.elmW=this.$el.offsetWidth||this.$el.clientWidth,this.elmH=this.$el.offsetHeight||this.$el.clientHeight,this.reviewDimensions()},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.handleMove,!0),document.documentElement.removeEventListener("mousedown",this.deselect,!0),document.documentElement.removeEventListener("mouseup",this.handleUp,!0),document.documentElement.removeEventListener("touchmove",this.handleMove,!0),document.documentElement.removeEventListener("touchend touchcancel",this.deselect,!0),document.documentElement.removeEventListener("touchstart",this.handleUp,!0),document.documentElement.removeEventListener("touchstart",this.deselect,!0)},data:function(){return{top:this.y,left:this.x,width:this.w,height:this.h,resizing:!1,dragging:!1,enabled:this.active,handle:null,zIndex:this.z}},methods:{reviewDimensions:function(){if(this.minw>this.w&&(this.width=this.minw),this.minh>this.h&&(this.height=this.minh),this.parent){var t=parseInt(this.$el.parentNode.clientWidth,10),e=parseInt(this.$el.parentNode.clientHeight,10);this.parentW=t,this.parentH=e,this.w>this.parentW&&(this.width=t),this.h>this.parentH&&(this.height=e),this.x+this.w>this.parentW&&(this.width=t-this.x),this.y+this.h>this.parentH&&(this.height=e-this.y)}this.elmW=this.width,this.elmH=this.height,this.$emit("resizing",this.left,this.top,this.width,this.height)},elmDown:function(t){var e=t.target||t.srcElement;if(this.$el.contains(e)){if(this.dragHandle&&!i.i(r.a)(e,this.dragHandle,this.$el)||this.dragCancel&&i.i(r.a)(e,this.dragCancel,this.$el))return;this.reviewDimensions(),this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragging=!0)}},deselect:function(t){-1!==t.type.indexOf("touch")?(this.mouseX=t.changedTouches[0].clientX,this.mouseY=t.changedTouches[0].clientY):(this.mouseX=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=t.pageY||t.clientY+document.documentElement.scrollTop),this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY;var e=t.target||t.srcElement,i=new RegExp("handle-([trmbl]{2})","");this.$el.contains(e)||i.test(e.className)||this.enabled&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1))},handleDown:function(t,e){this.handle=t,e.cancelable&&(e.stopPropagation(),e.preventDefault()),this.resizing=!0},fillParent:function(t){var e=this;if(this.parent&&this.resizable&&this.maximize){var i=!1;window.requestAnimationFrame(function t(){i||window.requestAnimationFrame(t),"x"===e.axis?e.width===e.parentW&&e.left===e.parentX&&(i=!0):"y"===e.axis?e.height===e.parentH&&e.top===e.parentY&&(i=!0):"both"===e.axis&&e.width===e.parentW&&e.height===e.parentH&&e.top===e.parentY&&e.left===e.parentX&&(i=!0),"x"!==e.axis&&"both"!==e.axis||(e.width<e.parentW&&(e.width++,e.elmW++),e.left>e.parentX&&(e.left--,e.elmX--)),"y"!==e.axis&&"both"!==e.axis||(e.height<e.parentH&&(e.height++,e.elmH++),e.top>e.parentY&&(e.top--,e.elmY--)),e.$emit("resizing",e.left,e.top,e.width,e.height)})}},handleMove:function(t){var e=-1!==t.type.indexOf("touchmove");this.mouseX=e?t.touches[0].clientX:t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=e?t.touches[0].clientY:t.pageY||t.clientY+document.documentElement.scrollTop;var i=this.mouseX-this.lastMouseX+this.mouseOffX,n=this.mouseY-this.lastMouseY+this.mouseOffY;this.mouseOffX=this.mouseOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY;var a=i,r=n;this.resizing?(this.handle.indexOf("t")>=0&&(this.elmH-r<this.minh?this.mouseOffY=r-(n=this.elmH-this.minh):this.parent&&this.elmY+r<this.parentY&&(this.mouseOffY=r-(n=this.parentY-this.elmY)),this.elmY+=n,this.elmH-=n),this.handle.indexOf("b")>=0&&(this.elmH+r<this.minh?this.mouseOffY=r-(n=this.minh-this.elmH):this.parent&&this.elmY+this.elmH+r>this.parentH&&(this.mouseOffY=r-(n=this.parentH-this.elmY-this.elmH)),this.elmH+=n),this.handle.indexOf("l")>=0&&(this.elmW-a<this.minw?this.mouseOffX=a-(i=this.elmW-this.minw):this.parent&&this.elmX+a<this.parentX&&(this.mouseOffX=a-(i=this.parentX-this.elmX)),this.elmX+=i,this.elmW-=i),this.handle.indexOf("r")>=0&&(this.elmW+a<this.minw?this.mouseOffX=a-(i=this.minw-this.elmW):this.parent&&this.elmX+this.elmW+a>this.parentW&&(this.mouseOffX=a-(i=this.parentW-this.elmX-this.elmW)),this.elmW+=i),this.left=Math.round(this.elmX/this.grid[0])*this.grid[0],this.top=Math.round(this.elmY/this.grid[1])*this.grid[1],this.width=Math.round(this.elmW/this.grid[0])*this.grid[0],this.height=Math.round(this.elmH/this.grid[1])*this.grid[1],this.$emit("resizing",this.left,this.top,this.width,this.height)):this.dragging&&(this.parent&&(this.elmX+a<this.parentX?this.mouseOffX=a-(i=this.parentX-this.elmX):this.elmX+this.elmW+a>this.parentW&&(this.mouseOffX=a-(i=this.parentW-this.elmX-this.elmW)),this.elmY+r<this.parentY?this.mouseOffY=r-(n=this.parentY-this.elmY):this.elmY+this.elmH+r>this.parentH&&(this.mouseOffY=r-(n=this.parentH-this.elmY-this.elmH))),this.elmX+=i,this.elmY+=n,"x"!==this.axis&&"both"!==this.axis||(this.left=Math.round(this.elmX/this.grid[0])*this.grid[0]),"y"!==this.axis&&"both"!==this.axis||(this.top=Math.round(this.elmY/this.grid[1])*this.grid[1]),this.$emit("dragging",this.left,this.top))},handleUp:function(t){-1!==t.type.indexOf("touch")&&(this.lastMouseX=t.changedTouches[0].clientX,this.lastMouseY=t.changedTouches[0].clientY),this.handle=null,this.resizing&&(this.resizing=!1,this.$emit("resizestop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragstop",this.left,this.top)),this.elmX=this.left,this.elmY=this.top}},computed:{style:function(){return{top:this.top+"px",left:this.left+"px",width:this.width+"px",height:this.height+"px",zIndex:this.zIndex}}},watch:{active:function(t){this.enabled=t},z:function(t){(t>=0||"auto"===t)&&(this.zIndex=t)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(37),a=i.n(n);i.d(e,"default",function(){return a.a})},function(t,e,i){"use strict";e.a=function(t,e,a){var r=t,o=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(function(t){return i.i(n.a)(r[t])});if(!i.i(n.a)(r[o]))return!1;do{if(r[o](e))return!0;if(r===a)return!1;r=r.parentNode}while(r);return!1};var n=i(41)},function(t,e,i){"use strict";e.a=function(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,i){t.exports={default:i(43),__esModule:!0}},function(t,e,i){i(73),i(75),i(79),i(74),i(78),i(77),i(76),t.exports=i(11).Set},function(t,e){t.exports=function(){}},function(t,e,i){var n=i(13);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e,i){var n=i(20),a=i(21),r=i(69);t.exports=function(t){return function(e,i,o){var s,l=n(e),c=a(l.length),u=r(o,c);if(t&&i!=i){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},function(t,e,i){var n=i(7),a=i(28),r=i(35),o=i(21),s=i(49);t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,u=4==t,d=6==t,h=5==t||d,p=e||s;return function(e,s,f){for(var m,v,y=r(e),g=a(y),b=n(s,f,3),w=o(g.length),E=0,T=i?p(e,w):l?p(e,0):void 0;w>E;E++)if((h||E in g)&&(v=b(m=g[E],E,y),t))if(i)T[E]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return E;case 2:T.push(m)}else if(u)return!1;return d?-1:c||u?u:T}}},function(t,e,i){var n=i(4),a=i(56),r=i(0)("species");t.exports=function(t){var e;return a(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!a(e.prototype)||(e=void 0),n(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){var n=i(48);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){"use strict";var n=i(5).f,a=i(31),r=i(33),o=i(7),s=i(24),l=i(13),c=i(16),u=i(29),d=i(67),h=i(2),p=i(30).fastKey,f=i(36),m=h?"_s":"size",v=function(t,e){var i,n=p(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,c){var u=t(function(t,n){s(t,u,e,"_i"),t._t=e,t._i=a(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=n&&l(n,i,t[c],t)});return r(u.prototype,{clear:function(){for(var t=f(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var i=f(this,e),n=v(i,t);if(n){var a=n.n,r=n.p;delete i._i[n.i],n.r=!0,r&&(r.n=a),a&&(a.p=r),i._f==n&&(i._f=a),i._l==n&&(i._l=r),i[m]--}return!!n},forEach:function(t){f(this,e);for(var i,n=o(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!v(f(this,e),t)}}),h&&n(u.prototype,"size",{get:function(){return f(this,e)[m]}}),u},def:function(t,e,i){var n,a,r=v(t,e);return r?r.v=i:(t._l=r={i:a=p(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=r),n&&(n.n=r),t[m]++,"F"!==a&&(t._i[a]=r)),t},getEntry:v,setStrong:function(t,e,i){c(t,e,function(t,i){this._t=f(t,e),this._k=i,this._l=void 0},function(){for(var t=this,e=t._k,i=t._l;i&&i.r;)i=i.p;return t._t&&(t._l=i=i?i.n:t._t._f)?u(0,"keys"==e?i.k:"values"==e?i.v:[i.k,i.v]):(t._t=void 0,u(1))},i?"entries":"values",!i,!0),d(e)}}},function(t,e,i){var n=i(25),a=i(45);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return a(this)}}},function(t,e,i){"use strict";var n=i(1),a=i(8),r=i(30),o=i(12),s=i(3),l=i(33),c=i(13),u=i(24),d=i(4),h=i(17),p=i(5).f,f=i(47)(0),m=i(2);t.exports=function(t,e,i,v,y,g){var b=n[t],w=b,E=y?"set":"add",T=w&&w.prototype,S={};return m&&"function"==typeof w&&(g||T.forEach&&!o(function(){(new w).entries().next()}))?(w=e(function(e,i){u(e,w,t,"_c"),e._c=new b,void 0!=i&&c(i,y,e[E],e)}),f("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in T&&(!g||"clear"!=t)&&s(w.prototype,t,function(i,n){if(u(this,w,t),!e&&g&&!d(i))return"get"==t&&void 0;var a=this._c[t](0===i?0:i,n);return e?this:a})}),g||p(w.prototype,"size",{get:function(){return this._c.size}})):(w=v.getConstructor(e,t,y,E),l(w.prototype,i),r.NEED=!0),h(w,t),S[t]=w,a(a.G+a.W+a.F,S),g||v.setStrong(w,t,y),w}},function(t,e,i){var n=i(1).document;t.exports=n&&n.documentElement},function(t,e,i){t.exports=!i(2)&&!i(12)(function(){return 7!=Object.defineProperty(i(26)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(10),a=i(0)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||r[a]===t)}},function(t,e,i){var n=i(14);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(6);t.exports=function(t,e,i,a){try{return a?e(n(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&n(r.call(t)),e}}},function(t,e,i){"use strict";var n=i(31),a=i(32),r=i(17),o={};i(3)(o,i(0)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(o,{next:a(1,i)}),r(t,e+" Iterator")}},function(t,e){t.exports=!0},function(t,e,i){var n=i(5),a=i(6),r=i(63);t.exports=i(2)?Object.defineProperties:function(t,e){a(t);for(var i,o=r(e),s=o.length,l=0;s>l;)n.f(t,i=o[l++],e[i]);return t}},function(t,e,i){var n=i(9),a=i(35),r=i(18)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,i){var n=i(9),a=i(20),r=i(46)(!1),o=i(18)("IE_PROTO");t.exports=function(t,e){var i,s=a(t),l=0,c=[];for(i in s)i!=o&&n(s,i)&&c.push(i);for(;e.length>l;)n(s,i=e[l++])&&(~r(c,i)||c.push(i));return c}},function(t,e,i){var n=i(62),a=i(27);t.exports=Object.keys||function(t){return n(t,a)}},function(t,e,i){t.exports=i(3)},function(t,e,i){"use strict";var n=i(8),a=i(23),r=i(7),o=i(13);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,s,l=arguments[1];return a(this),(e=void 0!==l)&&a(l),void 0==t?new this:(i=[],e?(n=0,s=r(l,arguments[2],2),o(t,!1,function(t){i.push(s(t,n++))})):o(t,!1,i.push,i),new this(i))}})}},function(t,e,i){"use strict";var n=i(8);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,i){"use strict";var n=i(1),a=i(11),r=i(5),o=i(2),s=i(0)("species");t.exports=function(t){var e="function"==typeof a[t]?a[t]:n[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(19),a=i(15);t.exports=function(t){return function(e,i){var r,o,s=String(a(e)),l=n(i),c=s.length;return l<0||l>=c?t?"":void 0:(r=s.charCodeAt(l))<55296||r>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):r:t?s.slice(l,l+2):o-56320+(r-55296<<10)+65536}}},function(t,e,i){var n=i(19),a=Math.max,r=Math.min;t.exports=function(t,e){return(t=n(t))<0?a(t+e,0):r(t,e)}},function(t,e,i){var n=i(4);t.exports=function(t,e){if(!n(t))return t;var i,a;if(e&&"function"==typeof(i=t.toString)&&!n(a=i.call(t)))return a;if("function"==typeof(i=t.valueOf)&&!n(a=i.call(t)))return a;if(!e&&"function"==typeof(i=t.toString)&&!n(a=i.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n=i(25),a=i(0)("iterator"),r=i(10);t.exports=i(11).getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||r[n(t)]}},function(t,e,i){"use strict";var n=i(44),a=i(29),r=i(10),o=i(20);t.exports=i(16)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,a(1)):a(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(t,e){},function(t,e,i){"use strict";var n=i(50),a=i(36);t.exports=i(52)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(a(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){"use strict";var n=i(68)(!0);i(16)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){i(65)("Set")},function(t,e,i){i(66)("Set")},function(t,e,i){var n=i(8);n(n.P+n.R,"Set",{toJSON:i(51)("Set")})},function(t,e,i){i(72);for(var n=i(1),a=i(3),r=i(10),o=i(0)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=n[c],d=u&&u.prototype;d&&!d[o]&&a(d,o,c),r[c]=r.Array}},function(t,e,i){(t.exports=i(81)()).push([t.i,"\n.vdr[data-v-2bcd502f] {\n  touch-action: none;\n  position: absolute;\n  box-sizing: border-box;\n}\n.handle[data-v-2bcd502f] {\n  box-sizing: border-box;\n  display: none;\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  font-size: 1px;\n  background: #EEE;\n  border: 1px solid #333;\n}\n.handle-tl[data-v-2bcd502f] {\n  top: -10px;\n  left: -10px;\n  cursor: nw-resize;\n}\n.handle-tm[data-v-2bcd502f] {\n  top: -10px;\n  left: 50%;\n  margin-left: -5px;\n  cursor: n-resize;\n}\n.handle-tr[data-v-2bcd502f] {\n  top: -10px;\n  right: -10px;\n  cursor: ne-resize;\n}\n.handle-ml[data-v-2bcd502f] {\n  top: 50%;\n  margin-top: -5px;\n  left: -10px;\n  cursor: w-resize;\n}\n.handle-mr[data-v-2bcd502f] {\n  top: 50%;\n  margin-top: -5px;\n  right: -10px;\n  cursor: e-resize;\n}\n.handle-bl[data-v-2bcd502f] {\n  bottom: -10px;\n  left: -10px;\n  cursor: sw-resize;\n}\n.handle-bm[data-v-2bcd502f] {\n  bottom: -10px;\n  left: 50%;\n  margin-left: -5px;\n  cursor: s-resize;\n}\n.handle-br[data-v-2bcd502f] {\n  bottom: -10px;\n  right: -10px;\n  cursor: se-resize;\n}\n@media only screen and (max-width: 768px) {\n  /* For mobile phones: */\n[class*=\"handle-\"][data-v-2bcd502f]:before {\n    content: '';\n    left: -10px;\n    right: -10px;\n    bottom: -10px;\n    top: -10px;\n    position: absolute;\n}\n}\n",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},a=0;a<this.length;a++){var r=this[a][0];"number"==typeof r&&(n[r]=!0)}for(a=0;a<e.length;a++){var o=e[a];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},function(t,e){t.exports=function(t,e,i,n){var a,r=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(a=t,r=t.default);var s="function"==typeof r?r.options:r;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),i&&(s._scopeId=i),n){var l=Object.create(s.computed||null);Object.keys(n).forEach(function(t){var e=n[t];l[t]=function(){return e}}),s.computed=l}return{esModule:a,exports:r,options:s}}},function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vdr",class:{draggable:t.draggable,resizable:t.resizable,active:t.enabled,dragging:t.dragging,resizing:t.resizing},style:t.style,on:{mousedown:t.elmDown,touchstart:t.elmDown,dblclick:t.fillParent}},[t._l(t.handles,function(e){return t.resizable?i("div",{key:e,staticClass:"handle",class:"handle-"+e,style:{display:t.enabled?"block":"none"},on:{mousedown:function(i){t.handleDown(e,i)},touchstart:function(i){t.handleDown(e,i)}}}):t._e()}),t._v(" "),t._t("default")],2)},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,i){var n=i(80);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),i(85)("4764308c",n,!1)},function(t,e,i){function n(t){for(var e=0;e<t.length;e++){var i=t[e],n=c[i.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](i.parts[a]);for(;a<i.parts.length;a++)n.parts.push(r(i.parts[a]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(a=0;a<i.parts.length;a++)o.push(r(i.parts[a]));c[i.id]={id:i.id,refs:1,parts:o}}}}function a(){var t=document.createElement("style");return t.type="text/css",u.appendChild(t),t}function r(t){var e,i,n=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(n){if(p)return f;n.parentNode.removeChild(n)}if(m){var r=h++;n=d||(d=a()),e=o.bind(null,n,r,!1),i=o.bind(null,n,r,!0)}else n=a(),e=function(t,e){var i=e.css,n=e.media,a=e.sourceMap;if(n&&t.setAttribute("media",n),a&&(i+="\n/*# sourceURL="+a.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}function o(t,e,i,n){var a=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=v(e,a);else{var r=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=i(86),c={},u=s&&(document.head||document.getElementsByTagName("head")[0]),d=null,h=0,p=!1,f=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,i){p=i;var a=l(t,e);return n(a),function(e){for(var i=[],r=0;r<a.length;r++){var o=a[r];(s=c[o.id]).refs--,i.push(s)}e?n(a=l(t,e)):a=[];for(r=0;r<i.length;r++){var s;if(0===(s=i[r]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete c[s.id]}}}};var v=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e){for(var i=[],n={},a=0;a<e.length;a++){var r=e[a],o=r[0],s={id:t+":"+a,css:r[1],media:r[2],sourceMap:r[3]};n[o]?n[o].parts.push(s):i.push(n[o]={id:o,parts:[s]})}return i}}])},t.exports=n()},VqTw:function(t,e){},XHO7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={props:["chatList"],name:"vMessage",data:function(){return{IMG_URL:""}},watch:{chatList:function(){var t=this;this.$nextTick(function(e){setTimeout(function(e){t.$emit("chatLoading"),t.$refs.msglist.scrollTop=t.$refs.msglist.scrollHeight+200},200)})}},components:{messageItem:i("a38v").default},methods:{lookPhoto:function(t){this.$emit("lookPhoto",t)}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{ref:"msglist",staticClass:"vchat-message"},[t.chatList.length>50?i("li",{staticStyle:{fontSize:"12px"}},[t._v("更多消息请在聊天记录中查看")]):t._e(),t._v(" "),t._l(t.chatList,function(e,n){return i("li",{key:n,class:[{org:"org"===e.type}]},["other"===e.type?[i("message-item",{staticClass:"other",attrs:{type:"other",v:e},on:{lookPhoto:t.lookPhoto}})]:t._e(),t._v(" "),"mine"===e.type?[i("message-item",{staticClass:"mine",attrs:{type:"mine",v:e},on:{lookPhoto:t.lookPhoto}})]:t._e(),t._v(" "),"org"===e.type?[t._v("\n            系统消息："),i("span",[t._v(t._s(e.nickname))]),t._v("加入群聊！\n        ")]:t._e()],2)})],2)},staticRenderFns:[]};var r=i("VU/8")(n,a,!1,function(t){i("kIu4")},"data-v-7534d12e",null);e.default=r.exports},XOnc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={props:{back:{default:""},title:{type:String,default:""},bgColor:{type:String,default:"#27cac7"}},data:function(){return{}},methods:{goBack:function(){console.log(111111111111),this.$store.dispatch("setTransitionName"),"-1"===this.back?this.$router.go(-1):this.$router.push(this.back)}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h3",{staticClass:"vchat-apheader",style:{backgroundColor:t.bgColor}},[t.back?i("a",[i("v-icon",{attrs:{name:"fanhui",cursor:"pointer",color:"#fff"},on:{clickIcon:t.goBack}})],1):t._e(),t._v(" "),t.title?i("span",[t._v(t._s(t.title))]):t._e(),t._v(" "),i("div",{staticClass:"icon-slot"},[t._t("default")],2)])},staticRenderFns:[]};var r=i("VU/8")(n,a,!1,function(t){i("VqTw")},"data-v-87197674",null);e.default=r.exports},XUMn:function(t,e){},YJwn:function(t,e){},"YT+p":function(t,e,i){var n;"undefined"!=typeof window&&(n=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=11)}([function(t,e,i){"use strict";i.d(e,"a",function(){return u}),i.d(e,"b",function(){return d});var n=i(4),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function r(){}var o={trace:r,debug:r,log:r,warn:r,info:r,error:r},s=o;var l=Object(n.a)();function c(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];i.forEach(function(e){s[e]=t[e]?t[e].bind(t):function(t){var e=l.console[t];return e?function(){for(var i=arguments.length,n=Array(i),a=0;a<i;a++)n[a]=arguments[a];n[0]&&(n[0]=function(t,e){return e="["+t+"] > "+e}(t,n[0])),e.apply(l.console,n)}:r}(e)})}var u=function(t){if(!0===t||"object"===(void 0===t?"undefined":a(t))){c(t,"debug","log","info","warn","error");try{s.log()}catch(t){s=o}}else s=o},d=s},function(t,e,i){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return a});var n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},a={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},function(t,e,i){"use strict";e.a=function(){return"undefined"==typeof window?self:window}},function(t,e,i){var n,a,r,o,s;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/;?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.alwaysNormalize)return t;var n=this.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var r=this.parseURL(e);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=s.normalizePath(r.path),s.buildURLFromParts(r)):e;var o=this.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=a.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(c.netLoc=o.netLoc,"/"!==r.path[0]))if(r.path){var u=o.path,d=u.substring(0,u.lastIndexOf("/")+1)+r.path;c.path=s.normalizePath(d)}else c.path=o.path,r.params||(c.params=o.params,r.query||(c.query=o.query));return null===c.path&&(c.path=i.alwaysNormalize?s.normalizePath(r.path):r.path),s.buildURLFromParts(c)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s},function(t,e,i){"use strict";i.d(e,"b",function(){return a});var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,i){for(var n=i,a=0;t.isHeader(e,i);){a+=10,a+=t._readSize(e,i+6),t.isFooter(e,i+10)&&(a+=10),i+=a}if(a>0)return e.subarray(n,n+a)},t._readSize=function(t,e){var i=0;return i=(127&t[e])<<21,i|=(127&t[e+1])<<14,i|=(127&t[e+2])<<7,i|=127&t[e+3]},t.getTimeStamp=function(e){for(var i=t.getID3Frames(e),n=0;n<i.length;n++){var a=i[n];if(t.isTimeStampFrame(a))return t._readTimeStamp(a)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var i=String.fromCharCode(e[0],e[1],e[2],e[3]),n=t._readSize(e,4);return{type:i,size:n,data:e.subarray(10,10+n)}},t.getID3Frames=function(e){for(var i=0,n=[];t.isHeader(e,i);){for(var a=t._readSize(e,i+6),r=(i+=10)+a;i+8<r;){var o=t._getFrameData(e.subarray(i)),s=t._decodeFrame(o);s&&n.push(s),i+=o.size+10}t.isFooter(e,i)&&(i+=10)}return n},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),i=1&e[3],n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,i&&(n+=47721858.84),Math.round(n)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var i=t._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(i.length+1));return{key:e.type,info:i,data:n.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var i=1,n=t._utf8ArrayToStr(e.data.subarray(i));i+=n.length+1;var a=t._utf8ArrayToStr(e.data.subarray(i));return{key:e.type,info:n,data:a}}var r=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:r}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var i=1,n=t._utf8ArrayToStr(e.data.subarray(i));i+=n.length+1;var a=t._utf8ArrayToStr(e.data.subarray(i));return{key:e.type,info:n,data:a}}var r=t._utf8ArrayToStr(e.data);return{key:e.type,data:r}},t._utf8ArrayToStr=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.length,n=void 0,a=void 0,r=void 0,o="",s=0;s<i;){if(0===(n=t[s++])&&e)return o;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(n);break;case 12:case 13:a=t[s++],o+=String.fromCharCode((31&n)<<6|63&a);break;case 14:a=t[s++],r=t[s++],o+=String.fromCharCode((15&n)<<12|(63&a)<<6|(63&r)<<0)}}return o},t}(),a=n._utf8ArrayToStr;e.a=n},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,o,s,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(r(i=this._events[t]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(a(i))for(s=Array.prototype.slice.call(arguments,1),o=(c=i.slice()).length,l=0;l<o;l++)c[l].apply(this,s);return!0},i.prototype.addListener=function(t,e){var o;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(o=r(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var i=!1;function a(){this.removeListener(t,a),i||(i=!0,e.apply(this,arguments))}return a.listener=e,this.on(t,a),this},i.prototype.removeListener=function(t,e){var i,r,o,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(i=this._events[t]).length,r=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(i)){for(s=o;s-- >0;)if(i[s]===e||i[s].listener&&i[s].listener===e){r=s;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){"use strict";var n=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subtle=e,this.aesIV=i}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}();var a=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subtle=e,this.key=i}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),i=new Uint32Array(4),n=0;n<4;n++)i[n]=e.getUint32(4*n);return i},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,i=this.subMix,n=i[0],a=i[1],r=i[2],o=i[3],s=this.invSubMix,l=s[0],c=s[1],u=s[2],d=s[3],h=new Uint32Array(256),p=0,f=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var v=f^f<<1^f<<2^f<<3^f<<4;v=v>>>8^255&v^99,t[p]=v,e[v]=p;var y=h[p],g=h[y],b=h[g],w=257*h[v]^16843008*v;n[p]=w<<24|w>>>8,a[p]=w<<16|w>>>16,r[p]=w<<8|w>>>24,o[p]=w,w=16843009*b^65537*g^257*y^16843008*p,l[v]=w<<24|w>>>8,c[v]=w<<16|w>>>16,u[v]=w<<8|w>>>24,d[v]=w,p?(p=y^h[h[h[b^y]]],f^=h[h[f]]):p=f=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),i=!0,n=0;n<e.length&&i;)i=e[n]===this.key[n],n++;if(!i){this.key=e;var a=this.keySize=e.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var r=this.ksRows=4*(a+6+1),o=void 0,s=void 0,l=this.keySchedule=new Uint32Array(r),c=this.invKeySchedule=new Uint32Array(r),u=this.sBox,d=this.rcon,h=this.invSubMix,p=h[0],f=h[1],m=h[2],v=h[3],y=void 0,g=void 0;for(o=0;o<r;o++)o<a?y=l[o]=e[o]:(g=y,o%a==0?(g=u[(g=g<<8|g>>>24)>>>24]<<24|u[g>>>16&255]<<16|u[g>>>8&255]<<8|u[255&g],g^=d[o/a|0]<<24):a>6&&o%a==4&&(g=u[g>>>24]<<24|u[g>>>16&255]<<16|u[g>>>8&255]<<8|u[255&g]),l[o]=y=(l[o-a]^g)>>>0);for(s=0;s<r;s++)o=r-s,g=3&s?l[o]:l[o-4],c[s]=s<4||o<=4?g:p[u[g>>>24]]^f[u[g>>>16&255]]^m[u[g>>>8&255]]^v[u[255&g]],c[s]=c[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,i,n){for(var a,r,o,s=this.keySize+6,l=this.invKeySchedule,c=this.invSBox,u=this.invSubMix,d=u[0],h=u[1],p=u[2],f=u[3],m=this.uint8ArrayToUint32Array_(i),v=m[0],y=m[1],g=m[2],b=m[3],w=new Int32Array(t),E=new Int32Array(w.length),T=void 0,S=void 0,A=void 0,k=void 0,_=void 0,L=void 0,x=void 0,R=void 0,C=void 0,D=void 0,O=void 0,I=void 0,M=void 0,P=void 0,F=this.networkToHostOrderSwap;e<w.length;){for(C=F(w[e]),D=F(w[e+1]),O=F(w[e+2]),I=F(w[e+3]),_=C^l[0],L=I^l[1],x=O^l[2],R=D^l[3],M=4,P=1;P<s;P++)T=d[_>>>24]^h[L>>16&255]^p[x>>8&255]^f[255&R]^l[M],S=d[L>>>24]^h[x>>16&255]^p[R>>8&255]^f[255&_]^l[M+1],A=d[x>>>24]^h[R>>16&255]^p[_>>8&255]^f[255&L]^l[M+2],k=d[R>>>24]^h[_>>16&255]^p[L>>8&255]^f[255&x]^l[M+3],_=T,L=S,x=A,R=k,M+=4;T=c[_>>>24]<<24^c[L>>16&255]<<16^c[x>>8&255]<<8^c[255&R]^l[M],S=c[L>>>24]<<24^c[x>>16&255]<<16^c[R>>8&255]<<8^c[255&_]^l[M+1],A=c[x>>>24]<<24^c[R>>16&255]<<16^c[_>>8&255]<<8^c[255&L]^l[M+2],k=c[R>>>24]<<24^c[_>>16&255]<<16^c[L>>8&255]<<8^c[255&x]^l[M+3],M+=3,E[e]=F(T^v),E[e+1]=F(k^y),E[e+2]=F(A^g),E[e+3]=F(S^b),v=C,y=D,g=O,b=I,e+=4}return n?(a=E.buffer,r=a.byteLength,(o=r&&new DataView(a).getUint8(r-1))?a.slice(0,r-o):a):E.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=i(2),s=i(0),l=i(1),c=i(4);var u=Object(c.a)(),d=function(){function t(e,i){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).removePKCS7Padding,a=void 0===n||n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logEnabled=!0,this.observer=e,this.config=i,this.removePKCS7Padding=a,a)try{var r=u.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,i,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.b.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new r),c.expandKey(e),o(c.decrypt(t,0,i,this.removePKCS7Padding))}else{this.logEnabled&&(s.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new a(u,e)),this.fastAesKey.expandKey().then(function(a){new n(u,i).decrypt(t,a).catch(function(n){l.onWebCryptoError(n,t,e,i,o)}).then(function(t){o(t)})}).catch(function(n){l.onWebCryptoError(n,t,e,i,o)})}},t.prototype.onWebCryptoError=function(t,e,i,n,a){this.config.enableSoftwareAES?(s.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,i,n,a)):(s.b.error("decrypting error : "+t.message),this.observer.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.a=d},function(t,e,i){"use strict";var n=i(0),a=i(1);var r=Math.pow(2,32)-1,o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.remuxer=i}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,i,n,r){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==i&&(i="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:i+","+n,initSegment:r?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:i,initSegment:r?e:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:r?e:null})),this.observer.trigger(a.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else i&&(this.audioCodec=i),n&&(this.videoCodec=n)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var i=t[e]<<8|t[e+1];return i<0?65536+i:i},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var i=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return i<0?4294967296+i:i},t.writeUint32=function(t,e,i){t.data&&(e+=t.start,t=t.data),t[e]=i>>24,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i},t.findBox=function(e,i){var n=[],a=void 0,r=void 0,o=void 0,s=void 0,l=void 0,c=void 0,u=void 0;if(e.data?(c=e.start,s=e.end,e=e.data):(c=0,s=e.byteLength),!i.length)return null;for(a=c;a<s;)r=t.readUint32(e,a),o=t.bin2str(e.subarray(a+4,a+8)),u=r>1?a+r:s,o===i[0]&&(1===i.length?n.push({data:e,start:a+8,end:u}):(l=t.findBox({data:e,start:a+8,end:u},i.slice(1))).length&&(n=n.concat(l))),a=u;return n},t.parseSegmentIndex=function(e){var i=t.findBox(e,["moov"])[0],n=i?i.end:null,a=0,r=t.findBox(e,["sidx"]),o=void 0;if(!r||!r[0])return null;o=[];var s=(r=r[0]).data[0];a=0===s?8:16;var l=t.readUint32(r,a);a+=4;a+=0===s?8:16,a+=2;var c=r.end+0,u=t.readUint16(r,a);a+=2;for(var d=0;d<u;d++){var h=a,p=t.readUint32(r,h);h+=4;var f=2147483647&p;if(1===(2147483648&p)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var m=t.readUint32(r,h);h+=4,o.push({referenceSize:f,subsegmentDuration:m,info:{duration:m/l,start:c,end:c+f-1}}),c+=f,a=h+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:u,references:o,moovEndOffset:n}},t.parseInitSegment=function(e){var i=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var a=t.findBox(e,["tkhd"])[0];if(a){var r=a.data[a.start],o=0===r?12:20,s=t.readUint32(a,o),l=t.findBox(e,["mdia","mdhd"])[0];if(l){o=0===(r=l.data[l.start])?12:20;var c=t.readUint32(l,o),u=t.findBox(e,["mdia","hdlr"])[0];if(u){var d={soun:"audio",vide:"video"}[t.bin2str(u.data.subarray(u.start+8,u.start+12))];if(d){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var p=t.bin2str(h.data.subarray(h.start+12,h.start+16));n.b.log("MP4Demuxer:"+d+":"+p+" found")}i[s]={timescale:c,type:d},i[d]={timescale:c,id:s}}}}}}),i},t.getStartDTS=function(e,i){var n,a,r=void 0;return r=t.findBox(i,["moof","traf"]),n=[].concat.apply([],r.map(function(i){return t.findBox(i,["tfhd"]).map(function(n){var a,r;return a=t.readUint32(n,4),r=e[a].timescale||9e4,t.findBox(i,["tfdt"]).map(function(e){var i,n=void 0;return i=e.data[e.start],n=t.readUint32(e,4),1===i&&(n*=Math.pow(2,32),n+=t.readUint32(e,8)),n})[0]/r})})),a=Math.min.apply(null,n),isFinite(a)?a:0},t.offsetStartDTS=function(e,i,n){t.findBox(i,["moof","traf"]).map(function(i){return t.findBox(i,["tfhd"]).map(function(a){var o=t.readUint32(a,4),s=e[o].timescale||9e4;t.findBox(i,["tfdt"]).map(function(e){var i=e.data[e.start],a=t.readUint32(e,4);if(0===i)t.writeUint32(e,4,a-n*s);else{a*=Math.pow(2,32),a+=t.readUint32(e,8),a-=n*s,a=Math.max(a,0);var o=Math.floor(a/(r+1)),l=Math.floor(a%(r+1));t.writeUint32(e,4,o),t.writeUint32(e,8,l)}})})})},t.prototype.append=function(e,i,n,r){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var c=t.getStartDTS(o,e);this.initPTS=l=c-i,this.observer.trigger(a.a.INIT_PTS_FOUND,{initPTS:l})}t.offsetStartDTS(o,e,l),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,n,r,e)},t.prototype.destroy=function(){},t}();e.a=o},function(t,e,i){"use strict";var n=i(1),a=i(2),r=i(8),o=i(3),s=i(0),l=i(4);function c(t,e){return 255===t[e]&&240==(246&t[e+1])}function u(t,e){return 1&t[e+1]?7:9}function d(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function h(t,e){return!!(e+1<t.length&&c(t,e))}function p(t,e){if(e+1<t.length&&c(t,e)){var i=u(t,e);e+5<t.length&&(i=d(t,e));var n=e+i;if(n===t.length||n+1<t.length&&c(t,n))return!0}return!1}function f(t,e,i,r,o){if(!t.samplerate){var l=function(t,e,i,r){var o,l=void 0,c=void 0,u=void 0,d=void 0,h=navigator.userAgent.toLowerCase(),p=r,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(l=1+((192&e[i+2])>>>6),!((o=(60&e[i+2])>>>2)>f.length-1))return u=(1&e[i+2])<<2,u|=(192&e[i+3])>>>6,s.b.log("manifest codec:"+r+",ADTS data:type:"+l+",sampleingIndex:"+o+"["+f[o]+"Hz],channelConfig:"+u),/firefox/i.test(h)?o>=6?(l=5,d=new Array(4),c=o-3):(l=2,d=new Array(2),c=o):-1!==h.indexOf("android")?(l=2,d=new Array(2),c=o):(l=5,d=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&o>=6?c=o-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(o>=6&&1===u||/vivaldi/i.test(h))||!r&&1===u)&&(l=2,d=new Array(2)),c=o)),d[0]=l<<3,d[0]|=(14&o)>>1,d[1]|=(1&o)<<7,d[1]|=u<<3,5===l&&(d[1]|=(14&c)>>1,d[2]=(1&c)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:f[o],channelCount:u,codec:"mp4a.40."+l,manifestCodec:p};t.trigger(n.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o})}(e,i,r,o);t.config=l.config,t.samplerate=l.samplerate,t.channelCount=l.channelCount,t.codec=l.codec,t.manifestCodec=l.manifestCodec,s.b.log("parsed codec:"+t.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function m(t){return 9216e4/t}function v(t,e,i,n,a){var r=function(t,e,i,n,a){var r,o=void 0,s=t.length;if(r=u(t,e),o=d(t,e),(o-=r)>0&&e+r+o<=s)return{headerLength:r,frameLength:o,stamp:i+n*a}}(e,i,n,a,m(t.samplerate));if(r){var o=r.stamp,s=r.headerLength,l=r.frameLength,c={unit:e.subarray(i+s,i+s+l),pts:o,dts:o};return t.samples.push(c),t.len+=l,{sample:c,length:l+s}}}var y=i(6);var g=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.config=n,this.remuxer=i}return t.prototype.resetInitSegment=function(t,e,i,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(y.a.getID3Data(t,0)||[]).length,i=t.length;e<i;e++)if(p(t,e))return s.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,i,n){for(var a=this._audioTrack,r=y.a.getID3Data(t,0)||[],l=y.a.getTimeStamp(r),c=Object(o.a)(l)?90*l:9e4*e,u=0,d=c,p=t.length,m=r.length,g=[{pts:d,dts:d,data:r}];m<p-1;)if(h(t,m)&&m+5<p){f(a,this.observer,t,m,a.manifestCodec);var b=v(a,t,m,c,u);if(!b){s.b.log("Unable to parse AAC frame");break}m+=b.length,d=b.sample.pts,u++}else y.a.isHeader(t,m)?(r=y.a.getID3Data(t,m),g.push({pts:d,dts:d,data:r}),m+=r.length):m++;this.remuxer.remux(a,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},e,i,n)},t.prototype.destroy=function(){},t}(),b=i(9),w={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,i,n,a){if(!(i+24>e.length)){var r=this.parseHeader(e,i);if(r&&i+r.frameLength<=e.length){var o=n+a*(9e4*r.samplesPerFrame/r.sampleRate),s={unit:e.subarray(i,i+r.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(s),t.len+=r.frameLength,{sample:s,length:r.frameLength}}}},parseHeader:function(t,e){var i=t[e+1]>>3&3,n=t[e+1]>>1&3,a=t[e+2]>>4&15,r=t[e+2]>>2&3,o=t[e+2]>>1&1;if(1!==i&&0!==a&&15!==a&&3!==r){var s=3===i?3-n:3===n?3:4,l=1e3*w.BitratesMap[14*s+a-1],c=3===i?0:2===i?1:2,u=w.SamplingRateMap[3*c+r],d=t[e+3]>>6==3?1:2,h=w.SamplesCoefficients[i][n],p=w.BytesInSlot[n],f=8*h*p;return{sampleRate:u,channelCount:d,frameLength:parseInt(h*l/u+o,10)*p,samplesPerFrame:f}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var i=this.parseHeader(t,e),n=4;i&&i.frameLength&&(n=i.frameLength);var a=e+n;if(a===t.length||a+1<t.length&&this.isHeaderPattern(t,a))return!0}return!1}},E=w;var T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,i=t.byteLength-e,n=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");n.set(t.subarray(i,i+a)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},t.prototype.skipBits=function(t){var e=void 0;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),i=this.word>>>32-e;return t>32&&s.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?i<<e|this.readBits(e):i},t.prototype.skipLZ=function(){var t=void 0;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e=8,i=8,n=void 0;for(n=0;n<t;n++)0!==i&&(i=(e+this.readEG()+256)%256),e=0===i?e:i},t.prototype.readSPS=function(){var t,e,i,n,a=0,r=0,o=0,s=0,l=void 0,c=void 0,u=void 0,d=this.readUByte.bind(this),h=this.readBits.bind(this),p=this.readUEG.bind(this),f=this.readBoolean.bind(this),m=this.skipBits.bind(this),v=this.skipEG.bind(this),y=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);if(d(),t=d(),h(5),m(3),d(),y(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=p();if(3===b&&m(1),y(),y(),m(1),f())for(c=3!==b?8:12,u=0;u<c;u++)f()&&g(u<6?16:64)}y();var w=p();if(0===w)p();else if(1===w)for(m(1),v(),v(),l=p(),u=0;u<l;u++)v();y(),m(1),e=p(),i=p(),0===(n=h(1))&&m(1),m(1),f()&&(a=p(),r=p(),o=p(),s=p());var E=[1,1];if(f()&&f())switch(d()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(e+1)-2*a-2*r),height:(2-n)*(i+1)*16-(n?2:4)*(o+s),pixelRatio:E}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}();var S=function(){function t(e,i,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.decryptdata=n,this.discardEPB=a,this.decrypter=new r.a(e,i,{removePKCS7Padding:!1})}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,i,n){var a=t[e].unit,r=a.subarray(16,a.length-a.length%16),o=r.buffer.slice(r.byteOffset,r.byteOffset+r.length),s=this;this.decryptBuffer(o,function(r){r=new Uint8Array(r),a.set(r,16),n||s.decryptAacSamples(t,e+1,i)})},t.prototype.decryptAacSamples=function(t,e,i){for(;;e++){if(e>=t.length)return void i();if(!(t[e].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(t,e,i,n),!n)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,i=new Int8Array(e),n=0,a=32;a<=t.length-16;a+=160,n+=16)i.set(t.subarray(a,a+16),n);return i},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var i=0,n=32;n<=t.length-16;n+=160,i+=16)t.set(e.subarray(i,i+16),n);return t},t.prototype.decryptAvcSample=function(t,e,i,n,a,r){var o=this.discardEPB(a.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){a.data=l.getAvcDecryptedUnit(o,s),r||l.decryptAvcSamples(t,e,i+1,n)})},t.prototype.decryptAvcSamples=function(t,e,i,n){for(;;e++,i=0){if(e>=t.length)return void n();for(var a=t[e].units;!(i>=a.length);i++){var r=a[i];if(!(r.length<=48||1!==r.type&&5!==r.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,i,n,r,o),!o)return}}}},t}();var A={video:1,audio:2,id3:3,text:4},k=function(){function t(e,i,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.config=n,this.typeSupported=a,this.remuxer=i,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new S(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var i=t._syncOffset(e);return!(i<0)&&(i&&s.b.warn("MPEG2-TS detected but first sync word found @ offset "+i+", junk ahead ?"),!0)},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),i=0;i<e;){if(71===t[i]&&71===t[i+188]&&71===t[i+376])return i;i++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:A[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,i,n,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",a),this._audioTrack=t.createTrack("audio",a),this._id3Track=t.createTrack("id3",a),this._txtTrack=t.createTrack("text",a),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=i,this.videoCodec=n,this._duration=a},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,i,r,o){var l=void 0,c=e.length,u=void 0,d=void 0,h=void 0,p=void 0,f=!1;this.contiguous=r;var m=this.pmtParsed,v=this._avcTrack,y=this._audioTrack,g=this._id3Track,b=v.pid,w=y.pid,E=g.pid,T=this._pmtId,S=v.pesData,A=y.pesData,k=g.pesData,_=this._parsePAT,L=this._parsePMT,x=this._parsePES,R=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),I=t._syncOffset(e);for(c-=(c+I)%188,l=I;l<c;l+=188)if(71===e[l]){if(u=!!(64&e[l+1]),d=((31&e[l+1])<<8)+e[l+2],(48&e[l+3])>>4>1){if((h=l+5+e[l+4])===l+188)continue}else h=l+4;switch(d){case b:u&&(S&&(p=x(S))&&void 0!==p.pts&&R(p,!1),S={data:[],size:0}),S&&(S.data.push(e.subarray(h,l+188)),S.size+=l+188-h);break;case w:u&&(A&&(p=x(A))&&void 0!==p.pts&&(y.isAAC?C(p):D(p)),A={data:[],size:0}),A&&(A.data.push(e.subarray(h,l+188)),A.size+=l+188-h);break;case E:u&&(k&&(p=x(k))&&void 0!==p.pts&&O(p),k={data:[],size:0}),k&&(k.data.push(e.subarray(h,l+188)),k.size+=l+188-h);break;case 0:u&&(h+=e[h]+1),T=this._pmtId=_(e,h);break;case T:u&&(h+=e[h]+1);var M=L(e,h,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=M.avc)>0&&(v.pid=b),(w=M.audio)>0&&(y.pid=w,y.isAAC=M.isAAC),(E=M.id3)>0&&(g.pid=E),f&&!m&&(s.b.log("reparse from beginning"),f=!1,l=I-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(n.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(p=x(S))&&void 0!==p.pts?(R(p,!0),v.pesData=null):v.pesData=S,A&&(p=x(A))&&void 0!==p.pts?(y.isAAC?C(p):D(p),y.pesData=null):(A&&A.size&&s.b.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=A),k&&(p=x(k))&&void 0!==p.pts?(O(p),g.pesData=null):g.pesData=k,null==this.sampleAes?this.remuxer.remux(y,v,g,this._txtTrack,i,r,o):this.decryptAndRemux(y,v,g,this._txtTrack,i,r,o)},t.prototype.decryptAndRemux=function(t,e,i,n,a,r,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,i,n,a,r,o)})}else this.decryptAndRemuxAvc(t,e,i,n,a,r,o)},t.prototype.decryptAndRemuxAvc=function(t,e,i,n,a,r,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,i,n,a,r,o)})}else this.remuxer.remux(t,e,i,n,a,r,o)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,i,n){var a,r=void 0,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<a;){switch(r=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){s.b.log("unkown stream type:"+t[e]);break}case 15:-1===o.audio&&(o.audio=r);break;case 21:-1===o.id3&&(o.id3=r);break;case 219:if(!n){s.b.log("unkown stream type:"+t[e]);break}case 27:-1===o.avc&&(o.avc=r);break;case 3:case 4:i?-1===o.audio&&(o.audio=r,o.isAAC=!1):s.b.log("MPEG audio found, not supported in this browser for now");break;case 36:s.b.warn("HEVC stream type found, not supported for now");break;default:s.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return o},t.prototype._parsePES=function(t){var e=0,i=void 0,n=void 0,a=void 0,r=void 0,o=void 0,l=void 0,c=void 0,u=void 0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(1===((i=d[0])[0]<<16)+(i[1]<<8)+i[2]){if((a=(i[4]<<8)+i[5])&&a>t.size-6)return null;192&(n=i[7])&&((l=536870912*(14&i[9])+4194304*(255&i[10])+16384*(254&i[11])+128*(255&i[12])+(254&i[13])/2)>4294967295&&(l-=8589934592),64&n?((c=536870912*(14&i[14])+4194304*(255&i[15])+16384*(254&i[16])+128*(255&i[17])+(254&i[18])/2)>4294967295&&(c-=8589934592),l-c>54e5&&(s.b.warn(Math.round((l-c)/9e4)+"s delta between PTS and DTS, align them"),l=c)):c=l),u=(r=i[8])+9,t.size-=u,o=new Uint8Array(t.size);for(var p=0,f=d.length;p<f;p++){var m=(i=d[p]).byteLength;if(u){if(u>m){u-=m;continue}i=i.subarray(u),m-=u,u=0}o.set(i,e),e+=m}return a&&(a-=r+3),{data:o,pts:l,dts:c,len:a}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var i=e.samples,n=i.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(n||this.contiguous)?(t.id=n,i.push(t)):e.dropped++}t.debug.length&&s.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var i=this,n=this._avcTrack,a=this._parseAVCNALu(t.data),r=void 0,o=this.avcSample,s=void 0,l=!1,c=void 0,u=this.pushAccesUnit.bind(this),d=function(t,e,i,n){return{key:t,pts:e,dts:i,units:[],debug:n}};t.data=null,o&&a.length&&!n.audFound&&(u(o,n),o=this.avcSample=d(!1,t.pts,t.dts,"")),a.forEach(function(e){switch(e.type){case 1:s=!0,o||(o=i.avcSample=d(!0,t.pts,t.dts,"")),o.frame=!0;var a=e.data;if(l&&a.length>4){var h=new T(a).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(o.key=!0)}break;case 5:s=!0,o||(o=i.avcSample=d(!0,t.pts,t.dts,"")),o.key=!0,o.frame=!0;break;case 6:s=!0,(r=new T(i.discardEPB(e.data))).readUByte();for(var p=0,f=0,m=!1,v=0;!m&&r.bytesAvailable>1;){p=0;do{p+=v=r.readUByte()}while(255===v);f=0;do{f+=v=r.readUByte()}while(255===v);if(4===p&&0!==r.bytesAvailable){if(m=!0,181===r.readUByte())if(49===r.readUShort())if(1195456820===r.readUInt())if(3===r.readUByte()){var y=r.readUByte(),g=31&y,b=[y,r.readUByte()];for(c=0;c<g;c++)b.push(r.readUByte()),b.push(r.readUByte()),b.push(r.readUByte());i._insertSampleInOrder(i._txtTrack.samples,{type:3,pts:t.pts,bytes:b})}}else if(f<r.bytesAvailable)for(c=0;c<f;c++)r.readUByte()}break;case 7:if(s=!0,l=!0,!n.sps){var w=(r=new T(e.data)).readSPS();n.width=w.width,n.height=w.height,n.pixelRatio=w.pixelRatio,n.sps=[e.data],n.duration=i._duration;var E=e.data.subarray(1,4),S="avc1.";for(c=0;c<3;c++){var A=E[c].toString(16);A.length<2&&(A="0"+A),S+=A}n.codec=S}break;case 8:s=!0,n.pps||(n.pps=[e.data]);break;case 9:s=!1,n.audFound=!0,o&&u(o,n),o=i.avcSample=d(!1,t.pts,t.dts,"");break;case 12:s=!1;break;default:s=!1,o&&(o.debug+="unknown NAL "+e.type+" ")}o&&s&&o.units.push(e)}),e&&o&&(u(o,n),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var i=t.length;if(i>0){if(e.pts>=t[i-1].pts)t.push(e);else for(var n=i-1;n>=0;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var i=this._avcTrack.samples;t=i[i.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e=0,i=t.byteLength,n=void 0,a=void 0,r=this._avcTrack,o=r.naluState||0,s=o,l=[],c=void 0,u=-1,d=void 0;for(-1===o&&(u=0,d=31&t[0],o=0,e=1);e<i;)if(n=t[e++],o)if(1!==o)if(n)if(1===n){if(u>=0)c={data:t.subarray(u,e-o-1),type:d},l.push(c);else{var h=this._getLastNalUnit();if(h&&(s&&e<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),(a=e-o-1)>0)){var p=new Uint8Array(h.data.byteLength+a);p.set(h.data,0),p.set(t.subarray(0,a),h.data.byteLength),h.data=p}}e<i?(u=e,d=31&t[e],o=0):o=-1}else o=0;else o=3;else o=n?0:2;else o=n?0:1;if(u>=0&&o>=0&&(c={data:t.subarray(u,i),type:d,state:o},l.push(c)),0===l.length){var f=this._getLastNalUnit();if(f){var m=new Uint8Array(f.data.byteLength+t.byteLength);m.set(f.data,0),m.set(t,f.data.byteLength),f.data=m}}return r.naluState=o,l},t.prototype.discardEPB=function(t){for(var e,i=t.byteLength,n=[],a=1,r=void 0;a<i-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(n.push(a+2),a+=2):a++;if(0===n.length)return t;e=i-n.length,r=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===n[0]&&(o++,n.shift()),r[a]=t[o];return r},t.prototype._parseAACPES=function(t){var e,i,r=this._audioTrack,o=t.data,l=t.pts,c=this.aacOverFlow,u=this.aacLastPTS,d=void 0,p=void 0,y=void 0;if(c){var g=new Uint8Array(c.byteLength+o.byteLength);g.set(c,0),g.set(o,c.byteLength),o=g}for(p=0,i=o.length;p<i-1&&!h(o,p);p++);if(p){var b=void 0,w=void 0;if(p<i-1?(b="AAC PES did not start with ADTS header,offset:"+p,w=!1):(b="no ADTS header found in AAC PES",w=!0),s.b.warn("parsing error:"+b),this.observer.trigger(n.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:w,reason:b}),w)return}if(f(r,this.observer,o,p,this.audioCodec),d=0,e=m(r.samplerate),c&&u){var E=u+e;Math.abs(E-l)>1&&(s.b.log("AAC: align PTS for overlapping frames by "+Math.round((E-l)/90)),l=E)}for(;p<i;)if(h(o,p)&&p+5<i){var T=v(r,o,p,l,d);if(!T)break;p+=T.length,y=T.sample.pts,d++}else p++;c=p<i?o.subarray(p,i):null,this.aacOverFlow=c,this.aacLastPTS=y},t.prototype._parseMPEGPES=function(t){for(var e=t.data,i=e.length,n=0,a=0,r=t.pts;a<i;)if(E.isHeader(e,a)){var o=E.appendFrame(this._audioTrack,e,a,r,n);if(!o)break;a+=o.length,n++}else a++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}();var _=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.config=n,this.remuxer=i}return t.prototype.resetInitSegment=function(t,e,i,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e=void 0,i=void 0,n=y.a.getID3Data(t,0);if(n&&void 0!==y.a.getTimeStamp(n))for(e=n.length,i=Math.min(t.length-1,e+100);e<i;e++)if(E.probe(t,e))return s.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,i,n){for(var a=y.a.getID3Data(t,0),r=y.a.getTimeStamp(a),o=r?90*r:9e4*e,s=a.length,l=t.length,c=0,u=0,d=this._audioTrack,h=[{pts:o,dts:o,data:a}];s<l;)if(E.isHeader(t,s)){var p=E.appendFrame(d,t,s,o,c);if(!p)break;s+=p.length,u=p.sample.pts,c++}else y.a.isHeader(t,s)?(a=y.a.getID3Data(t,s),h.push({pts:u,dts:u,data:a}),s+=a.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,i,n)},t.prototype.destroy=function(){},t}();var L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}();var x=Math.pow(2,32)-1,R=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e=void 0;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:i,audio:n};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=r,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,l,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,a))},t.box=function(t){for(var e=Array.prototype.slice.call(arguments,1),i=8,n=e.length,a=n,r=void 0;n--;)i+=e[n].byteLength;for((r=new Uint8Array(i))[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=255&i,r.set(t,4),n=0,i=8;n<a;n++)r.set(e[n],i),i+=e[n].byteLength;return r},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,i){i*=e;var n=Math.floor(i/(x+1)),a=Math.floor(i%(x+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,i,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,i))},t.moov=function(e){for(var i=e.length,n=[];i--;)n[i]=t.trak(e[i]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))},t.mvex=function(e){for(var i=e.length,n=[];i--;)n[i]=t.trex(e[i]);return t.box.apply(null,[t.types.mvex].concat(n))},t.mvhd=function(e,i){i*=e;var n=Math.floor(i/(x+1)),a=Math.floor(i%(x+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,r)},t.sdtp=function(e){var i=e.samples||[],n=new Uint8Array(4+i.length),a=void 0,r=void 0;for(r=0;r<i.length;r++)a=i[r].flags,n[r+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return t.box(t.types.sdtp,n)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var i=[],n=[],a=void 0,r=void 0,o=void 0;for(a=0;a<e.sps.length;a++)o=(r=e.sps[a]).byteLength,i.push(o>>>8&255),i.push(255&o),i=i.concat(Array.prototype.slice.call(r));for(a=0;a<e.pps.length;a++)o=(r=e.pps[a]).byteLength,n.push(o>>>8&255),n.push(255&o),n=n.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(n))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var i=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var i=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var i=e.id,n=e.duration*e.timescale,a=e.width,r=e.height,o=Math.floor(n/(x+1)),s=Math.floor(n%(x+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,r>>8&255,255&r,0,0]))},t.traf=function(e,i){var n=t.sdtp(e),a=e.id,r=Math.floor(i/(x+1)),o=Math.floor(i%(x+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,n.length+16+20+8+16+8+8),n)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var i=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,i){var n=e.samples||[],a=n.length,r=12+16*a,o=new Uint8Array(r),s=void 0,l=void 0,c=void 0,u=void 0,d=void 0,h=void 0;for(i+=8+r,o.set([0,0,15,1,a>>>24&255,a>>>16&255,a>>>8&255,255&a,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),s=0;s<a;s++)c=(l=n[s]).duration,u=l.size,d=l.flags,h=l.cts,o.set([c>>>24&255,c>>>16&255,c>>>8&255,255&c,u>>>24&255,u>>>16&255,u>>>8&255,255&u,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,61440&d.degradPrio,15&d.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*s);return t.box(t.types.trun,o)},t.initSegment=function(e){t.types||t.init();var i=t.moov(e),n=void 0;return(n=new Uint8Array(t.FTYP.byteLength+i.byteLength)).set(t.FTYP),n.set(i,t.FTYP.byteLength),n},t}();var C=function(){function t(e,i,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.config=i,this.typeSupported=n;var r=navigator.userAgent;this.isSafari=a&&a.indexOf("Apple")>-1&&r&&!r.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,i,a,r,o,l){if(this.ISGenerated||this.generateIS(t,e,r),this.ISGenerated){var c=t.samples.length,u=e.samples.length,d=r,h=r;if(c&&u){var p=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;d+=Math.max(0,p),h+=Math.max(0,-p)}if(c){t.timescale||(s.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,r));var f=this.remuxAudio(t,d,o,l);if(u){var m=void 0;f&&(m=f.endPTS-f.startPTS),e.timescale||(s.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,r)),this.remuxVideo(e,h,o,m,l)}}else if(u){var v=this.remuxVideo(e,h,o,0,l);v&&t.codec&&this.remuxEmptyAudio(t,d,o,v)}}i.samples.length&&this.remuxID3(i,r),a.samples.length&&this.remuxText(a,r),this.observer.trigger(n.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,i){var r=this.observer,o=t.samples,l=e.samples,c=this.typeSupported,u="audio/mp4",d={},h={tracks:d},p=void 0===this._initPTS,f=void 0,m=void 0;if(p&&(f=m=1/0),t.config&&o.length&&(t.timescale=t.samplerate,s.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(c.mpeg?(u="audio/mpeg",t.codec=""):c.mp3&&(t.codec="mp3")),d.audio={container:u,codec:t.codec,initSegment:!t.isAAC&&c.mpeg?new Uint8Array:R.initSegment([t]),metadata:{channelCount:t.channelCount}},p&&(f=m=o[0].pts-t.inputTimeScale*i)),e.sps&&e.pps&&l.length){var v=e.inputTimeScale;e.timescale=v,d.video={container:"video/mp4",codec:e.codec,initSegment:R.initSegment([e]),metadata:{width:e.width,height:e.height}},p&&(f=Math.min(f,l[0].pts-v*i),m=Math.min(m,l[0].dts-v*i),this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:f}))}Object.keys(d).length?(r.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,p&&(this._initPTS=f,this._initDTS=m)):r.trigger(n.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,i,r,o){var l,c,u,d=8,h=t.timescale,p=void 0,f=void 0,m=void 0,v=void 0,y=t.samples,g=[],b=y.length,w=this._PTSNormalize,E=this._initDTS,T=this.nextAvcDts,S=this.isSafari;if(0!==b){S&&(i|=y.length&&T&&(o&&Math.abs(e-T/h)<.1||Math.abs(y[0].pts-T-E)<h/5)),i||(T=e*h),y.forEach(function(t){t.pts=w(t.pts-E,T),t.dts=w(t.dts-E,T)}),y.sort(function(t,e){var i=t.dts-e.dts,n=t.pts-e.pts;return i||n||t.id-e.id});var A=y.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(A<0){s.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(A/90)+" ms to overcome this issue");for(var k=0;k<y.length;k++)y[k].dts+=A}var _=y[0];v=Math.max(_.dts,0),m=Math.max(_.pts,0);var L=Math.round((v-T)/90);i&&L&&(L>1?s.b.log("AVC:"+L+" ms hole between fragments detected,filling it"):L<-1&&s.b.log("AVC:"+-L+" ms overlapping between fragments detected"),v=T,y[0].dts=v,m=Math.max(m-L,T),y[0].pts=m,s.b.log("Video/PTS/DTS adjusted: "+Math.round(m/90)+"/"+Math.round(v/90)+",delta:"+L+" ms")),v,_=y[y.length-1],u=Math.max(_.dts,0),c=Math.max(_.pts,0,u),S&&(p=Math.round((u-v)/(y.length-1)));for(var x=0,C=0,D=0;D<b;D++){for(var O=y[D],I=O.units,M=I.length,P=0,F=0;F<M;F++)P+=I[F].data.length;C+=P,x+=M,O.length=P,O.dts=S?v+D*p:Math.max(O.dts,v),O.pts=Math.max(O.pts,O.dts)}var N=C+4*x+8;try{f=new Uint8Array(N)}catch(t){return void this.observer.trigger(n.a.ERROR,{type:a.b.MUX_ERROR,details:a.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var B=new DataView(f.buffer);B.setUint32(0,N),f.set(R.types.mdat,4);for(var U=0;U<b;U++){for(var j=y[U],q=j.units,G=0,H=void 0,z=0,W=q.length;z<W;z++){var V=q[z],Y=V.data,K=V.data.byteLength;B.setUint32(d,K),d+=4,f.set(Y,d),d+=K,G+=4+K}if(S)H=Math.max(0,p*Math.round((j.pts-j.dts)/p));else{if(U<b-1)p=y[U+1].dts-j.dts;else{var X=this.config,Q=j.dts-y[U>0?U-1:U].dts;if(X.stretchShortVideoTrack){var J=X.maxBufferHole,Z=Math.floor(J*h),$=(r?m+r*h:this.nextAudioPts)-j.pts;$>Z?((p=$-Q)<0&&(p=Q),s.b.log("It is approximately "+$/90+" ms to the next segment; using duration "+p/90+" ms for the last video frame.")):p=Q}else p=Q}H=Math.round(j.pts-j.dts)}g.push({size:G,duration:p,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=u+p;var tt=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,g.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var et=g[0].flags;et.dependsOn=2,et.isNonSync=0}t.samples=g,l=R.moof(t.sequenceNumber++,v,t),t.samples=[];var it={data1:l,data2:f,startPTS:m/h,endPTS:(c+p)/h,startDTS:v/h,endDTS:this.nextAvcDts/h,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:tt};return this.observer.trigger(n.a.FRAG_PARSING_DATA,it),it}},t.prototype.remuxAudio=function(t,e,i,r){var o=t.inputTimeScale,l=t.timescale,c=o/l,u=(t.isAAC?1024:1152)*c,d=this._PTSNormalize,h=this._initDTS,p=!t.isAAC&&this.typeSupported.mpeg,f=void 0,m=void 0,v=void 0,y=void 0,g=void 0,b=void 0,w=void 0,E=t.samples,T=[],S=this.nextAudioPts;if(i|=E.length&&S&&(r&&Math.abs(e-S/o)<.1||Math.abs(E[0].pts-S-h)<20*u),E.forEach(function(t){t.pts=t.dts=d(t.pts-h,e*o)}),0!==(E=E.filter(function(t){return t.pts>=0})).length){if(i||(S=r?e*o:E[0].pts),t.isAAC)for(var A=this.config.maxAudioFramesDrift,k=0,_=S;k<E.length;){var x,C=E[k];x=C.pts-_;var D=Math.abs(1e3*x/o);if(x<=-A*u)s.b.warn("Dropping 1 audio frame @ "+(_/o).toFixed(3)+"s due to "+Math.round(D)+" ms overlap."),E.splice(k,1),t.len-=C.unit.length;else if(x>=A*u&&D<1e4&&_){var O=Math.round(x/u);s.b.warn("Injecting "+O+" audio frame @ "+(_/o).toFixed(3)+"s due to "+Math.round(1e3*x/o)+" ms gap.");for(var I=0;I<O;I++){var M=Math.max(_,0);(v=L.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),v=C.unit.subarray()),E.splice(k,0,{unit:v,pts:M,dts:M}),t.len+=v.length,_+=u,k++}C.pts=C.dts=_,_+=u,k++}else Math.abs(x),C.pts=C.dts=_,_+=u,k++}for(var P=0,F=E.length;P<F;P++){var N=E[P],B=N.unit,U=N.pts;if(void 0!==w)m.duration=Math.round((U-w)/c);else{var j=Math.round(1e3*(U-S)/o),q=0;if(i&&t.isAAC&&j){if(j>0&&j<1e4)q=Math.round((U-S)/u),s.b.log(j+" ms hole between AAC samples detected,filling it"),q>0&&((v=L.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(v=B.subarray()),t.len+=q*v.length);else if(j<-12){s.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(S/o).toFixed(3)+"s/"+(U/o).toFixed(3)+"s/"+-j+"ms"),t.len-=B.byteLength;continue}U=S}if(b=U,!(t.len>0))return;var G=p?t.len:t.len+8;f=p?0:8;try{y=new Uint8Array(G)}catch(t){return void this.observer.trigger(n.a.ERROR,{type:a.b.MUX_ERROR,details:a.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}p||(new DataView(y.buffer).setUint32(0,G),y.set(R.types.mdat,4));for(var H=0;H<q;H++)(v=L.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),v=B.subarray()),y.set(v,f),f+=v.byteLength,m={size:v.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(m)}y.set(B,f);var z=B.byteLength;f+=z,m={size:z,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(m),w=U}var W=0,V=T.length;if(V>=2&&(W=T[V-2].duration,m.duration=W),V){this.nextAudioPts=S=w+c*W,t.len=0,t.samples=T,g=p?new Uint8Array:R.moof(t.sequenceNumber++,b/c,t),t.samples=[];var Y=b/o,K=S/o,X={data1:g,data2:y,startPTS:Y,endPTS:K,startDTS:Y,endDTS:K,type:"audio",hasAudio:!0,hasVideo:!1,nb:V};return this.observer.trigger(n.a.FRAG_PARSING_DATA,X),X}return null}},t.prototype.remuxEmptyAudio=function(t,e,i,n){var a=t.inputTimeScale,r=a/(t.samplerate?t.samplerate:a),o=this.nextAudioPts,l=(void 0!==o?o:n.startDTS*a)+this._initDTS,c=n.endDTS*a+this._initDTS,u=1024*r,d=Math.ceil((c-l)/u),h=L.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(s.b.warn("remux empty Audio"),h){for(var p=[],f=0;f<d;f++){var m=l+f*u;p.push({unit:h,pts:m,dts:m}),t.len+=h.length}t.samples=p,this.remuxAudio(t,e,i)}else s.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.prototype.remuxID3=function(t,e){var i=t.samples.length,a=void 0,r=t.inputTimeScale,o=this._initPTS,s=this._initDTS;if(i){for(var l=0;l<i;l++)(a=t.samples[l]).pts=(a.pts-o)/r,a.dts=(a.dts-s)/r;this.observer.trigger(n.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var i=t.samples.length,a=void 0,r=t.inputTimeScale,o=this._initPTS;if(i){for(var s=0;s<i;s++)(a=t.samples[s]).pts=(a.pts-o)/r;this.observer.trigger(n.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var i=void 0;if(void 0===e)return t;for(i=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=i;return t},t}();var D=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,i,a,r,o,s,l){var c=this.observer,u="";t&&(u+="audio"),e&&(u+="video"),c.trigger(n.a.FRAG_PARSING_DATA,{data1:l,startPTS:r,startDTS:r,type:u,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),c.trigger(n.a.FRAG_PARSED)},t}();var O=Object(l.a)().performance,I=function(){function t(e,i,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observer=e,this.typeSupported=i,this.config=n,this.vendor=a}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,i,a,o,s,l,c,u,d,h,p){if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var f=this.decrypter;null==f&&(f=this.decrypter=new r.a(this.observer,this.config));var m=this,v=void 0;try{v=O.now()}catch(t){v=Date.now()}f.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var r=void 0;try{r=O.now()}catch(t){r=Date.now()}m.observer.trigger(n.a.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:r}}),m.pushDecrypted(new Uint8Array(t),e,new Uint8Array(i),a,o,s,l,c,u,d,h,p)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(i),a,o,s,l,c,u,d,h,p)},t.prototype.pushDecrypted=function(t,e,i,r,o,s,l,c,u,d,h,p){var f=this.demuxer;if(!f||(l||c)&&!this.probe(t)){for(var m=this.observer,v=this.typeSupported,y=this.config,w=[{demux:k,remux:C},{demux:b.a,remux:D},{demux:g,remux:C},{demux:_,remux:C}],E=0,T=w.length;E<T;E++){var S=w[E],A=S.demux.probe;if(A(t)){var L=this.remuxer=new S.remux(m,y,v,this.vendor);f=new S.demux(m,L,y,v),this.probe=A;break}}if(!f)return void m.trigger(n.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=f}var x=this.remuxer;(l||c)&&(f.resetInitSegment(i,r,o,d),x.resetInitSegment()),l&&(f.resetTimeStamp(p),x.resetTimeStamp(p)),"function"==typeof f.setDecryptData&&f.setDecryptData(e),f.append(t,s,u,h)},t}();e.a=I},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};i.d(n,"newCue",function(){return ee});var a=i(5),r=i.n(a),o=i(2),s=i(3),l=i(1),c=i(0),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var d=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.prototype.onHandlerDestroying=function(){},t.prototype.onHandlerDestroyed=function(){},t.prototype.isEventHandler=function(){return"object"===u(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(d.has(t))throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){try{(function(t,e){var i="on"+t.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,e)}).call(this,t,e).call()}catch(e){c.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(l.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}(),p=i(9),f=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return f(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=r.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}(),v=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var y=function(){function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return t.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},t.prototype.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),i=12;i<16;i++)e[i]=t>>8*(15-i)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var i=t;return t&&t.method&&t.uri&&!t.iv&&((i=new m).method=t.method,i.baseuri=t.baseuri,i.reluri=t.reluri,i.iv=this.createInitializationVector(e)),i},v(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=r.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var t=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var i=this.lastByteRangeEndOffset;t[0]=i||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0],this._byteRange=t}return t}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}},{key:"endProgramDateTime",get:function(){if(!Object(s.a)(this.programDateTime))return null;var t=Object(s.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),t}(),g=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return g(t,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(s.a)(this.fragments[0].programDateTime))}}]),t}();var w=/^(\d+)x(\d+)$/,E=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,T=function(){function t(e){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(i)&&(this[i]=e[i])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var i=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)i[n]=parseInt(e.slice(2*n,2*n+2),16);return i}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=w.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e=void 0,i={};for(E.lastIndex=0;null!==(e=E.exec(t));){var n=e[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[e[1]]=n}return i},t}(),S={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function A(t,e){return window.MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var k=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,_=/#EXT-X-MEDIA:(.*)/g,L=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),x=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,R=/\.(mp4|m4s|m4v|m4a)$/i,C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.findGroup=function(t,e){if(!t)return null;for(var i=null,n=0;n<t.length;n++){var a=t[n];a.id===e&&(i=a)}return i},t.convertAVC1ToAVCOTI=function(t){var e=void 0,i=t.split(".");return i.length>2?(e=i.shift()+".",e+=parseInt(i.shift()).toString(16),e+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return r.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,i){var n=[],a=void 0;function r(t,e){["video","audio"].forEach(function(i){var n=t.filter(function(t){return function(t,e){var i=S[e];return!!i&&!0===i[t.slice(0,4)]}(t,i)});if(n.length){var a=n.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[i+"Codec"]=a.length>0?a[0]:n[0],t=t.filter(function(t){return-1===n.indexOf(t)})}}),e.unknownCodecs=t}for(k.lastIndex=0;null!=(a=k.exec(e));){var o={},s=o.attrs=new T(a[1]);o.url=t.resolve(a[2],i);var l=s.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,r([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=t.convertAVC1ToAVCOTI(o.videoCodec)),n.push(o)}return n},t.parseMasterPlaylistMedia=function(e,i,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=void 0,o=[],s=0;for(_.lastIndex=0;null!==(r=_.exec(e));){var l={},c=new T(r[1]);if(c.TYPE===n){if(l.groupId=c["GROUP-ID"],l.name=c.NAME,l.type=n,l.default="YES"===c.DEFAULT,l.autoselect="YES"===c.AUTOSELECT,l.forced="YES"===c.FORCED,c.URI&&(l.url=t.resolve(c.URI,i)),l.lang=c.LANGUAGE,l.name||(l.name=l.lang),a.length){var u=t.findGroup(a,l.groupId);l.audioCodec=u?u.codec:a[0].codec}l.id=s++,o.push(l)}}return o},t.parseLevelPlaylist=function(t,e,i,n,a){var r=0,o=0,l=new b(e),u=new m,d=0,h=null,p=new y,f=void 0,v=void 0,g=null;for(L.lastIndex=0;null!==(f=L.exec(t));){var w=f[1];if(w){p.duration=parseFloat(w);var E=(" "+f[2]).slice(1);p.title=E||null,p.tagList.push(E?["INF",w,E]:["INF",w])}else if(f[3]){if(Object(s.a)(p.duration)){var S=r++;p.type=n,p.start=o,p.levelkey=u,p.sn=S,p.level=i,p.cc=d,p.urlId=a,p.baseurl=e,p.relurl=(" "+f[3]).slice(1),D(p,h),l.fragments.push(p),h=p,o+=p.duration,p=new y}}else if(f[4]){if(p.rawByteRange=(" "+f[4]).slice(1),h){var A=h.byteRangeEndOffset;A&&(p.lastByteRangeEndOffset=A)}}else if(f[5])p.rawProgramDateTime=(" "+f[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),null===g&&(g=l.fragments.length);else{for(f=f[0].match(x),v=1;v<f.length&&void 0===f[v];v++);var k=(" "+f[v+1]).slice(1),_=(" "+f[v+2]).slice(1);switch(f[v]){case"#":p.tagList.push(_?[k,_]:[k]);break;case"PLAYLIST-TYPE":l.type=k.toUpperCase();break;case"MEDIA-SEQUENCE":r=l.startSN=parseInt(k);break;case"TARGETDURATION":l.targetduration=parseFloat(k);break;case"VERSION":l.version=parseInt(k);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":d++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(k);break;case"KEY":var C=new T(k),O=C.enumeratedString("METHOD"),I=C.URI,M=C.hexadecimalInteger("IV");O&&(u=new m,I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(O)>=0&&(u.method=O,u.baseuri=e,u.reluri=I,u.key=null,u.iv=M));break;case"START":var P=new T(k).decimalFloatingPoint("TIME-OFFSET");Object(s.a)(P)&&(l.startTimeOffset=P);break;case"MAP":var F=new T(k);p.relurl=F.URI,p.rawByteRange=F.BYTERANGE,p.baseurl=e,p.level=i,p.type=n,p.sn="initSegment",l.initSegment=p,(p=new y).rawProgramDateTime=l.initSegment.rawProgramDateTime;break;default:c.b.warn("line parsed but not handled: "+f)}}}return(p=h)&&!p.relurl&&(l.fragments.pop(),o-=p.duration),l.totalduration=o,l.averagetargetduration=o/l.fragments.length,l.endSN=r-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=d,!l.initSegment&&l.fragments.length&&l.fragments.every(function(t){return R.test(t.relurl)})&&(c.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(p=new y).relurl=l.fragments[0].relurl,p.baseurl=e,p.level=i,p.type=n,p.sn="initSegment",l.initSegment=p,l.needSidxRanges=!0),g&&function(t,e){for(var i=t[e],n=e-1;n>=0;n--){var a=t[n];a.programDateTime=i.programDateTime-1e3*a.duration,i=a}}(l.fragments,g),l},t}();function D(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(s.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var O=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var I=window.performance,M={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},P={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},F=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MANIFEST_LOADING,l.a.LEVEL_LOADING,l.a.AUDIO_TRACK_LOADING,l.a.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.canHaveQualityLevels=function(t){return t!==M.AUDIO_TRACK&&t!==M.SUBTITLE_TRACK},e.mapContextToLevelType=function(t){switch(t.type){case M.AUDIO_TRACK:return P.AUDIO;case M.SUBTITLE_TRACK:return P.SUBTITLE;default:return P.MAIN}},e.getResponseUrl=function(t,e){var i=t.url;return void 0!==i&&0!==i.indexOf("data:")||(i=e.url),i},e.prototype.createInternalLoader=function(t){var e=this.hls.config,i=e.pLoader,n=e.loader,a=new(i||n)(e);return t.loader=a,this.loaders[t.type]=a,a},e.prototype.getInternalLoader=function(t){return this.loaders[t.type]},e.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:M.MANIFEST,level:0,id:null})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:M.LEVEL,level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:M.AUDIO_TRACK,level:null,id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:M.SUBTITLE_TRACK,level:null,id:t.id})},e.prototype.load=function(t,e){var i=this.hls.config;c.b.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n=this.getInternalLoader(e);if(n){var a=n.context;if(a&&a.url===t)return c.b.trace("playlist request ongoing"),!1;c.b.warn("aborting previous loader for type: "+e.type),n.abort()}var r=void 0,o=void 0,s=void 0,l=void 0;switch(e.type){case M.MANIFEST:r=i.manifestLoadingMaxRetry,o=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,l=i.manifestLoadingMaxRetryTimeout;break;case M.LEVEL:r=0,o=i.levelLoadingTimeOut;break;default:r=i.levelLoadingMaxRetry,o=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,l=i.levelLoadingMaxRetryTimeout}n=this.createInternalLoader(e),e.url=t,e.responseType=e.responseType||"";var u={timeout:o,maxRetry:r,retryDelay:s,maxRetryDelay:l},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.b.debug("Calling internal loader delegate for URL: "+t),n.load(e,u,d),!0},e.prototype.loadsuccess=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(i.isSidxRequest)return this._handleSidxRequest(t,i),void this._handlePlaylistLoaded(t,e,i,n);this.resetInternalLoader(i.type);var a=t.data;e.tload=I.now(),0===a.indexOf("#EXTM3U")?a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,i,n):this._handleMasterPlaylist(t,e,i,n):this._handleManifestParsingError(t,i,"no EXTM3U delimiter",n)},e.prototype.loaderror=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(e,i)},e.prototype.loadtimeout=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(e,i,!0)},e.prototype._handleMasterPlaylist=function(t,i,n,a){var r=this.hls,o=t.data,s=e.getResponseUrl(t,n),u=C.parseMasterPlaylist(o,s);if(u.length){var d=u.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),h=C.parseMasterPlaylistMedia(o,s,"AUDIO",d),p=C.parseMasterPlaylistMedia(o,s,"SUBTITLES");if(h.length){var f=!1;h.forEach(function(t){t.url||(f=!0)}),!1===f&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(c.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}r.trigger(l.a.MANIFEST_LOADED,{levels:u,audioTracks:h,subtitles:p,url:s,stats:i,networkDetails:a})}else this._handleManifestParsingError(t,n,"no level found in manifest",a)},e.prototype._handleTrackOrLevelPlaylist=function(t,i,n,a){var r=this.hls,o=n.id,c=n.level,u=n.type,d=e.getResponseUrl(t,n),h=Object(s.a)(o)?o:0,p=Object(s.a)(c)?c:h,f=e.mapContextToLevelType(n),m=C.parseLevelPlaylist(t.data,d,p,f,h);if(m.tload=i.tload,u===M.MANIFEST){var v={url:d,details:m};r.trigger(l.a.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:d,stats:i,networkDetails:a})}if(i.tparsed=I.now(),m.needSidxRanges){var y=m.initSegment.url;this.load(y,{isSidxRequest:!0,type:u,level:c,levelDetails:m,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=m,this._handlePlaylistLoaded(t,i,n,a)},e.prototype._handleSidxRequest=function(t,e){var i=p.a.parseSegmentIndex(new Uint8Array(t.data));i.references.forEach(function(t,i){var n=t.info,a=e.levelDetails.fragments[i];0===a.byteRange.length&&(a.rawByteRange=String(1+n.end-n.start)+"@"+String(n.start))}),e.levelDetails.initSegment.rawByteRange=String(i.moovEndOffset)+"@0"},e.prototype._handleManifestParsingError=function(t,e,i,n){this.hls.trigger(l.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:i,networkDetails:n})},e.prototype._handleNetworkError=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c.b.info("A network error occured while loading a "+t.type+"-type playlist");var n=void 0,a=void 0,r=this.getInternalLoader(t);switch(t.type){case M.MANIFEST:n=i?o.a.MANIFEST_LOAD_TIMEOUT:o.a.MANIFEST_LOAD_ERROR,a=!0;break;case M.LEVEL:n=i?o.a.LEVEL_LOAD_TIMEOUT:o.a.LEVEL_LOAD_ERROR,a=!1;break;case M.AUDIO_TRACK:n=i?o.a.AUDIO_TRACK_LOAD_TIMEOUT:o.a.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}r&&(r.abort(),this.resetInternalLoader(t.type)),this.hls.trigger(l.a.ERROR,{type:o.b.NETWORK_ERROR,details:n,fatal:a,url:r.url,loader:r,context:t,networkDetails:e})},e.prototype._handlePlaylistLoaded=function(t,i,n,a){var r=n.type,o=n.level,s=n.id,c=n.levelDetails;if(c.targetduration)if(e.canHaveQualityLevels(n.type))this.hls.trigger(l.a.LEVEL_LOADED,{details:c,level:o||0,id:s||0,stats:i,networkDetails:a});else switch(r){case M.AUDIO_TRACK:this.hls.trigger(l.a.AUDIO_TRACK_LOADED,{details:c,id:s,stats:i,networkDetails:a});break;case M.SUBTITLE_TRACK:this.hls.trigger(l.a.SUBTITLE_TRACK_LOADED,{details:c,id:s,stats:i,networkDetails:a})}else this._handleManifestParsingError(t,n,"invalid target duration",a)},O(e,null,[{key:"ContextType",get:function(){return M}},{key:"LevelType",get:function(){return P}}]),e}(h);var N=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.FRAG_LOADING));return n.loaders={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){var e=this.loaders;for(var i in e){var n=e[i];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,i=e.type,n=this.loaders,a=this.hls.config,r=a.fLoader,o=a.loader;e.loaded=0;var l=n[i];l&&(c.b.warn("abort previous fragment loader for type: "+i),l.abort()),l=n[i]=e.loader=a.fLoader?new r(a):new o(a);var u,d,h=void 0;h={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var p=e.byteRangeStartOffset,f=e.byteRangeEndOffset;Object(s.a)(p)&&Object(s.a)(f)&&(h.rangeStart=p,h.rangeEnd=f),u={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},l.load(h,u,d)},e.prototype.loadsuccess=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.data,r=i.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(l.a.FRAG_LOADED,{payload:a,frag:r,stats:e,networkDetails:n})},e.prototype.loaderror=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(l.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:i})},e.prototype.loadtimeout=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(l.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:i})},e.prototype.loadprogress=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.frag;a.loaded=t.loaded,this.hls.trigger(l.a.FRAG_LOAD_PROGRESS,{frag:a,stats:t,networkDetails:n})},e}(h);var B=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},h.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,i=e.type,n=this.loaders[i],a=e.decryptdata,r=a.uri;if(r!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;n&&(c.b.warn("abort previous key loader for type:"+i),n.abort()),e.loader=this.loaders[i]=new o.loader(o),this.decrypturl=r,this.decryptkey=null;var s,u,d;s={url:r,frag:e,responseType:"arraybuffer"},u={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,u,d)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(l.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,i){var n=i.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(t.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(l.a.KEY_LOADED,{frag:n})},e.prototype.loaderror=function(t,e){var i=e.frag,n=i.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:t})},e.prototype.loadtimeout=function(t,e){var i=e.frag,n=i.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},e}(h);var U="NOT_LOADED",j="APPENDING",q="PARTIAL",G="OK",H=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.BUFFER_APPENDED,l.a.FRAG_BUFFERED,l.a.FRAG_LOADED));return n.bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=i.config,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,h.prototype.destroy.call(this),t.prototype.destroy.call(this)},e.prototype.getBufferedFrag=function(t,e){var i=this.fragments,n=Object.keys(i).filter(function(n){var a=i[n];if(a.body.type!==e)return!1;if(!a.buffered)return!1;var r=a.body;return r.startPTS<=t&&t<=r.endPTS});if(0===n.length)return null;var a=n.pop();return i[a].body},e.prototype.detectEvictedFragments=function(t,e){var i=this,n=void 0,a=void 0;Object.keys(this.fragments).forEach(function(r){var o=i.fragments[r];if(!0===o.buffered){var s=o.range[t];if(s){n=s.time;for(var l=0;l<n.length;l++)if(a=n[l],!1===i.isTimeBuffered(a.startPTS,a.endPTS,e)){i.removeFragment(o.body);break}}}})},e.prototype.detectPartialFragments=function(t){var e=this,i=this.getFragmentKey(t),n=this.fragments[i];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(i){if(t.hasElementaryStream(i)){var a=e.timeRanges[i];n.range[i]=e.getBufferedTimes(t.startPTS,t.endPTS,a)}}))},e.prototype.getBufferedTimes=function(t,e,i){for(var n=[],a=void 0,r=void 0,o=!1,s=0;s<i.length;s++){if(a=i.start(s)-this.bufferPadding,r=i.end(s)+this.bufferPadding,t>=a&&e<=r){n.push({startPTS:Math.max(t,i.start(s)),endPTS:Math.min(e,i.end(s))});break}if(t<r&&e>a)n.push({startPTS:Math.max(t,i.start(s)),endPTS:Math.min(e,i.end(s))}),o=!0;else if(e<=a)break}return{time:n,partial:o}},e.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},e.prototype.getPartialFragment=function(t){var e=this,i=void 0,n=void 0,a=void 0,r=null,o=0;return Object.keys(this.fragments).forEach(function(s){var l=e.fragments[s];e.isPartial(l)&&(n=l.body.startPTS-e.bufferPadding,a=l.body.endPTS+e.bufferPadding,t>=n&&t<=a&&(i=Math.min(t-n,a-t),o<=i&&(r=l.body,o=i)))}),r},e.prototype.getState=function(t){var e=this.getFragmentKey(t),i=this.fragments[e],n=U;return void 0!==i&&(n=i.buffered?!0===this.isPartial(i)?q:G:j),n},e.prototype.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},e.prototype.isTimeBuffered=function(t,e,i){for(var n=void 0,a=void 0,r=0;r<i.length;r++){if(n=i.start(r)-this.bufferPadding,a=i.end(r)+this.bufferPadding,t>=n&&e<=a)return!0;if(e<=n)return!1}return!1},e.prototype.onFragLoaded=function(t){var e=t.frag;Object(s.a)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},e.prototype.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var i=e.timeRanges[t];e.detectEvictedFragments(t,i)})},e.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},e.prototype.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},e.prototype.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},e.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},e}(h),z={search:function(t,e){for(var i=0,n=t.length-1,a=null,r=null;i<=n;){var o=e(r=t[a=(i+n)/2|0]);if(o>0)i=a+1;else{if(!(o<0))return r;n=a-1}}return null}};var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.isBuffered=function(t,e){try{if(t)for(var i=t.buffered,n=0;n<i.length;n++)if(e>=i.start(n)&&e<=i.end(n))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,i){try{if(t){var n=t.buffered,a=[],r=void 0;for(r=0;r<n.length;r++)a.push({start:n.start(r),end:n.end(r)});return this.bufferedInfo(a,e,i)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,i){var n=[],a=void 0,r=void 0,o=void 0,s=void 0,l=void 0;for(t.sort(function(t,e){var i=t.start-e.start;return i||e.end-t.end}),l=0;l<t.length;l++){var c=n.length;if(c){var u=n[c-1].end;t[l].start-u<i?t[l].end>u&&(n[c-1].end=t[l].end):n.push(t[l])}else n.push(t[l])}for(l=0,a=0,r=o=e;l<n.length;l++){var d=n[l].start,h=n[l].end;if(e+i>=d&&e<h)r=d,a=(o=h)-e;else if(e+i<d){s=d;break}}return{len:a,start:r,end:o,nextStart:s}},t}(),V=i(7),Y=i.n(V),K=i(12),X=i.n(K),Q=i(10);function J(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}var Z=i(4);var $=Object(Z.a)(),tt=J(),et=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=e,this.id=i;var n=this.observer=new Y.a,a=e.config;n.trigger=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];n.emit.apply(n,[t,t].concat(i))},n.off=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];n.removeListener.apply(n,[t].concat(i))};var r=function(t,i){(i=i||{}).frag=this.frag,i.id=this.id,e.trigger(t,i)}.bind(this);n.on(l.a.FRAG_DECRYPTED,r),n.on(l.a.FRAG_PARSING_INIT_SEGMENT,r),n.on(l.a.FRAG_PARSING_DATA,r),n.on(l.a.FRAG_PARSED,r),n.on(l.a.ERROR,r),n.on(l.a.FRAG_PARSING_METADATA,r),n.on(l.a.FRAG_PARSING_USERDATA,r),n.on(l.a.INIT_PTS_FOUND,r);var s={mp4:tt.isTypeSupported("video/mp4"),mpeg:tt.isTypeSupported("audio/mpeg"),mp3:tt.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){c.b.log("demuxing in webworker");var d=void 0;try{d=this.w=X()(13),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(t){e.trigger(l.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:s,vendor:u,id:i,config:JSON.stringify(a)})}catch(t){c.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&$.URL.revokeObjectURL(d.objectURL),this.demuxer=new Q.a(n,s,a,u),this.w=void 0}}else this.demuxer=new Q.a(n,s,a,u)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var i=this.observer;i&&(i.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,i,n,a,r,o,l){var u=this.w,d=Object(s.a)(a.startDTS)?a.startDTS:a.start,h=a.decryptdata,p=this.frag,f=!(p&&a.cc===p.cc),m=!(p&&a.level===p.level),v=p&&a.sn===p.sn+1,y=!m&&v;if(f&&c.b.log(this.id+":discontinuity detected"),m&&c.b.log(this.id+":switch detected"),this.frag=a,u)u.postMessage({cmd:"demux",data:t,decryptdata:h,initSegment:e,audioCodec:i,videoCodec:n,timeOffset:d,discontinuity:f,trackSwitch:m,contiguous:y,duration:r,accurateTimeOffset:o,defaultInitPTS:l},t instanceof ArrayBuffer?[t]:[]);else{var g=this.demuxer;g&&g.push(t,h,e,i,n,d,f,m,y,r,o,l)}},t.prototype.onWorkerMessage=function(t){var e=t.data,i=this.hls;switch(e.event){case"init":$.URL.revokeObjectURL(this.w.objectURL);break;case l.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,i.trigger(e.event,e.data)}},t}();function it(t,e,i){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(i);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(i)}}function nt(t,e,i){var n=t[e],a=t[i],r=a.startPTS;Object(s.a)(r)?i>e?(n.duration=r-n.start,n.duration<0&&c.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(a.duration=n.start-r,a.duration<0&&c.b.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=i>e?n.start+n.duration:Math.max(n.start-a.duration,0)}function at(t,e,i,n,a,r){var o=i;if(Object(s.a)(e.startPTS)){var l=Math.abs(e.startPTS-i);Object(s.a)(e.deltaPTS)?e.deltaPTS=Math.max(l,e.deltaPTS):e.deltaPTS=l,o=Math.max(i,e.startPTS),i=Math.min(i,e.startPTS),n=Math.max(n,e.endPTS),a=Math.min(a,e.startDTS),r=Math.max(r,e.endDTS)}var c=i-e.start;e.start=e.startPTS=i,e.maxStartPTS=o,e.endPTS=n,e.startDTS=a,e.endDTS=r,e.duration=n-i;var u=e.sn;if(!t||u<t.startSN||u>t.endSN)return 0;var d,h=void 0,p=void 0;for(d=u-t.startSN,(h=t.fragments)[d]=e,p=d;p>0;p--)nt(h,p,p-1);for(p=d;p<h.length-1;p++)nt(h,p,p+1);return t.PTSKnown=!0,c}function rt(t,e){var i=Math.max(t.startSN,e.startSN)-e.startSN,n=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,r=t.fragments,o=e.fragments,l=0,u=void 0;if(e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment),n<i)e.PTSKnown=!1;else{for(var d=i;d<=n;d++){var h=r[a+d],p=o[d];p&&h&&(l=h.cc-p.cc,Object(s.a)(h.startPTS)&&(p.start=p.startPTS=h.startPTS,p.endPTS=h.endPTS,p.duration=h.duration,p.backtracked=h.backtracked,p.dropped=h.dropped,u=p))}if(l)for(c.b.log("discontinuity sliding from playlist, take drift into account"),d=0;d<o.length;d++)o[d].cc+=l;if(u)at(e,u,u.startPTS,u.endPTS,u.startDTS,u.endDTS);else if(a>=0&&a<r.length){var f=r[a].start;for(d=0;d<o.length;d++)o[d].start+=f}e.PTSKnown=t.PTSKnown}}var ot={toString:function(t){for(var e="",i=t.length,n=0;n<i;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e}};function st(t,e){e.fragments.forEach(function(e){if(e){var i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}),e.PTSKnown=!0}function lt(t,e,i){!function(t,e,i){if(function(t,e,i){var n=!1;return e&&e.details&&i&&(i.endCC>i.startCC||t&&t.cc<i.startCC)&&(n=!0),n}(t,i,e)){var n=function(t,e){var i=t.fragments,n=e.fragments;if(n.length&&i.length){var a=function(t,e){for(var i=null,n=0;n<t.length;n+=1){var a=t[n];if(a&&a.cc===e){i=a;break}}return i}(i,n[0].cc);if(a&&(!a||a.startPTS))return a;c.b.log("No frag in previous level to align on")}else c.b.log("No fragments to align")}(i.details,e);n&&(c.b.log("Adjusting PTS using last level due to CC increase within current level"),st(n.start,e))}}(t,i,e),!i.PTSKnown&&e&&function(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var i=e.fragments[0].programDateTime,n=t.fragments[0].programDateTime,a=(n-i)/1e3+e.fragments[0].start;Object(s.a)(a)&&(c.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),st(a,t))}}(i,e.details)}var ct=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call.apply(t,[this,i].concat(a)));return o._tickInterval=null,o._tickTimer=null,o._tickCallCount=0,o._boundTick=o.tick.bind(o),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.prototype.hasInterval=function(){return!!this._tickInterval},e.prototype.hasNextTick=function(){return!!this._tickTimer},e.prototype.setInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,t),!0)}),e.prototype.clearInterval=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)}),e.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},e.prototype.doTick=function(){},e}(h);function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments[2],n=Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-n<=t?1:i.start-n>t&&i.start?-1:0}function dt(t,e,i){var n=1e3*Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.endProgramDateTime-n>t}var ht=function(){function t(e,i,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.media=i,this.fragmentTracker=n,this.hls=a,this.stallReported=!1}return t.prototype.poll=function(t,e){var i=this.config,n=this.media,a=n.currentTime,r=window.performance.now();if(a!==t)return this.stallReported&&(c.b.warn("playback not stuck anymore @"+a+", after "+Math.round(r-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(n.ended||!n.buffered.length||n.readyState>2||n.seeking&&W.isBuffered(n,a))){var o=r-this.stalled,s=W.bufferInfo(n,a,i.maxBufferHole);this.stalled?(o>=1e3&&this._reportStall(s.len),this._tryFixBufferStall(s,o)):this.stalled=r}},t.prototype._tryFixBufferStall=function(t,e){var i=this.config,n=this.fragmentTracker,a=this.media.currentTime,r=n.getPartialFragment(a);r&&this._trySkipBufferHole(r),t.len>.5&&e>1e3*i.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},t.prototype._reportStall=function(t){var e=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,c.b.warn("Playback stalling at @"+i.currentTime+" due to low buffer"),e.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},t.prototype._trySkipBufferHole=function(t){for(var e=this.hls,i=this.media,n=i.currentTime,a=0,r=0;r<i.buffered.length;r++){var s=i.buffered.start(r);if(n>=a&&n<s)return i.currentTime=Math.max(s,i.currentTime+.1),c.b.warn("skipping hole, adjusting currentTime from "+n+" to "+i.currentTime),this.stalled=null,void e.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+i.currentTime,frag:t});a=i.buffered.end(r)}},t.prototype._tryNudgeBuffer=function(){var t=this.config,e=this.hls,i=this.media,n=i.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<t.nudgeMaxRetry){var r=n+a*t.nudgeOffset;c.b.log("adjust currentTime from "+n+" to "+r),i.currentTime=r,e.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.b.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),e.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_STALLED_ERROR,fatal:!0})},t}(),pt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var ft={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},mt=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MEDIA_ATTACHED,l.a.MEDIA_DETACHING,l.a.MANIFEST_LOADING,l.a.MANIFEST_PARSED,l.a.LEVEL_LOADED,l.a.KEY_LOADED,l.a.FRAG_LOADED,l.a.FRAG_LOAD_EMERGENCY_ABORTED,l.a.FRAG_PARSING_INIT_SEGMENT,l.a.FRAG_PARSING_DATA,l.a.FRAG_PARSED,l.a.ERROR,l.a.AUDIO_TRACK_SWITCHING,l.a.AUDIO_TRACK_SWITCHED,l.a.BUFFER_CREATED,l.a.BUFFER_APPENDED,l.a.BUFFER_FLUSHED));return a.fragmentTracker=n,a.config=i.config,a.audioCodecSwap=!1,a._state=ft.STOPPED,a.stallReported=!1,a.gapController=null,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},e.prototype.onHandlerDestroyed=function(){this.state=ft.STOPPED,this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=i.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1}e>0&&-1===t&&(c.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=ft.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=ft.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=ft.STOPPED,this.forceStartLoad=!1},e.prototype.doTick=function(){switch(this.state){case ft.BUFFER_FLUSHING:this.fragLoadError=0;break;case ft.IDLE:this._doTickIdle();break;case ft.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=ft.IDLE);break;case ft.FRAG_LOADING_WAITING_RETRY:var e=window.performance.now(),i=this.retryDate;(!i||e>=i||this.media&&this.media.seeking)&&(c.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ft.IDLE);break;case ft.ERROR:case ft.STOPPED:case ft.FRAG_LOADING:case ft.PARSING:case ft.PARSED:case ft.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,i=this.media;if(void 0!==this.levelLastLoaded&&(i||!this.startFragRequested&&e.startFragPrefetch)){var n=void 0;n=this.loadedmetadata?i.currentTime:this.nextLoadPosition;var a=t.nextLoadLevel,r=this.levels[a];if(r){var o=r.bitrate,s=void 0;s=o?Math.max(8*e.maxBufferSize/o,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var u=W.bufferInfo(this.mediaBuffer?this.mediaBuffer:i,n,e.maxBufferHole),d=u.len;if(!(d>=s)){c.b.trace("buffer length of "+d.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=a;var h=r.details;if(!h||h.live&&this.levelLastLoaded!==a)this.state=ft.WAITING_LEVEL;else{var p=this.fragPrevious;if(!h.live&&p&&!p.backtracked&&p.sn===h.endSN&&!u.nextStart)if(Math.min(i.duration,p.start+p.duration)-Math.max(u.end,p.start)<=Math.max(.2,p.duration)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(l.a.BUFFER_EOS,f),void(this.state=ft.ENDED)}this._fetchPayloadOrEos(n,u,h)}}}}},e.prototype._fetchPayloadOrEos=function(t,e,i){var n=this.fragPrevious,a=this.level,r=i.fragments,o=r.length;if(0!==o){var s=r[0].start,l=r[o-1].start+r[o-1].duration,u=e.end,d=void 0;if(i.initSegment&&!i.initSegment.data)d=i.initSegment;else if(i.live){var h=this.config.initialLiveManifestSize;if(o<h)return void c.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+h);if(null===(d=this._ensureFragmentAtLivePoint(i,u,s,l,n,r,o)))return}else u<s&&(d=r[0]);d||(d=this._findFragment(s,n,o,r,u,l,i)),d&&(d.encrypted?(c.b.log("Loading key for "+d.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+a),this._loadKey(d)):(c.b.log("Loading "+d.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+a+", currentTime:"+t.toFixed(3)+",bufferEnd:"+u.toFixed(3)),this._loadFragment(d)))}},e.prototype._ensureFragmentAtLivePoint=function(t,e,i,n,a,r,o){var l=this.hls.config,u=this.media,d=void 0,h=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(i-l.maxFragLookUpTolerance,n-h)){var p=this.liveSyncPosition=this.computeLivePosition(i,t);c.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+p.toFixed(3)),e=p,u&&u.readyState&&u.duration>p&&(u.currentTime=p),this.nextLoadPosition=p}if(t.PTSKnown&&e>n&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(a)if(t.hasProgramDateTime)c.b.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),d=function(t,e,i){if(!Array.isArray(t)||!t.length||!Object(s.a)(e))return null;if(e<t[0].programDateTime)return null;if(e>=t[t.length-1].endProgramDateTime)return null;i=i||0;for(var n=0;n<t.length;++n){var a=t[n];if(dt(e,i,a))return a}return null}(r,a.endProgramDateTime,l.maxFragLookUpTolerance);else{var f=a.sn+1;if(f>=t.startSN&&f<=t.endSN){var m=r[f-t.startSN];a.cc===m.cc&&(d=m,c.b.log("live playlist, switching playlist, load frag with next SN: "+d.sn))}d||(d=z.search(r,function(t){return a.cc-t.cc}))&&c.b.log("live playlist, switching playlist, load frag with same CC: "+d.sn)}d||(d=r[Math.min(o-1,Math.round(o/2))],c.b.log("live playlist, switching playlist, unknown, load middle frag : "+d.sn))}return d},e.prototype._findFragment=function(t,e,i,n,a,r,o){var s=this.hls.config,l=void 0;a<r?l=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t?e[t.sn-e[0].sn+1]:null;return a&&!ut(i,n,a)?a:z.search(e,ut.bind(null,i,n))}(e,n,a,a>r-s.maxFragLookUpTolerance?0:s.maxFragLookUpTolerance):l=n[i-1];if(l){var u=l.sn-o.startSN,d=e&&l.level===e.level,h=n[u-1],p=n[u+1];if(e&&l.sn===e.sn)if(d&&!l.backtracked)if(l.sn<o.endSN){var f=e.deltaPTS;f&&f>s.maxBufferHole&&e.dropped&&u?(l=h,c.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(l=p,c.b.log("SN just loaded, load next one: "+l.sn,l))}else l=null;else l.backtracked&&(p&&p.backtracked?(c.b.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+p.sn),l=p):(c.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,h?(l=h).backtracked=!0:u&&(l=null)))}return l},e.prototype._loadKey=function(t){this.state=ft.KEY_LOADING,this.hls.trigger(l.a.KEY_LOADING,{frag:t})},e.prototype._loadFragment=function(t){var e=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,Object(s.a)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||e===U||e===q?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(l.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new et(this.hls,"main")),this.state=ft.FRAG_LOADING):e===j&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},e.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,F.LevelType.MAIN)},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t=void 0,e=void 0,i=this.media;if(i&&i.readyState&&!1===i.seeking&&((e=i.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),W.isBuffered(i,e)?t=this.getBufferedFrag(e):W.isBuffered(i,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(l.a.FRAG_CHANGED,{frag:n});var a=n.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(l.a.LEVEL_SWITCHED,{level:a}),this.fragPlaying=n}}},e.prototype.immediateLevelSwitch=function(){if(c.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var i=this.fragCurrent;i&&i.loader&&i.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,W.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,i=void 0,n=void 0;if((e=this.getBufferedFrag(t.currentTime))&&e.startPTS>1&&this.flushMainBuffer(0,e.startPTS-1),t.paused)i=0;else{var a=this.hls.nextLoadLevel,r=this.levels[a],o=this.fragLastKbps;i=o&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*o)+1:0}if((n=this.getBufferedFrag(t.currentTime+i))&&(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=ft.BUFFER_FLUSHING;var i={startOffset:t,endOffset:e};this.altAudio&&(i.type="video"),this.hls.trigger(l.a.BUFFER_FLUSHING,i)},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.hls.startLoad(i.startPosition),this.gapController=new ht(i,e,this.fragmentTracker,this.hls)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,i=this.config;Object(s.a)(e)&&c.b.log("media seeking to "+e.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:t,a=W.bufferInfo(n,e,this.config.maxBufferHole);if(this.state===ft.FRAG_LOADING){var r=this.fragCurrent;if(0===a.len&&r){var o=i.maxFragLookUpTolerance,l=r.start-o,u=r.start+r.duration+o;e<l||e>u?(r.loader&&(c.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ft.IDLE):c.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===ft.ENDED&&(0===a.len&&(this.fragPrevious=0),this.state=ft.IDLE);t&&(this.lastCurrentTime=e),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(s.a)(e)&&c.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onMediaEnded=function(){c.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestLoading=function(){c.b.log("trigger BUFFER_RESET"),this.hls.trigger(l.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestParsed=function(t){var e=!1,i=!1,n=void 0;t.levels.forEach(function(t){(n=t.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(e=!0),-1!==n.indexOf("mp4a.40.5")&&(i=!0))}),this.audioCodecSwitch=e&&i,this.audioCodecSwitch&&c.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,i=t.level,n=this.levels[this.levelLastLoaded],a=this.levels[i],r=e.totalduration,o=0;if(c.b.log("level "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),e.live){var u=a.details;u&&e.fragments.length>0?(rt(u,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,u),e.PTSKnown&&Object(s.a)(o)?c.b.log("live playlist sliding:"+o.toFixed(3)):(c.b.log("live playlist - outdated PTS, unknown sliding"),lt(this.fragPrevious,n,e))):(c.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,lt(this.fragPrevious,n,e))}else e.PTSKnown=!1;if(a.details=e,this.levelLastLoaded=i,this.hls.trigger(l.a.LEVEL_UPDATED,{details:e,level:i}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=e.startTimeOffset;Object(s.a)(d)?(d<0&&(c.b.log("negative start time offset "+d+", count from end of last fragment"),d=o+r+d),c.b.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):e.live?(this.startPosition=this.computeLivePosition(o,e),c.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ft.WAITING_LEVEL&&(this.state=ft.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===ft.KEY_LOADING&&(this.state=ft.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,i=this.hls,n=this.levels,a=this.media,r=t.frag;if(this.state===ft.FRAG_LOADING&&e&&"main"===r.type&&r.level===e.level&&r.sn===e.sn){var o=t.stats,s=n[e.level],u=s.details;if(this.bitrateTest=!1,this.stats=o,c.b.log("Loaded "+e.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+e.level),r.bitrateTest&&i.nextLoadLevel)this.state=ft.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),i.trigger(l.a.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=ft.IDLE,o.tparsed=o.tbuffered=window.performance.now(),u.initSegment.data=t.payload,i.trigger(l.a.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else{c.b.log("Parsing "+e.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+e.level+", cc "+e.cc),this.state=ft.PARSING,this.pendingBuffering=!0,this.appended=!1,r.bitrateTest&&(r.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:r}));var d=!(a&&a.seeking)&&(u.PTSKnown||!u.live),h=u.initSegment?u.initSegment.data:[],p=this._getAudioCodec(s);(this.demuxer=this.demuxer||new et(this.hls,"main")).push(t.payload,h,p,s.videoCodec,e,u.totalduration,d)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;if(e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===ft.PARSING){var n=t.tracks,a=void 0,r=void 0;if(n.audio&&this.altAudio&&delete n.audio,r=n.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==r.container&&(o="mp4a.40.2",c.b.log("Android: force audio codec to "+o)),r.levelCodec=o,r.id=t.id}for(a in(r=n.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=t.id),this.hls.trigger(l.a.BUFFER_CODECS,n),n){r=n[a],c.b.log("main track:"+a+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var u=r.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.a.BUFFER_APPENDING,{type:a,data:u,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,i=this.fragCurrent,n=t.frag;if(i&&"main"===t.id&&n.sn===i.sn&&n.level===i.level&&("audio"!==t.type||!this.altAudio)&&this.state===ft.PARSING){var a=this.levels[this.level],r=i;if(Object(s.a)(t.endPTS)||(t.endPTS=t.startPTS+i.duration,t.endDTS=t.startDTS+i.duration),!0===t.hasAudio&&r.addElementaryStream(y.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&r.addElementaryStream(y.ElementaryStreamTypes.VIDEO),c.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(r.dropped=t.dropped,r.dropped)if(r.backtracked)c.b.warn("Already backtracked on this fragment, appending with the gap",r.sn);else{var o=a.details;if(!o||r.sn!==o.startSN)return c.b.warn("missing video frame(s), backtracking fragment",r.sn),this.fragmentTracker.removeFragment(r),r.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=ft.IDLE,this.fragPrevious=r,void this.tick();c.b.warn("missing video frame(s) on first frag, appending with gap",r.sn)}else r.backtracked=!1;var u=at(a.details,r,t.startPTS,t.endPTS,t.startDTS,t.endDTS),d=this.hls;d.trigger(l.a.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:u,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(i){i&&i.length&&e.state===ft.PARSING&&(e.appended=!0,e.pendingBuffering=!0,d.trigger(l.a.BUFFER_APPENDING,{type:t.type,data:i,parent:"main",content:"data"}))}),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,i=t.frag;e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===ft.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=ft.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,i=t.id;if(!e){if(this.mediaBuffer!==this.media){c.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(c.b.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ft.IDLE}var a=this.hls;a.trigger(l.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(l.a.AUDIO_TRACK_SWITCHED,{id:i}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=t.id,i=!!this.hls.audioTracks[e].url;if(i){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(c.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=i,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,i=void 0,n=void 0,a=!1;for(var r in e){var o=e[r];"main"===o.id?(n=r,i=o,"video"===r&&(this.videoBuffer=e[r].buffer)):a=!0}a&&i?(c.b.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==ft.PARSING&&e!==ft.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==ft.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;c.b.log("main buffered : "+ot.toString(e.buffered)),this.fragPrevious=t;var i=this.stats;i.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(l.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.state=ft.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var i=!!this.media&&W.isBuffered(this.media,this.media.currentTime)&&W.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.b.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ft.FRAG_LOADING_WAITING_RETRY}else c.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ft.ERROR;break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:this.state!==ft.ERROR&&(t.fatal?(this.state=ft.ERROR,c.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==ft.WAITING_LEVEL||(this.state=ft.IDLE));break;case o.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==ft.PARSING&&this.state!==ft.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ft.IDLE):(c.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,c.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},e.prototype._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e)}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=ft.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(y.ElementaryStreamTypes.VIDEO,t.buffered),this.state=ft.IDLE,this.fragPrevious=null},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){var i=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-i)},e.prototype._seekToStartPos=function(){var t=this.media,e=t.currentTime,i=t.seeking?e:this.startPosition;e!==i&&(c.b.log("target start position not buffered, seek to buffered.start(0) "+i+" from current time "+e+" "),t.currentTime=i)},e.prototype._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},pt(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,c.b.log("main stream:"+e+"->"+t),this.hls.trigger(l.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(ct),vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var gt=window.performance,bt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MANIFEST_LOADED,l.a.LEVEL_LOADED,l.a.AUDIO_TRACK_SWITCHED,l.a.FRAG_LOADED,l.a.ERROR));return n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},e.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e=[],i=void 0,n={},a=null,r=!1,s=!1,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,r=r||!!t.videoCodec,s=s||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),u&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(a=n[t.bitrate])?a.url.push(t.url):(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)),t.attrs&&t.attrs.AUDIO&&it(a||t,"audio",t.attrs.AUDIO),t.attrs&&t.attrs.SUBTITLES&&it(a||t,"text",t.attrs.SUBTITLES)}),r&&s&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var e=t.audioCodec,i=t.videoCodec;return(!e||A(e))&&(!i||A(i))}),t.audioTracks&&(d=t.audioTracks.filter(function(t){return!t.audioCodec||A(t.audioCodec,"audio")})).forEach(function(t,e){t.id=e}),e.length>0){i=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var h=0;h<e.length;h++)if(e[h].bitrate===i){this._firstLevel=h,c.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(l.a.MANIFEST_PARSED,{levels:e,audioTracks:d,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:r,altAudio:d.length>0&&r})}else this.hls.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,i=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){c.b.log("switching to level "+t),this.currentLevelIndex=t;var n=e[t];n.level=t,i.trigger(l.a.LEVEL_SWITCHING,n)}var a=e[t],r=a.details;if(!r||r.live){var s=a.urlId;i.trigger(l.a.LEVEL_LOADING,{url:a.url[s],level:t,id:s})}}else i.trigger(l.a.ERROR,{type:o.b.OTHER_ERROR,details:o.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(t.fatal)t.type===o.b.NETWORK_ERROR&&this.clearTimer();else{var e=!1,i=!1,n=void 0;switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:n=t.frag.level,i=!0;break;case o.a.LEVEL_LOAD_ERROR:case o.a.LEVEL_LOAD_TIMEOUT:n=t.context.level,e=!0;break;case o.a.REMUX_ALLOC_ERROR:n=t.level,e=!0}void 0!==n&&this.recoverLevel(t,n,e,i)}},e.prototype.recoverLevel=function(t,e,i,n){var a=this,r=this.hls.config,o=t.details,s=this._levels[e],l=void 0,u=void 0,d=void 0;if(s.loadError++,s.fragmentError=n,i){if(!(this.levelRetryCount+1<=r.levelLoadingMaxRetry))return c.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);u=Math.min(Math.pow(2,this.levelRetryCount)*r.levelLoadingRetryDelay,r.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return a.loadLevel()},u),t.levelRetry=!0,this.levelRetryCount++,c.b.warn("level controller, "+o+", retry in "+u+" ms, current retry count is "+this.levelRetryCount)}(i||n)&&((l=s.url.length)>1&&s.loadError<l?(s.urlId=(s.urlId+1)%l,s.details=void 0,c.b.warn("level controller, "+o+" for level "+e+": switching to redundant URL-id "+s.urlId)):-1===this.manualLevelIndex?(d=0===e?this._levels.length-1:e-1,c.b.warn("level controller, "+o+": switch to "+d),this.hls.nextAutoLevel=this.currentLevelIndex=d):n&&(c.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var i=this._levels[e.level];void 0!==i&&(i.fragmentError=!1,i.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,i=t.level;if(i===this.currentLevelIndex){var n=this._levels[i];n.fragmentError||(n.loadError=0,this.levelRetryCount=0);var a=t.details;if(a.live){var r=1e3*(a.averagetargetduration?a.averagetargetduration:a.targetduration),o=r,s=n.details;s&&a.endSN===s.endSN&&(o/=2,c.b.log("same live playlist, reload twice faster")),o-=gt.now()-t.stats.trequest,o=Math.max(r/2,Math.round(o)),c.b.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},o)}else this.clearTimer()}},e.prototype.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,i=this.hls.levels[this.currentLevelIndex];if(i&&i.audioGroupIds){var n=i.audioGroupIds.findIndex(function(t){return t===e});n!==i.urlId&&(i.urlId=n,this.startLoad())}},e.prototype.loadLevel=function(){if(c.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"===(void 0===t?"undefined":vt(t))&&t.url.length>0){var e=this.currentLevelIndex,i=t.urlId,n=t.url[i];c.b.log("Attempt loading level index "+e+" with URL-id "+i),this.hls.trigger(l.a.LEVEL_LOADING,{url:n,level:e,id:i})}}},yt(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(h),wt=i(6);function Et(t,e){var i=null;try{i=new window.Event("addtrack")}catch(t){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=t,e.dispatchEvent(i)}function Tt(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}var St=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MEDIA_ATTACHED,l.a.MEDIA_DETACHING,l.a.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){h.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,this.media},e.prototype.onMediaDetaching=function(){Tt(this.id3Track),this.id3Track=void 0,this.media=void 0},e.prototype.getID3Track=function(t){for(var e=0;e<t.length;e++){var i=t[e];if("metadata"===i.kind&&"id3"===i.label)return Et(i,this.media),i}return this.media.addTextTrack("metadata","id3")},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,i=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<i.length;a++){var r=wt.a.getID3Frames(i[a].data);if(r){var o=i[a].pts,s=a<i.length-1?i[a+1].pts:e.endPTS;o===s&&(s+=1e-4);for(var l=0;l<r.length;l++){var c=r[l];if(!wt.a.isTimeStampFrame(c)){var u=new n(o,s,"");u.value=c,this.id3Track.addCue(u)}}}}},e}(h);var At=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var i=Math.pow(this.alpha_,t);this.estimate_=e*(1-i)+i*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}();var kt=function(){function t(e,i,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=e,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new At(i),this.fast_=new At(n)}return t.prototype.sample=function(t,e){var i=8e3*e/(t=Math.max(t,this.minDelayMs_)),n=t/1e3;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}(),_t=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Lt=window.performance,xt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.FRAG_LOADING,l.a.FRAG_LOADED,l.a.FRAG_BUFFERED,l.a.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=i,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.clearTimer(),h.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var i=this.hls,n=i.config,a=e.level,r=void 0,o=void 0;i.levels[a].details.live?(r=n.abrEwmaFastLive,o=n.abrEwmaSlowLive):(r=n.abrEwmaFastVoD,o=n.abrEwmaSlowVoD),this._bwEstimator=new kt(i,o,r,n.abrEwmaDefaultEstimate)}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,i=this.fragCurrent;if(i){var n=i.loader,a=t.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return c.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var r=n.stats;if(e&&r&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&i.autoLevel&&i.level){var o=Lt.now()-r.trequest,s=Math.abs(e.playbackRate);if(o>500*i.duration/s){var u=t.levels,d=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/o),h=u[i.level],p=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,f=r.total?r.total:Math.max(r.loaded,Math.round(i.duration*p/8)),m=e.currentTime,v=(f-r.loaded)/d,y=(W.bufferInfo(e,m,t.config.maxBufferHole).end-m)/s;if(y<2*i.duration/s&&v>y){var g=void 0,b=void 0;for(b=i.level-1;b>a;b--){var w=u[b].realBitrate?Math.max(u[b].realBitrate,u[b].bitrate):u[b].bitrate;if((g=i.duration*w/(6.4*d))<y)break}g<v&&(c.b.warn("loading too slow, abort fragment loading and switch to level "+b+":fragLoadedDelay["+b+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+g.toFixed(1)+"<"+v.toFixed(1)+":"+y.toFixed(1)),t.nextLoadLevel=b,this._bwEstimator.sample(o,r.loaded),n.abort(),this.clearTimer(),t.trigger(l.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:r}))}}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(s.a)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var i=this.hls.levels[e.level],n=(i.loaded?i.loaded.bytes:0)+t.stats.loaded,a=(i.loaded?i.loaded.duration:0)+t.frag.duration;i.loaded={bytes:n,duration:a},i.realBitrate=Math.round(8*n/a)}if(t.frag.bitrateTest){var r=t.stats;r.tparsed=r.tbuffered=r.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,i=t.frag;if(!0!==e.aborted&&"main"===i.type&&Object(s.a)(i.sn)&&(!i.bitrateTest||e.tload===e.tbuffered)){var n=e.tparsed-e.trequest;c.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(n,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},e.prototype.onError=function(t){switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,i,n,a,r,o,s,l){for(var u=a;u>=n;u--){var d=l[u];if(d){var h=d.details,p=h?h.totalduration/h.fragments.length:e,f=!!h&&h.live,m=void 0;m=u<=t?o*i:s*i;var v=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,y=v*p/m;if(c.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(m)+"/"+v+"/"+p+"/"+r+"/"+y),m>v&&(!y||f&&!this.bitrateTestDelay||y<r))return u}}return-1},_t(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var i=this._nextABRAutoLevel;return-1!==t&&(i=Math.min(t,i)),i},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,i=t.levels,n=t.config,a=t.minAutoLevel,r=t.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=r?r.currentTime:0,u=r&&0!==r.playbackRate?Math.abs(r.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(W.bufferInfo(r,l,n.maxBufferHole).end-l)/u,p=this._findBestLevel(o,s,d,a,e,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,i);if(p>=0)return p;c.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,m=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(0===h){var y=this.bitrateTestDelay;if(y)f=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-y,c.b.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),m=v=1}return p=this._findBestLevel(o,s,d,a,e,h+f,m,v,i),Math.max(p,0)}}]),e}(h);var Rt=J(),Ct=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MEDIA_ATTACHING,l.a.MEDIA_DETACHING,l.a.MANIFEST_PARSED,l.a.BUFFER_RESET,l.a.BUFFER_APPENDING,l.a.BUFFER_CODECS,l.a.BUFFER_EOS,l.a.BUFFER_FLUSHING,l.a.LEVEL_PTS_UPDATED,l.a.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n._live=null,n._objectUrl=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){h.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=t.type,i=this.tracks.audio;if("audio"===e&&i&&"audio/mpeg"===i.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-t.start)>.1){var a=n.updating;try{n.abort()}catch(t){a=!0,c.b.warn("can not abort audio buffer: "+t)}a?this.audioTimestampOffset=t.start:(c.b.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+t.start),n.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){var e=t.audio,i=t.video||t.levels.length&&t.altAudio,n=0;t.altAudio&&(e||i)&&(n=(e?1:0)+(i?1:0),c.b.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var i=this.mediaSource=new Rt;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),i.addEventListener("sourceopen",this.onmso),i.addEventListener("sourceended",this.onmse),i.addEventListener("sourceclose",this.onmsc),e.src=window.URL.createObjectURL(i),this._objectUrl=e.src}},e.prototype.onMediaDetaching=function(){c.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){c.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){c.b.log("media source opened"),this.hls.trigger(l.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){c.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){c.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;c.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,i=this.segments.reduce(function(t,i){return i.parent===e?t+1:t},0),n={},a=this.sourceBuffer;for(var r in a)n[r]=a[r].buffered;this.hls.trigger(l.a.BUFFER_APPENDED,{parent:e,pending:i,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},e.prototype.onSBUpdateError=function(t){c.b.error("sourceBuffer error:",t),this.hls.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var i=t[e];try{this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this.onsbue),i.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var i=this.mediaSource;i&&"open"===i.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,i=this.mediaSource;for(var n in t)if(!e[n]){var a=t[n],r=a.levelCodec||a.codec,s=a.container+";codecs="+r;c.b.log("creating sourceBuffer("+s+")");try{var u=e[n]=i.addSourceBuffer(s);u.addEventListener("updateend",this.onsbue),u.addEventListener("error",this.onsbe),this.tracks[n]={codec:r,container:a.container},a.buffer=u}catch(t){c.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:s})}}this.hls.trigger(l.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){c.b.error("sourceBuffer error:",t.event),this.hls.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,i=t.type;for(var n in e)i&&n!==i||e[n].ended||(e[n].ended=!0,c.b.log(n+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var i in t){var n=t[i];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}c.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){c.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t,e=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var i in this.sourceBuffer)if(!0===this.sourceBuffer[i].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(c.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(s.a)(t))&&(c.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,i=this.sourceBuffer;try{for(var n in i)e+=i[n].buffered.length}catch(t){c.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(l.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,i=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void c.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(i&&i.length){var n=i.shift();try{var a=e[n.type];a?a.updating?i.unshift(n):(a.ended=!1,this.parent=n.parent,a.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){c.b.error("error while trying to append buffer:"+e.message),i.unshift(n);var r={type:o.b.MEDIA_ERROR,parent:n.parent};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,r.details=o.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(c.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),i=[],r.fatal=!0,t.trigger(l.a.ERROR,r)):(r.fatal=!1,t.trigger(l.a.ERROR,r))):(this.segments=[],r.details=o.a.BUFFER_FULL_ERROR,r.fatal=!1,t.trigger(l.a.ERROR,r))}}}},e.prototype.flushBuffer=function(t,e,i){var n=void 0,a=void 0,r=void 0,o=void 0,s=void 0,l=void 0,u=this.sourceBuffer;if(Object.keys(u).length){if(c.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var d in u)if(!i||d===i){if((n=u[d]).ended=!1,n.updating)return c.b.warn("cannot flush, sb updating in progress"),!1;try{for(a=0;a<n.buffered.length;a++)if(r=n.buffered.start(a),o=n.buffered.end(a),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(s=t,l=e):(s=Math.max(r,t),l=Math.min(o,e)),Math.min(l,o)-s>.5)return this.flushBufferCounter++,c.b.log("flush "+d+" ["+s+","+l+"], of ["+r+","+o+"], pos:"+this.media.currentTime),n.remove(s,l),!1}catch(t){c.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else c.b.warn("abort flushing too many retries");c.b.log("buffer flushed")}return!0},e}(h),Dt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Ot=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.FPS_DROP_LEVEL_CAPPING,l.a.MEDIA_ATTACHING,l.a.MANIFEST_PARSED,l.a.BUFFER_CODECS,l.a.MEDIA_DETACHING));return n.autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&(t.video||t.levels.length&&t.altAudio)&&this._startCapping()},e.prototype.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this._startCapping()},e.prototype.onLevelsUpdated=function(t){this.levels=t.levels},e.prototype.onMediaDetaching=function(){this._stopCapping()},e.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var i=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,a){return e.isLevelAllowed(a,i.restrictedLevels)&&a<=t});return e.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},e.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},e.isLevelAllowed=function(t){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,i){if(!t||t&&!t.length)return-1;for(var n,a,r=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=i)&&(n=s,!(a=t[o+1])||n.width!==a.width||n.height!==a.height)){r=o;break}}return r},Dt(e,[{key:"mediaWidth",get:function(){var t=void 0,i=this.media;return i&&(t=i.width||i.clientWidth||i.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,i=this.media;return i&&(t=i.height||i.clientHeight||i.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(h);var It=window.performance,Mt=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MEDIA_ATTACHING))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},e.prototype.checkFPS=function(t,e,i){var n=It.now();if(e){if(this.lastTime){var a=n-this.lastTime,r=i-this.lastDroppedFrames,o=e-this.lastDecodedFrames,s=1e3*r/a,u=this.hls;if(u.trigger(l.a.FPS_DROP,{currentDropped:r,currentDecoded:o,totalDroppedFrames:i}),s>0&&r>u.config.fpsDroppedMonitoringThreshold*o){var d=u.currentLevel;c.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=d)&&(d-=1,u.trigger(l.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,u.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(h);var Pt=window,Ft=Pt.performance,Nt=Pt.XMLHttpRequest,Bt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,i){this.context=t,this.config=e,this.callbacks=i,this.stats={trequest:Ft.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t=void 0,e=this.context;t=this.loader=new Nt;var i=this.stats;i.tfirst=0,i.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(i){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(i){return void this.callbacks.onError({code:t.status,text:i.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,i=e.readyState,n=this.stats,a=this.context,r=this.config;if(!n.aborted&&i>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(Ft.now(),n.trequest)),4===i){var o=e.status;if(o>=200&&o<300){n.tload=Math.max(n.tfirst,Ft.now());var s=void 0,l=void 0;l="arraybuffer"===a.responseType?(s=e.response).byteLength:(s=e.responseText).length,n.loaded=n.total=l;var u={url:e.responseURL,data:s};this.callbacks.onSuccess(u,n,a,e)}else n.retry>=r.maxRetry||o>=400&&o<499?(c.b.error(o+" while loading "+a.url),this.callbacks.onError({code:o,text:e.statusText},a,e)):(c.b.warn(o+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,r.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),r.timeout)},t.prototype.loadtimeout=function(){c.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,i=this.stats;i.loaded=t.loaded,t.lengthComputable&&(i.total=t.total);var n=this.callbacks.onProgress;n&&n(i,this.context,null,e)},t}(),Ut=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var jt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MANIFEST_LOADING,l.a.MANIFEST_PARSED,l.a.AUDIO_TRACK_LOADED,l.a.AUDIO_TRACK_SWITCHED,l.a.LEVEL_LOADED,l.a.ERROR));return n._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},e.prototype.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(l.a.AUDIO_TRACKS_UPDATED,{audioTracks:e})},e.prototype.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)c.b.warn("Invalid audio track id:",t.id);else{if(c.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()}},e.prototype.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},e.prototype.onLevelLoaded=function(t){var e=this.hls.levels[t.level];if(e.audioGroupIds){var i=e.audioGroupIds[e.urlId];this.audioGroupId!==i&&(this.audioGroupId=i,this._selectInitialAudioTrack())}},e.prototype.onError=function(t){t.type===o.b.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===o.a.AUDIO_TRACK_LOAD_ERROR&&(c.b.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},e.prototype._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)c.b.debug("Same id as current audio-track passed, and track details available -> no-op");else if(t<0||t>=this.tracks.length)c.b.warn("Invalid id passed to audio-track controller");else{var e=this.tracks[t];c.b.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var i=e.url,n=e.type,a=e.id;this.hls.trigger(l.a.AUDIO_TRACK_SWITCHING,{id:a,type:n,url:i}),this._loadTrackDetailsIfNeeded(e)}},e.prototype.doTick=function(){this._updateTrack(this._trackId)},e.prototype._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var i=this.tracks[this._trackId],n=null;if(i&&(n=i.name),this._selectDefaultTrack){var a=e.filter(function(t){return t.default});a.length?e=a:c.b.warn("No default audio tracks defined")}var r=!1,s=function(){e.forEach(function(e){r||t.audioGroupId&&e.groupId!==t.audioGroupId||n&&n!==e.name||(t._setAudioTrack(e.id),r=!0)})};s(),r||(n=null,s()),r||(c.b.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},e.prototype._needsTrackLoading=function(t){var e=t.details;return!e||(!!e.live||void 0)},e.prototype._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,i=t.id;c.b.log("loading audio-track playlist for id: "+i),this.hls.trigger(l.a.AUDIO_TRACK_LOADING,{url:e,id:i})}},e.prototype._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,c.b.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},e.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],i=e.name,n=e.language,a=e.groupId;c.b.warn("Loading failed on audio track id: "+t+", group-id: "+a+', name/language: "'+i+'" / "'+n+'"');for(var r=t,o=0;o<this.tracks.length;o++){if(!this.trackIdBlacklist[o])if(this.tracks[o].name===i){r=o;break}}r!==t?(c.b.log("Attempting audio-track fallback id:",r,"group-id:",this.tracks[r].groupId),this._setAudioTrack(r)):c.b.warn('No fallback audio-track found for name/language: "'+i+'" / "'+n+'"')},Ut(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}]),e}(ct),qt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Gt=window.performance,Ht={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},zt=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MEDIA_ATTACHED,l.a.MEDIA_DETACHING,l.a.AUDIO_TRACKS_UPDATED,l.a.AUDIO_TRACK_SWITCHING,l.a.AUDIO_TRACK_LOADED,l.a.KEY_LOADED,l.a.FRAG_LOADED,l.a.FRAG_PARSING_INIT_SEGMENT,l.a.FRAG_PARSING_DATA,l.a.FRAG_PARSED,l.a.ERROR,l.a.BUFFER_RESET,l.a.BUFFER_CREATED,l.a.BUFFER_APPENDED,l.a.BUFFER_FLUSHED,l.a.INIT_PTS_FOUND));return a.fragmentTracker=n,a.config=i.config,a.audioCodecSwap=!1,a._state=Ht.STOPPED,a.initPTS=[],a.waitingFragment=null,a.videoTrackCC=null,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},e.prototype.onHandlerDestroyed=function(){this.state=Ht.STOPPED,this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},e.prototype.onInitPtsFound=function(t){var e=t.id,i=t.frag.cc,n=t.initPTS;"main"===e&&(this.initPTS[i]=n,this.videoTrackCC=i,c.b.log("InitPTS for cc: "+i+" found from video track: "+n),this.state===Ht.WAITING_INIT_PTS&&this.tick())},e.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(c.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=Ht.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=Ht.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=Ht.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Ht.STOPPED},e.prototype.doTick=function(){var t=void 0,e=void 0,i=void 0,n=this.hls,a=n.config;switch(this.state){case Ht.ERROR:case Ht.PAUSED:case Ht.BUFFER_FLUSHING:break;case Ht.STARTING:this.state=Ht.WAITING_TRACK,this.loadedmetadata=!1;break;case Ht.IDLE:var r=this.tracks;if(!r)break;if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,u=this.videoBuffer?this.videoBuffer:this.media,d=W.bufferInfo(o,t,a.maxBufferHole),h=W.bufferInfo(u,t,a.maxBufferHole),p=d.len,f=d.end,m=this.fragPrevious,v=Math.min(a.maxBufferLength,a.maxMaxBufferLength),y=Math.max(v,h.len),g=this.audioSwitch,b=this.trackId;if((p<y||g)&&b<r.length){if(void 0===(i=r[b].details)){this.state=Ht.WAITING_TRACK;break}if(!g&&!i.live&&m&&m.sn===i.endSN&&!d.nextStart&&(!this.media.seeking||this.media.duration-f<m.duration/2)){this.hls.trigger(l.a.BUFFER_EOS,{type:"audio"}),this.state=Ht.ENDED;break}var w=i.fragments,E=w.length,T=w[0].start,S=w[E-1].start+w[E-1].duration,A=void 0;if(g)if(i.live&&!i.PTSKnown)c.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),f=0;else if(f=t,i.PTSKnown&&t<T){if(!(d.end>T||d.nextStart))return;c.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=T+.05}if(i.initSegment&&!i.initSegment.data)A=i.initSegment;else if(f<=T){if(A=w[0],null!==this.videoTrackCC&&A.cc!==this.videoTrackCC&&(A=function(t,e){return z.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}(w,this.videoTrackCC)),i.live&&A.loadIdx&&A.loadIdx===this.fragLoadIdx){var k=d.nextStart?d.nextStart:T;return c.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(k+.05)),void(this.media.currentTime=k+.05)}}else{var _=void 0,L=a.maxFragLookUpTolerance,x=m?w[m.sn-w[0].sn+1]:void 0,R=function(t){var e=Math.min(L,t.duration);return t.start+t.duration-e<=f?1:t.start-e>f&&t.start?-1:0};f<S?(f>S-L&&(L=0),_=x&&!R(x)?x:z.search(w,R)):_=w[E-1],_&&(A=_,T=_.start,m&&A.level===m.level&&A.sn===m.sn&&(A.sn<i.endSN?(A=w[A.sn+1-i.startSN],c.b.log("SN just loaded, load next one: "+A.sn)):A=null))}A&&(A.encrypted?(c.b.log("Loading key for "+A.sn+" of ["+i.startSN+" ,"+i.endSN+"],track "+b),this.state=Ht.KEY_LOADING,n.trigger(l.a.KEY_LOADING,{frag:A})):(c.b.log("Loading "+A.sn+", cc: "+A.cc+" of ["+i.startSN+" ,"+i.endSN+"],track "+b+", currentTime:"+t+",bufferEnd:"+f.toFixed(3)),(g||this.fragmentTracker.getState(A)===U)&&(this.fragCurrent=A,this.startFragRequested=!0,Object(s.a)(A.sn)&&(this.nextLoadPosition=A.start+A.duration),n.trigger(l.a.FRAG_LOADING,{frag:A}),this.state=Ht.FRAG_LOADING)))}break;case Ht.WAITING_TRACK:(e=this.tracks[this.trackId])&&e.details&&(this.state=Ht.IDLE);break;case Ht.FRAG_LOADING_WAITING_RETRY:var C=Gt.now(),D=this.retryDate,O=(o=this.media)&&o.seeking;(!D||C>=D||O)&&(c.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Ht.IDLE);break;case Ht.WAITING_INIT_PTS:var I=this.videoTrackCC;if(void 0===this.initPTS[I])break;var M=this.waitingFragment;if(M){var P=M.frag.cc;I!==P?(e=this.tracks[this.trackId]).details&&e.details.live&&(c.b.warn("Waiting fragment CC ("+P+") does not match video track CC ("+I+")"),this.waitingFragment=null,this.state=Ht.IDLE):(this.state=Ht.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=Ht.IDLE;break;case Ht.STOPPED:case Ht.FRAG_LOADING:case Ht.PARSING:case Ht.PARSED:case Ht.ENDED:}},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var i=this.config;this.tracks&&i.autoStartLoad&&this.startLoad(i.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){this.state===Ht.ENDED&&(this.state=Ht.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},e.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},e.prototype.onAudioTracksUpdated=function(t){c.b.log("audio tracks updated"),this.tracks=t.audioTracks},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=Ht.PAUSED,this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=Ht.IDLE),this.tick()},e.prototype.onAudioTrackLoaded=function(t){var e=t.details,i=t.id,n=this.tracks[i],a=e.totalduration,r=0;if(c.b.log("track "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live){var o=n.details;o&&e.fragments.length>0?(rt(o,e),r=e.fragments[0].start,e.PTSKnown?c.b.log("live audio playlist sliding:"+r.toFixed(3)):c.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,c.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(n.details=e,!this.startFragRequested){if(-1===this.startPosition){var l=e.startTimeOffset;Object(s.a)(l)?(c.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Ht.WAITING_TRACK&&(this.state=Ht.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===Ht.KEY_LOADING&&(this.state=Ht.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag;if(this.state===Ht.FRAG_LOADING&&e&&"audio"===i.type&&i.level===e.level&&i.sn===e.sn){var n=this.tracks[this.trackId],a=n.details,r=a.totalduration,o=e.level,s=e.sn,u=e.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=t.stats;if("initSegment"===s)this.state=Ht.IDLE,h.tparsed=h.tbuffered=Gt.now(),a.initSegment.data=t.payload,this.hls.trigger(l.a.FRAG_BUFFERED,{stats:h,frag:e,id:"audio"}),this.tick();else{this.state=Ht.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new et(this.hls,"audio"));var p=this.initPTS[u],f=a.initSegment?a.initSegment.data:[];if(a.initSegment||void 0!==p){this.pendingBuffering=!0,c.b.log("Demuxing "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o);this.demuxer.push(t.payload,f,d,null,e,r,!1,p)}else c.b.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.waitingFragment=t,this.state=Ht.WAITING_INIT_PTS}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;if(e&&"audio"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===Ht.PARSING){var n=t.tracks,a=void 0;if(n.video&&delete n.video,a=n.audio){a.levelCodec=a.codec,a.id=t.id,this.hls.trigger(l.a.BUFFER_CODECS,n),c.b.log("audio track:audio,container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var r=a.initSegment;if(r){var o={type:"audio",data:r,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.a.BUFFER_APPENDING,o))}this.tick()}}},e.prototype.onFragParsingData=function(t){var e=this,i=this.fragCurrent,n=t.frag;if(i&&"audio"===t.id&&"audio"===t.type&&n.sn===i.sn&&n.level===i.level&&this.state===Ht.PARSING){var a=this.trackId,r=this.tracks[a],u=this.hls;Object(s.a)(t.endPTS)||(t.endPTS=t.startPTS+i.duration,t.endDTS=t.startDTS+i.duration),i.addElementaryStream(y.ElementaryStreamTypes.AUDIO),c.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),at(r.details,i,t.startPTS,t.endPTS);var d=this.audioSwitch,h=this.media,p=!1;if(d&&h)if(h.readyState){var f=h.currentTime;c.b.log("switching audio track : currentTime:"+f),f>=t.startPTS&&(c.b.log("switching audio track : flushing all audio"),this.state=Ht.BUFFER_FLUSHING,u.trigger(l.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),p=!0,this.audioSwitch=!1,u.trigger(l.a.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,u.trigger(l.a.AUDIO_TRACK_SWITCHED,{id:a});var m=this.pendingData;if(!m)return c.b.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void u.trigger(l.a.ERROR,{type:o.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&m.push({type:t.type,data:e,parent:"audio",content:"data"})}),!p&&m.length&&(m.forEach(function(t){e.state===Ht.PARSING&&(e.pendingBuffering=!0,e.hls.trigger(l.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,i=t.frag;e&&"audio"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===Ht.PARSING&&(this.stats.tparsed=Gt.now(),this.state=Ht.PARSED,this._checkAppendedParsed())},e.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},e.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==Ht.PARSING&&e!==Ht.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==Ht.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,i=this.hls;if(t){this.fragPrevious=t,e.tbuffered=Gt.now(),i.trigger(l.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;c.b.log("audio buffered : "+ot.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,i.trigger(l.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Ht.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case o.a.FRAG_LOAD_ERROR:case o.a.FRAG_LOAD_TIMEOUT:var i=t.frag;if(i&&"audio"!==i.type)break;if(!t.fatal){var n=this.fragLoadError;n?n++:n=1;var a=this.config;if(n<=a.fragLoadingMaxRetry){this.fragLoadError=n;var r=Math.min(Math.pow(2,n-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);c.b.warn("AudioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=Gt.now()+r,this.state=Ht.FRAG_LOADING_WAITING_RETRY}else c.b.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Ht.ERROR}break;case o.a.AUDIO_TRACK_LOAD_ERROR:case o.a.AUDIO_TRACK_LOAD_TIMEOUT:case o.a.KEY_LOAD_ERROR:case o.a.KEY_LOAD_TIMEOUT:this.state!==Ht.ERROR&&(this.state=t.fatal?Ht.ERROR:Ht.IDLE,c.b.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case o.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===Ht.PARSING||this.state===Ht.PARSED)){var s=this.mediaBuffer,u=this.media.currentTime;if(s&&W.isBuffered(s,u)&&W.isBuffered(s,u+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,c.b.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state=Ht.IDLE}else c.b.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Ht.BUFFER_FLUSHING,this.hls.trigger(l.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},e.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(c.b.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach(function(e){t.hls.trigger(l.a.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=Ht.PARSED):(this.state=Ht.IDLE,this.fragPrevious=null,this.tick())},qt(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,c.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(ct),Wt=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var t="auto",e={"":!0,lr:!0,rl:!0},i={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(t){return"string"==typeof t&&(!!i[t.toLowerCase()]&&t.toLowerCase())}function a(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function r(i,r,o){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),c={};l?s=document.createElement("custom"):c.enumerable=!0,s.hasBeenReset=!1;var u="",d=!1,h=i,p=r,f=o,m=null,v="",y=!0,g="auto",b="start",w=50,E="middle",T=50,S="middle";if(Object.defineProperty(s,"id",a({},c,{get:function(){return u},set:function(t){u=""+t}})),Object.defineProperty(s,"pauseOnExit",a({},c,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(s,"startTime",a({},c,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",a({},c,{get:function(){return p},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",a({},c,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",a({},c,{get:function(){return m},set:function(t){m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",a({},c,{get:function(){return v},set:function(t){var i=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");v=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",a({},c,{get:function(){return y},set:function(t){y=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",a({},c,{get:function(){return g},set:function(e){if("number"!=typeof e&&e!==t)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",a({},c,{get:function(){return b},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",a({},c,{get:function(){return w},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",a({},c,{get:function(){return E},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",a({},c,{get:function(){return T},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",a({},c,{get:function(){return S},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");S=e,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}return r.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},r}(),Vt=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};function Yt(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Vt,this.regionList=[]}function Kt(){this.values=Object.create(null)}function Xt(t,e,i,n){var a=n?t.split(n):[t];for(var r in a)if("string"==typeof a[r]){var o=a[r].split(i);if(2===o.length)e(o[0],o[1])}}Kt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var Qt=new Wt(0,0,0),Jt="middle"===Qt.align?"middle":"center";function Zt(t,e,i){var n=t;function a(){var e=function(t){function e(t,e,i,n){return 3600*(0|t)+60*(0|e)+(0|i)+(0|n)/1e3}var i=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}if(r(),e.startTime=a(),r(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);t=t.substr(3),r(),e.endTime=a(),r(),function(t,e){var n=new Kt;Xt(t,function(t,e){switch(t){case"region":for(var a=i.length-1;a>=0;a--)if(i[a].id===e){n.set(t,i[a].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var r=e.split(","),o=r[0];n.integer(t,o),n.percent(t,o)&&n.set("snapToLines",!1),n.alt(t,o,["auto"]),2===r.length&&n.alt("lineAlign",r[1],["start",Jt,"end"]);break;case"position":r=e.split(","),n.percent(t,r[0]),2===r.length&&n.alt("positionAlign",r[1],["start",Jt,"end","line-left","line-right","auto"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start",Jt,"end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");var a=n.get("line","auto");"auto"===a&&-1===Qt.line&&(a=-1),e.line=a,e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align",Jt);var r=n.get("position","auto");"auto"===r&&50===Qt.position&&(r="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=r}(t,e)}function $t(t){return t.replace(/<br(?: \/)?>/gi,"\n")}Yt.prototype={parse:function(t){var e=this;function i(){var t=e.buffer,i=0;for(t=$t(t);i<t.length&&"\r"!==t[i]&&"\n"!==t[i];)++i;var n=t.substr(0,i);return"\r"===t[i]&&++i,"\n"===t[i]&&++i,e.buffer=t.substr(i),n}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var n=void 0;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var a=(n=i()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var r=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(r?r=!1:n=i(),e.state){case"HEADER":/:/.test(n)?Xt(n,function(t,e){},/:/):n||(e.state="ID");continue;case"NOTE":n||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){e.state="NOTE";break}if(!n)continue;if(e.cue=new Wt(0,0,""),e.state="CUE",-1===n.indexOf("--\x3e")){e.cue.id=n;continue}case"CUE":try{Zt(n,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("--\x3e");if(!n||o&&(r=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=n;continue;case"BADCUE":n||(e.state="ID");continue}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return this.onflush&&this.onflush(),this}};var te=Yt;function ee(t,e,i,n){for(var a=void 0,r=void 0,o=void 0,s=void 0,l=void 0,c=window.VTTCue||window.TextTrackCue,u=0;u<n.rows.length;u++)if(o=!0,s=0,l="",!(a=n.rows[u]).isEmpty()){for(var d=0;d<a.chars.length;d++)a.chars[d].uchar.match(/\s/)&&o?s++:(l+=a.chars[d].uchar,o=!1);a.cueStartTime=e,e===i&&(i+=1e-4),r=new c(e,i,$t(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?r.line=u+1:r.line=u>7?u-2:u+1,r.align="left",r.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(r)}}function ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ne={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ae=function(t){var e=t;return ne.hasOwnProperty(t)&&(e=ne[t]),String.fromCharCode(e)},re=15,oe=100,se={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},le={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ce={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},ue={25:2,26:4,29:6,30:8,31:10,27:13,28:15},de=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],he={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){this.verboseFilter[t];this.verboseLevel}},pe=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toString(16));return e},fe=function(){function t(e,i,n,a,r){ie(this,t),this.foreground=e||"white",this.underline=i||!1,this.italics=n||!1,this.background=a||"black",this.flash=r||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],i=0;i<e.length;i++){var n=e[i];t.hasOwnProperty(n)&&(this[n]=t[n])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),me=function(){function t(e,i,n,a,r,o){ie(this,t),this.uchar=e||" ",this.penState=new fe(i,n,a,r,o)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),ve=function(){function t(){ie(this,t),this.chars=[];for(var e=0;e<oe;e++)this.chars.push(new me);this.pos=0,this.currPenState=new fe}return t.prototype.equals=function(t){for(var e=!0,i=0;i<oe;i++)if(!this.chars[i].equals(t.chars[i])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<oe;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<oe;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(he.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>oe&&(he.log("ERROR","Too large cursor position "+this.pos),this.pos=oe)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var i=this.pos+1;i<e+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=ae(t);this.pos>=oe?he.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},t.prototype.clearFromPos=function(t){var e=void 0;for(e=t;e<oe;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,i=0;i<oe;i++){var n=this.chars[i].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),ye=function(){function t(){ie(this,t),this.rows=[];for(var e=0;e<re;e++)this.rows.push(new ve);this.currRow=re-1,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<re;t++)this.rows[t].clear();this.currRow=re-1},t.prototype.equals=function(t){for(var e=!0,i=0;i<re;i++)if(!this.rows[i].equals(t.rows[i])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<re;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<re;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},t.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},t.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},t.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},t.prototype.setCursor=function(t){he.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.prototype.setPAC=function(t){he.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var i=0;i<re;i++)this.rows[i].clear();var n=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var r=a.rows[n].cueStartTime;if(r&&r<he.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(a.rows[n+o])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,c=Math.max(l-1,0);s.setCursor(t.indent),t.color=s.chars[c].penState.foreground}var u={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(u)},t.prototype.setBkgData=function(t){he.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null!==this.nrRollUpRows){he.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),he.log("INFO","Rolling up")}else he.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],i="",n=-1,a=0;a<re;a++){var r=this.rows[a].getTextString();r&&(n=a+1,t?e.push("Row "+n+": '"+r+"'"):e.push(r.trim()))}return e.length>0&&(i=t?"["+e.join(" | ")+"]":e.join("\n")),i},t.prototype.getTextAndFormat=function(){return this.rows},t}(),ge=function(){function t(e,i){ie(this,t),this.chNr=e,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new ye,this.nonDisplayedMemory=new ye,this.lastOutputScreen=new ye,this.currRollUpRow=this.displayedMemory.rows[re-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[re-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,he.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";he.log("INFO",i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(he.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){he.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){he.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){he.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){he.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){he.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){he.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){he.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){he.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){he.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.prototype.ccCR=function(){he.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.prototype.ccENM=function(){he.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(he.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,he.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.prototype.ccTO=function(t){he.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var i=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][i]}he.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=he.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),be=function(){function t(e,i,n){ie(this,t),this.field=e||1,this.outputs=[i,n],this.channels=[new ge(1,i),new ge(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e){var i=void 0,n=void 0,a=void 0,r=!1;this.lastTime=t,he.setTime(t);for(var o=0;o<e.length;o+=2)if(n=127&e[o],a=127&e[o+1],0!==n||0!==a){if(he.log("DATA","["+pe([e[o],e[o+1]])+"] -> ("+pe([n,a])+")"),(i=this.parseCmd(n,a))||(i=this.parseMidrow(n,a)),i||(i=this.parsePAC(n,a)),i||(i=this.parseBackgroundAttributes(n,a)),!i)if(r=this.parseChars(n,a))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(r);else he.log("WARNING","No channel found yet. TEXT-MODE?");i?this.dataCounters.cmd+=2:r?this.dataCounters.char+=2:(this.dataCounters.other+=2,he.log("WARNING","Couldn't parse cleaned data "+pe([n,a])+" orig: "+pe([e[o],e[o+1]])))}else this.dataCounters.padding+=2},t.prototype.parseCmd=function(t,e){var i=null;if(!((20===t||28===t)&&e>=32&&e<=47)&&!((23===t||31===t)&&e>=33&&e<=35))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,he.log("DEBUG","Repeated command ("+pe([t,e])+") is dropped"),!0;i=20===t||23===t?1:2;var n=this.channels[i-1];return 20===t||28===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},t.prototype.parseMidrow=function(t,e){var i=null;return(17===t||25===t)&&e>=32&&e<=47&&((i=17===t?1:2)!==this.currChNr?(he.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[i-1].ccMIDROW(e),he.log("DEBUG","MIDROW ("+pe([t,e])+")"),!0))},t.prototype.parsePAC=function(t,e){var i,n=null;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127)&&!((16===t||24===t)&&e>=64&&e<=95))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;i=t<=23?1:2,n=e>=64&&e<=95?1===i?se[t]:ce[t]:1===i?le[t]:ue[t];var a=this.interpretPAC(n,e);return this.channels[i-1].setPAC(a),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},t.prototype.interpretPAC=function(t,e){var i=e,n={color:null,italics:!1,indent:null,underline:!1,row:t};return i=e>95?e-96:e-64,n.underline=1==(1&i),i<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((i-16)/2),n},t.prototype.parseChars=function(t,e){var i=null,n=null,a=null;if(t>=25?(i=2,a=t-8):(i=1,a=t),a>=17&&a<=19){var r=e;r=17===a?e+80:18===a?e+112:e+144,he.log("INFO","Special char '"+ae(r)+"' in channel "+i),n=[r]}else t>=32&&t<=127&&(n=0===e?[t]:[t,e]);if(n){var o=pe(n);he.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},t.prototype.parseBackgroundAttributes=function(t,e){var i,n=void 0,a=void 0;return((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47)&&(n={},16===t||24===t?(a=Math.floor((e-32)/2),n.background=de[a],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),i=t<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},t.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}();var we=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timelineController=e,this.trackName=i,this.startTime=null,this.endTime=null,this.screen=null}return t.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.prototype.newCue=function(t,e,i){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)},t}(),Ee=function(t,e,i){return t.substr(i||0,e.length)===e},Te=function(t){for(var e=5381,i=t.length;i;)e=33*e^t.charCodeAt(--i);return(e>>>0).toString()},Se={parse:function(t,e,i,n,a,r){var o=Object(wt.b)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),l="00:00.000",c=0,u=0,d=0,h=[],p=void 0,f=!0,m=new te;m.oncue=function(t){var e=i[n],a=i.ccOffset;e&&e.new&&(void 0!==u?a=i.ccOffset=e.start:function(t,e,i){var n=t[e],a=t[n.prevCC];if(!a||!a.new&&n.new)return t.ccOffset=t.presentationOffset=n.start,void(n.new=!1);for(;a&&a.new;)t.ccOffset+=n.start-a.start,n.new=!1,a=t[(n=a).prevCC];t.presentationOffset=i}(i,n,d)),d&&(a=d+i.ccOffset-i.presentationOffset),t.startTime+=a-u,t.endTime+=a-u,t.id=Te(t.startTime.toString())+Te(t.endTime.toString())+Te(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&h.push(t)},m.onparsingerror=function(t){p=t},m.onflush=function(){p&&r?r(p):a(h)},o.forEach(function(t){if(f){if(Ee(t,"X-TIMESTAMP-MAP=")){f=!1,t.substr(16).split(",").forEach(function(t){Ee(t,"LOCAL:")?l=t.substr(6):Ee(t,"MPEGTS:")&&(c=parseInt(t.substr(7)))});try{c-=e=e<0?e+8589934592:e,i=l,n=parseInt(i.substr(-3)),a=parseInt(i.substr(-6,2)),r=parseInt(i.substr(-9,2)),o=i.length>9?parseInt(i.substr(0,i.indexOf(":"))):0,u=(Object(s.a)(n)&&Object(s.a)(a)&&Object(s.a)(r)&&Object(s.a)(o)?(n+=1e3*a,n+=6e4*r,n+=36e5*o):-1)/1e3,d=c/9e4,-1===u&&(p=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){p=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(f=!1)}var i,n,a,r,o;m.parse(t+"\n")}),m.flush()}};var Ae=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MEDIA_ATTACHING,l.a.MEDIA_DETACHING,l.a.FRAG_PARSING_USERDATA,l.a.FRAG_DECRYPTED,l.a.MANIFEST_LOADING,l.a.MANIFEST_LOADED,l.a.FRAG_LOADED,l.a.LEVEL_SWITCHING,l.a.INIT_PTS_FOUND));if(n.hls=i,n.config=i.config,n.enabled=!0,n.Cues=i.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.captionsTracks={},n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var a=new we(n,"textTrack1"),r=new we(n,"textTrack2");n.cea608Parser=new be(0,a,r)}return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.addCues=function(t,e,i,n){for(var a,r,o,s,l=this.cueRanges,c=!1,u=l.length;u--;){var d=l[u],h=(a=d[0],r=d[1],o=e,s=i,Math.min(r,s)-Math.max(a,o));if(h>=0&&(d[0]=Math.min(d[0],e),d[1]=Math.max(d[1],i),c=!0,h/(i-e)>.5))return}c||l.push([e,i]),this.Cues.newCue(this.captionsTracks[t],e,i,n)},e.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},e.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var i=0;i<e.textTracks.length;i++){var n=e.textTracks[i];if(n[t])return n}return null},e.prototype.createCaptionsTrack=function(t){var e=this.captionsProperties[t],i=e.label,n=e.languageCode,a=this.captionsTracks;if(!a[t]){var r=this.getExistingTrack(t);if(r)a[t]=r,Tt(a[t]),Et(a[t],this.media);else{var o=this.createTextTrack("captions",i,n);o&&(o[t]=!0,a[t]=o)}}},e.prototype.createTextTrack=function(t,e,i){var n=this.media;if(n)return n.addTextTrack(t,e,i)},e.prototype.destroy=function(){h.prototype.destroy.call(this)},e.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},e.prototype.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){Tt(t[e]),delete t[e]})},e.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},e.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var i=0;i<e.length;i++)Tt(e[i])}},e.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var i=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,n){var a=void 0;if(n<i.length){var r=i[n];(function(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)})(r,t)&&(a=r)}a||(a=e.createTextTrack("subtitles",t.name,t.lang)),t.default?a.mode=e.hls.subtitleDisplay?"showing":"hidden":a.mode="disabled",e.textTracks.push(a)})}},e.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},e.prototype.onFragLoaded=function(t){var e=t.frag,i=t.payload;if("main"===e.type){var n=e.sn;if(n!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=n}else if("subtitle"===e.type)if(i.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var r=e.decryptdata;null!=r&&null!=r.key&&"AES-128"===r.method||this._parseVTTs(e,i)}else this.hls.trigger(l.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},e.prototype._parseVTTs=function(t,e){var i=this.vttCCs;i[t.cc]||(i[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var n=this.textTracks,a=this.hls;Se.parse(e,this.initPTS,i,t.cc,function(e){var i=n[t.trackId];"disabled"!==i.mode?(e.forEach(function(t){if(!i.cues.getCueById(t.id))try{i.addCue(t)}catch(n){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,i.addCue(e)}}),a.trigger(l.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})):a.trigger(l.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},function(e){c.b.log("Failed to parse VTT cue: "+e),a.trigger(l.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},e.prototype.onFragDecrypted=function(t){var e=t.payload,i=t.frag;if("subtitle"===i.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(i,e)}},e.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var i=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,i)}},e.prototype.extractCea608Data=function(t){for(var e=31&t[0],i=2,n=void 0,a=void 0,r=void 0,o=[],s=0;s<e;s++)n=t[i++],a=127&t[i++],r=127&t[i++],0===a&&0===r||0!=(4&n)&&0===(3&n)&&(o.push(a),o.push(r));return o},e}(h),ke=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function _e(t){for(var e=[],i=0;i<t.length;i++)"subtitles"===t[i].kind&&e.push(t[i]);return e}var Le=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MEDIA_ATTACHED,l.a.MEDIA_DETACHING,l.a.MANIFEST_LOADING,l.a.MANIFEST_LOADED,l.a.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=null,n.subtitleDisplay=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=_e(this.media.textTracks),i=0;i<e.length;i++)if("hidden"===e[i].mode)t=i;else if("showing"===e[i].mode){t=i;break}this.subtitleTrack=t}},e.prototype.destroy=function(){h.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},e.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestLoaded=function(t){var e=this,i=t.subtitles||[];this.tracks=i,this.trackId=-1,this.hls.trigger(l.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:i}),i.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},e.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var i=e.details;i&&!i.live||(c.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(l.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},e.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(c.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&this._stopTimer())},e.prototype.setSubtitleTrackInternal=function(t){var e=this.hls,i=this.tracks;if(!("number"!=typeof t||t<-1||t>=i.length)&&(this._stopTimer(),this.trackId=t,c.b.log("switching to subtitle track "+t),e.trigger(l.a.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t)){var n=i[t],a=n.details;a&&!a.live||(c.b.log("(re)loading playlist for subtitle track "+t),e.trigger(l.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:t}))}},e.prototype._stopTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},e.prototype._toggleTrackModes=function(t){var e=this.media,i=this.subtitleDisplay,n=this.trackId;if(e){var a=_e(e.textTracks);if(-1===t)[].slice.call(a).forEach(function(t){t.mode="disabled"});else{var r=a[n];r&&(r.mode="disabled")}var o=a[t];o&&(o.mode=i?"showing":"hidden")}},ke(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this.setSubtitleTrackInternal(t))}}]),e}(h),xe=i(8);var Re=window.performance,Ce={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},De=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MEDIA_ATTACHED,l.a.ERROR,l.a.KEY_LOADED,l.a.FRAG_LOADED,l.a.SUBTITLE_TRACKS_UPDATED,l.a.SUBTITLE_TRACK_SWITCH,l.a.SUBTITLE_TRACK_LOADED,l.a.SUBTITLE_FRAG_PROCESSED));return n.config=i.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.state=Ce.STOPPED,n.currentTrackId=-1,n.decrypter=new xe.a(i.observer,i.config),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onHandlerDestroyed=function(){this.state=Ce.STOPPED},e.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},e.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(l.a.FRAG_LOADING,{frag:t}),this.state=Ce.FRAG_LOADING}},e.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=Ce.IDLE,this.nextFrag()},e.prototype.onMediaAttached=function(){this.state=Ce.IDLE},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},e.prototype.doTick=function(){var t=this;switch(this.state){case Ce.IDLE:var e,i=this.tracks,n=this.currentTrackId,a=this.vttFragSNsProcessed[n],r=this.vttFragQueues[n],o=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!i)break;if(n<i.length&&(e=i[n].details),void 0===e)break;e.fragments.forEach(function(e){(function(t){return a.indexOf(t.sn)>-1})(e)||e.sn===o||function(t){return r.some(function(e){return e.sn===t.sn})}(e)||(e.encrypted?(c.b.log("Loading key for "+e.sn),t.state=Ce.KEY_LOADING,t.hls.trigger(l.a.KEY_LOADING,{frag:e})):(e.trackId=n,r.push(e),t.nextFrag()))})}},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;c.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},e.prototype.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,this.tracks&&-1!==this.currentTrackId){var e=this.tracks[this.currentTrackId];e&&e.details&&this.tick()}},e.prototype.onSubtitleTrackLoaded=function(){this.tick()},e.prototype.onKeyLoaded=function(){this.state===Ce.KEY_LOADING&&(this.state=Ce.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag.decryptdata,n=t.frag,a=this.hls;if(this.state===Ce.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&null!=i&&null!=i.key&&"AES-128"===i.method){var r=void 0;try{r=Re.now()}catch(t){r=Date.now()}this.decrypter.decrypt(t.payload,i.key.buffer,i.iv.buffer,function(t){var e=void 0;try{e=Re.now()}catch(t){e=Date.now()}a.trigger(l.a.FRAG_DECRYPTED,{frag:n,payload:t,stats:{tstart:r,tdecrypt:e}})})}},e}(ct),Oe=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Ie=window.XMLHttpRequest,Me="com.widevine.alpha",Pe="com.microsoft.playready",Fe=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,l.a.MEDIA_ATTACHED,l.a.MANIFEST_PARSED));return n._widevineLicenseUrl=i.config.widevineLicenseUrl,n._licenseXhrSetup=i.config.licenseXhrSetup,n._emeEnabled=i.config.emeEnabled,n._requestMediaKeySystemAccess=i.config.requestMediaKeySystemAccessFunc,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._isMediaEncrypted=!1,n._requestLicenseFailureCount=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getLicenseServerUrl=function(t){var e=void 0;switch(t){case Me:e=this._widevineLicenseUrl;break;default:e=null}return e||(c.b.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(l.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),e},e.prototype._attemptKeySystemAccess=function(t,e,i){var n=this,a=function(t,e,i){switch(t){case Me:return function(t,e,i){var n={videoCapabilities:[]};return e.forEach(function(t){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})}),[n]}(0,i);default:throw Error("Unknown key-system: "+t)}}(t,0,i);a?(c.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,a).then(function(e){n._onMediaKeySystemAccessObtained(t,e)}).catch(function(e){c.b.error('Failed to obtain key-system "'+t+'" access:',e)})):c.b.warn("Can not create config for key-system (maybe because platform is not supported):",t)},e.prototype._onMediaKeySystemAccessObtained=function(t,e){var i=this;c.b.log('Access for key-system "'+t+'" obtained');var n={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(n),e.createMediaKeys().then(function(e){n.mediaKeys=e,c.b.log('Media-keys created for key-system "'+t+'"'),i._onMediaKeysCreated()}).catch(function(t){c.b.error("Failed to create media-keys:",t)})},e.prototype._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},e.prototype._onNewMediaKeySession=function(t){var e=this;c.b.log("New key-system session "+t.sessionId),t.addEventListener("message",function(i){e._onKeySessionMessage(t,i.message)},!1)},e.prototype._onKeySessionMessage=function(t,e){c.b.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){c.b.log("Received license data, updating key-session"),t.update(e)})},e.prototype._onMediaEncrypted=function(t,e){c.b.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=e,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},e.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return c.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(l.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_KEYS,fatal:!0});c.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},e.prototype._generateRequestWithPreferredKeySession=function(){var t=this,e=this._mediaKeysList[0];if(!e)return c.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(l.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(e.mediaKeysSessionInitialized)c.b.warn("Key-Session already initialized but requested again");else{var i=e.mediaKeysSession;i||(c.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(l.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var n=this._mediaEncryptionInitDataType,a=this._mediaEncryptionInitData;c.b.log('Generating key-session request for "'+n+'" init data type'),e.mediaKeysSessionInitialized=!0,i.generateRequest(n,a).then(function(){c.b.debug("Key-session generation succeeded")}).catch(function(e){c.b.error("Error generating key-session request:",e),t.hls.trigger(l.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},e.prototype._createLicenseXhr=function(t,e,i){var n=new Ie,a=this._licenseXhrSetup;try{if(a)try{a(n,t)}catch(e){n.open("POST",t,!0),a(n,t)}n.readyState||n.open("POST",t,!0)}catch(t){return c.b.error("Error setting up key-system license XHR",t),void this.hls.trigger(l.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,t,e,i),n},e.prototype._onLicenseRequestReadyStageChange=function(t,e,i,n){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,c.b.log("License request succeeded"),n(t.response);else{if(c.b.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var a=3-this._requestLicenseFailureCount+1;return c.b.warn("Retrying license request, "+a+" attempts left"),void this._requestLicense(i,n)}this.hls.trigger(l.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},e.prototype._generateLicenseRequestChallenge=function(t,e){var i=void 0;return t.mediaKeySystemDomain===Pe?c.b.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===Me?i=e:c.b.error("Unsupported key-system:",t.mediaKeySystemDomain),i},e.prototype._requestLicense=function(t,e){c.b.log("Requesting content license for key-system");var i=this._mediaKeysList[0];if(!i)return c.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(l.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});var n=this.getLicenseServerUrl(i.mediaKeySystemDomain),a=this._createLicenseXhr(n,t,e);c.b.log("Sending license request to URL: "+n),a.send(this._generateLicenseRequestChallenge(i,t))},e.prototype.onMediaAttached=function(t){var e=this;if(this._emeEnabled){var i=t.media;this._media=i,i.addEventListener("encrypted",function(t){e._onMediaEncrypted(t.initDataType,t.initData)})}},e.prototype.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map(function(t){return t.audioCodec}),i=t.levels.map(function(t){return t.videoCodec});this._attemptKeySystemAccess(Me,e,i)}},Oe(e,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}(h),Ne={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Bt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:xt,bufferController:Ct,capLevelController:Ot,fpsController:Mt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null};Ne.subtitleStreamController=De,Ne.subtitleTrackController=Le,Ne.timelineController=Ae,Ne.cueHandler=n,Ne.enableCEA708Captions=!0,Ne.enableWebVTT=!0,Ne.captionsTextTrack1Label="English",Ne.captionsTextTrack1LanguageCode="en",Ne.captionsTextTrack2Label="Spanish",Ne.captionsTextTrack2LanguageCode="es",Ne.audioStreamController=zt,Ne.audioTrackController=jt,Ne.emeController=Fe;var Be=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i(14);var Ue=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=t.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in n)a in i||(i[a]=n[a]);if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(i.liveMaxLatencyDuration<=i.liveSyncDuration||void 0===i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.a)(i.debug),this.config=i,this._autoLevelCapping=-1;var r=this.observer=new Y.a;r.trigger=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.emit.apply(r,[t,t].concat(i))},r.off=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.removeListener.apply(r,[t].concat(i))},this.on=r.on.bind(r),this.off=r.off.bind(r),this.once=r.once.bind(r),this.trigger=r.trigger.bind(r);var o=this.abrController=new i.abrController(this),s=new i.bufferController(this),l=new i.capLevelController(this),u=new i.fpsController(this),d=new F(this),h=new N(this),p=new B(this),f=new St(this),m=this.levelController=new bt(this),v=new H(this),y=[m,this.streamController=new mt(this,v)],g=i.audioStreamController;g&&y.push(new g(this,v)),this.networkControllers=y;var b=[d,h,p,o,s,l,u,f,v];if(g=i.audioTrackController){var w=new g(this);this.audioTrackController=w,b.push(w)}if(g=i.subtitleTrackController){var E=new g(this);this.subtitleTrackController=E,b.push(E)}if(g=i.emeController){var T=new g(this);this.emeController=T,b.push(T)}[i.subtitleStreamController,i.timelineController].forEach(function(t){t&&b.push(new t(e))}),this.coreComponents=b}return t.isSupported=function(){return t=J(),e=window.SourceBuffer||window.WebKitSourceBuffer,i=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove,!!i&&!!n;var t,e,i,n},Be(t,null,[{key:"version",get:function(){return"0.11.0"}},{key:"Events",get:function(){return l.a}},{key:"ErrorTypes",get:function(){return o.b}},{key:"ErrorDetails",get:function(){return o.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Ne},set:function(e){t.defaultConfig=e}}]),t.prototype.destroy=function(){c.b.log("destroy"),this.trigger(l.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(t){c.b.log("attachMedia"),this.media=t,this.trigger(l.a.MEDIA_ATTACHING,{media:t})},t.prototype.detachMedia=function(){c.b.log("detachMedia"),this.trigger(l.a.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(t){t=r.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),c.b.log("loadSource:"+t),this.url=t,this.trigger(l.a.MANIFEST_LOADING,{url:t})},t.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;c.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.prototype.stopLoad=function(){c.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},t.prototype.swapAudioCodec=function(){c.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){c.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},Be(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){c.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){c.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){c.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){c.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){c.b.log("set startLevel:"+t);-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){c.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,i=t?t.length:0,n=0;n<i;n++){if((t[n].realBitrate?Math.max(t[n].realBitrate,t[n].bitrate):t[n].bitrate)>e)return n}return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),t}();e.default=Ue},function(t,e,i){function n(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var n=i(i.s=ENTRY_MODULE);return n.default||n}var a="[\\.|\\-|\\+|\\w|/|@]+",r="\\((/\\*.*?\\*/)?s?.*?("+a+").*?\\)";function o(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(t,e,n){var s={};s[n]=[];var l=e.toString(),c=l.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return s;for(var u,d=c[1],h=new RegExp("(\\\\n|\\W)"+o(d)+r,"g");u=h.exec(l);)"dll-reference"!==u[3]&&s[n].push(u[3]);for(h=new RegExp("\\("+o(d)+'\\("(dll-reference\\s('+a+'))"\\)\\)'+r,"g");u=h.exec(l);)t[u[2]]||(s[n].push(u[1]),t[u[2]]=i(u[1]).m),s[u[2]]=s[u[2]]||[],s[u[2]].push(u[4]);return s}function l(t){return Object.keys(t).reduce(function(e,i){return e||t[i].length>0},!1)}t.exports=function(t,e){e=e||{};var a={main:i.m},r=e.all?{main:Object.keys(a)}:function(t,e){for(var i={main:[e]},n={main:[]},a={main:{}};l(i);)for(var r=Object.keys(i),o=0;o<r.length;o++){var c=r[o],u=i[c].pop();if(a[c]=a[c]||{},!a[c][u]&&t[c][u]){a[c][u]=!0,n[c]=n[c]||[],n[c].push(u);for(var d=s(t,t[c][u],c),h=Object.keys(d),p=0;p<h.length;p++)i[h[p]]=i[h[p]]||[],i[h[p]]=i[h[p]].concat(d[h[p]])}}return n}(a,t),o="";Object.keys(r).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;r[t][e];)e++;r[t].push(e),a[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+r[t].map(function(e){return JSON.stringify(e)+": "+a[t][e].toString()}).join(",")+"});\n"}),o=o+"("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+r.main.map(function(t){return JSON.stringify(t)+": "+a.main[t].toString()}).join(",")+"})(self);";var c=new window.Blob([o],{type:"text/javascript"});if(e.bare)return c;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),d=new window.Worker(u);return d.objectURL=u,d}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10),a=i(1),r=i(0),o=i(7),s=i.n(o);e.default=function(t){var e=new s.a;e.trigger=function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];e.emit.apply(e,[t,t].concat(n))},e.off=function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];e.removeListener.apply(e,[t].concat(n))};var i=function(e,i){t.postMessage({event:e,data:i})};t.addEventListener("message",function(a){var o=a.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new n.a(e,o.typeSupported,s,o.vendor);try{Object(r.a)(!0===s.debug)}catch(t){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),e.on(a.a.FRAG_DECRYPTED,i),e.on(a.a.FRAG_PARSING_INIT_SEGMENT,i),e.on(a.a.FRAG_PARSED,i),e.on(a.a.ERROR,i),e.on(a.a.FRAG_PARSING_METADATA,i),e.on(a.a.FRAG_PARSING_USERDATA,i),e.on(a.a.INIT_PTS_FOUND,i),e.on(a.a.FRAG_PARSING_DATA,function(e,i){var n=[],a={event:e,data:i};i.data1&&(a.data1=i.data1.buffer,n.push(i.data1.buffer),delete i.data1),i.data2&&(a.data2=i.data2.buffer,n.push(i.data2.buffer),delete i.data2),t.postMessage(a,n)})}},function(t,e){
/*! http://mths.be/endswith v0.2.0 by @mathias */
String.prototype.endsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(t){}return i}(),e={}.toString,i=function(t){if(null==this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var n=i.length,a=String(t),r=a.length,o=n;if(arguments.length>1){var s=arguments[1];void 0!==s&&(o=s?Number(s):0)!=o&&(o=0)}var l=Math.min(Math.max(o,0),n)-r;if(l<0)return!1;for(var c=-1;++c<r;)if(i.charCodeAt(l+c)!=a.charCodeAt(c))return!1;return!0};t?t(String.prototype,"endsWith",{value:i,configurable:!0,writable:!0}):String.prototype.endsWith=i}()}]).default},t.exports=n())},YXHT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),r=i("woOf"),o=i.n(r),s=i("mvHQ"),l=i.n(s),c=i("d0Z/"),u=i("Txg6"),d=i("Pn95"),h=i("NYxO"),p=i("gyMJ"),f={name:"vChat",data:function(){return{currSation:{},contactsList:[],IMGURL:"",settingFlag:{f:!1},removeSation:{}}},sockets:{},components:{chatItem:c.default,vchatMessage:u.default,chatSetting:d.default},watch:{conversationsList:{handler:function(t){this.contactsList=JSON.parse(l()(t)),!this.currSation.id&&t.length&&(this.currSation=this.contactsList[0]),t.length||(this.currSation={}),isNaN(this.removeSation.index)||this.currSation.id===this.removeSation.item.id&&0!==this.contactsList.length&&(this.currSation=this.contactsList[this.removeSation.index]||this.contactsList[this.removeSation.index-1]||this.contactsList[this.removeSation.index+1])},deep:!0,immediate:!0},contactsList:{handler:function(t){t.length||(this.currSation={})},deep:!0},unRead:{handler:function(t){var e=this;this.contactsList.forEach(function(i,n){t.forEach(function(t){i.id===t.roomid&&e.$set(e.contactsList,n,o()({},i,{unRead:t.count}))})})},deep:!0,immediate:!0}},computed:a()({},Object(h.c)(["user","conversationsList","unRead"]),{bgOpa:function(){return this.user.bgOpa||.2}}),methods:{close:function(){this.$emit("closeChat")},setCurrSation:function(t){t.id!==this.currSation.id&&(this.currSation=t)},getNewMes:function(t){var e=this;this.contactsList.forEach(function(i,n){i.id===t.roomid&&e.$set(e.contactsList,n,o()({},i,{newMes:t.mes,newMesTime:t.time.split(" ")[1]}))})},remove:function(t,e){var i=this;"vchat"===t.type?(this.contactsList=this.contactsList.filter(function(e){return e.id!==t.id}),this.currSation.id===t.id&&0!==this.contactsList.length&&(this.currSation=this.contactsList[e]||this.contactsList[e-1]||this.contactsList[e+1])):p.a.removeConversitionList(t).then(function(n){0===n.code?(i.$message({type:"success",message:"移除成功"}),i.$store.commit("setConversationsList",o()({d:!0},t)),i.removeSation={item:t,index:e}):i.$message({type:"success",message:"移除失败"})})}},mounted:function(){}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"bgInmage",rawName:"v-bgInmage",value:t.IMGURL+t.user.wallpaper.split(",")[0],expression:"IMGURL + user.wallpaper.split(',')[0]"},{name:"fontColor",rawName:"v-fontColor",value:t.user.chatColor,expression:"user.chatColor"}],staticClass:"vchat-chatRoom"},[i("div",{directives:[{name:"opacity",rawName:"v-opacity",value:t.bgOpa,expression:"bgOpa"}],staticClass:"chatRoom-before"}),t._v(" "),i("div",{staticClass:"vchat-chatRoom-bg"},[i("div",{staticClass:"chat-header"},[i("a",{directives:[{name:"fontColor",rawName:"v-fontColor",value:t.user.chatColor,expression:"user.chatColor"}]},[t._v(t._s(t.currSation.name))]),t._v(" "),i("div",{staticClass:"chat-handel"},[i("v-icon",{staticClass:"el-icon-minus",attrs:{color:t.user.chatColor,cursor:"pointer"},on:{clickIcon:t.close}}),t._v(" "),i("v-icon",{staticClass:"el-icon-setting",attrs:{color:t.user.chatColor,cursor:"pointer"},on:{clickIcon:function(e){t.settingFlag.f=!0}}})],1)]),t._v(" "),i("div",{staticClass:"chat-container"},[i("ul",{staticClass:"chat-conversation-ul"},t._l(t.contactsList,function(e,n){return i("li",{key:e.id,staticClass:"chat-conversation-li",class:{active:t.currSation.id===e.id},on:{click:function(i){return t.setCurrSation(e)}}},[i("el-badge",{staticClass:"mesBadge",attrs:{value:e.unRead,max:99,hidden:0===e.unRead}},[i("a",{staticClass:"vchat-photo"},[i("img",{attrs:{src:t.IMGURL+e.photo,alt:""}})])]),t._v(" "),i("div",{staticClass:"chat-conversation-li-center"},["vchat"===e.type?[i("p",{staticClass:"vchat-line1"},[t._v(t._s(e.nickname))]),t._v(" "),i("p",{staticClass:"vchat-line1"},[t._v(t._s(e.signature))])]:[i("p",{staticClass:"vchat-line1"},[t._v(t._s(e.name))]),t._v(" "),i("p",{staticClass:"vchat-line1"},[t._v(t._s(e.newMes))])]],2),t._v(" "),i("div",{staticClass:"chat-conversation-li-right"},[i("p",[t._v(t._s(e.newMesTime))])]),t._v(" "),i("p",{staticClass:"delete",on:{click:function(i){return i.stopPropagation(),t.remove(e,n)}}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"vchat"===e.type?"从会话列表移除":"从列表移除后，需要再次添加才能收到消息！",placement:"top-start"}},[i("v-icon",{staticClass:"el-icon-circle-close",attrs:{color:t.user.chatColor,cursor:"pointer",size:18}})],1)],1)],1)}),0),t._v(" "),i("div",{staticClass:"chat-content-box"},[i("chat-item",{directives:[{name:"show",rawName:"v-show",value:"vchat"!==t.currSation.type,expression:"currSation.type !== 'vchat'"}],attrs:{currSation:t.currSation},on:{NewMes:t.getNewMes}}),t._v(" "),i("vchat-message",{directives:[{name:"show",rawName:"v-show",value:"vchat"===t.currSation.type,expression:"currSation.type === 'vchat'"}],attrs:{currSation:t.currSation}})],1)]),t._v(" "),i("div",{directives:[{name:"watchMouse",rawName:"v-watchMouse",value:t.settingFlag,expression:"settingFlag"}],staticClass:"chat-setting",class:{active:t.settingFlag.f}},[i("chat-setting",{on:{clickIcon:function(e){t.settingFlag.f=!1}}})],1)])])},staticRenderFns:[]};var v=i("VU/8")(f,m,!1,function(t){i("sIqw")},"data-v-99943958",null);e.default=v.exports},YYsd:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),r=i("+aT9"),o=i.n(r),s=i("IKvY"),l=i("NYxO"),c={data:function(){return{WeatherInfo:[{}],LiveWeather:{},type:"sunny",cityName:""}},components:{weatherIcon:s.default},computed:a()({},Object(l.c)(["user"])),watch:{user:{handler:function(t){t.city&&(this.cityName="市辖区"===t.city.name?t.province.name:t.city.name,this.initWeather(this.cityName))},immediate:!0,deep:!0}},methods:{initWeather:function(t){var e=this;o.a.plugin("AMap.Weather",function(){var i=new o.a.Weather;i.getLive(t,function(t,i){e.LiveWeather=i,e.getWeatherType(i.weather)}),i.getForecast(t,function(t,i){e.WeatherInfo=i.forecasts})})},getWeek:function(t){return"星期"+["一","二","三","四","五","六","日"][t-1]},getWeatherType:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";if(/多云|阴/.test(t)){if("1"!==e)return"yintian";this.type="cloudy"}else if(/雷/.test(t)){if("1"!==e)return"leidian";this.type="thunder-storm"}else if(/雨/.test(t)){if("1"!==e)return"xiaoyu";this.type="rainy"}else if(/晴/.test(t)){if("1"!==e)return"qing";this.type="sunny"}else if(/雪/.test(t)){if("1"!==e)return"xue";this.type="flurries"}}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vchat-weather vchat-bg"},[i("div",{staticClass:"weather-container"},[i("div",{staticClass:"position"},[i("v-icon",{attrs:{name:"coordinates_fill",color:"#fff",size:28}}),t._v(" "),i("p",[t._v(t._s(t.cityName))]),t._v(" "),i("span",[t._v(t._s(t.getWeek(t.WeatherInfo[0].week)))]),t._v(" "),i("span",[t._v(t._s(t.WeatherInfo[0].nightTemp)+"℃ ~ "+t._s(t.WeatherInfo[0].dayTemp)+"℃")])],1),t._v(" "),i("ul",{staticClass:"weather-list"},[i("li",[i("p",[t._v("发布时间："+t._s(t.LiveWeather.reportTime))]),t._v(" "),i("p",{staticClass:"temperature"},[i("span",[t._v(t._s(t.LiveWeather.temperature))]),t._v("℃\n                    "+t._s(t.LiveWeather.weather)+"\n                ")]),t._v(" "),i("weather-icon",{attrs:{type:t.type}}),t._v(" "),i("p",[t._v("空气湿度："+t._s(t.LiveWeather.humidity)+"%")]),t._v(" "),i("p",[t._v("风向："+t._s(t.LiveWeather.windDirection)+"； 风力："+t._s(t.LiveWeather.windPower||"暂无"))])],1),t._v(" "),t._l(t.WeatherInfo,function(e,n){return[n>0?i("li",[i("p",[t._v(t._s(t.getWeek(e.week)))]),t._v(" "),i("p",[t._v(t._s(e.date))]),t._v(" "),i("p",[i("v-icon",{attrs:{name:t.getWeatherType(e.dayWeather,"2"),color:"#fff",size:36}})],1),t._v(" "),i("p",[t._v(t._s(e.nightTemp)+"℃ ~ "+t._s(e.dayTemp)+"℃")]),t._v(" "),i("p",[t._v(t._s(e.dayWeather))]),t._v(" "),i("p",[t._v("风向："+t._s(e.dayWindDir))])]):t._e()]})],2)])])},staticRenderFns:[]};var d=i("VU/8")(c,u,!1,function(t){i("YJwn")},"data-v-e57cff3e",null);e.default=d.exports},ZRIN:function(t,e){t.exports={data:"😀,😁,😂,😃,😄,😅,😆,😉,😊,😋,😎,😍,😘,😗,😙,😚,😇,😐,😑,😶,😏,😣,😥,😮,😯,😪,😫,😴,😌,😛,😜,😝,😒,😓,😔,😕,😲,😷,😖,😞,😟,😤,😢,😭,😦,😧,😨,😬,😰,😱,😳,😵,😡,😠,💘,❤,💓,💔,💕,💖,💗,💙,💚,💛,💜,💝,💞,💟,❣,💪,👈,👉,☝,👆,👇,✌,✋,👌,👍,👎,✊,👊,👋,👏,👐,✍,🍇,🍈,🍉,🍊,🍋,🍌,🍍,🍎,🍏,🍐,🍑,🍒,🍓,🍅,🍆,🌽,🍄,🌰,🍞,🍖,🍗,🍔,🍟,🍕,🍳,🍲,🍱,🍘,🍙,🍚,🍛,🍜,🍝,🍠,🍢,🍣,🍤,🍥,🍡,🍦,🍧,🍨,🍩,🍪,🎂,🍰,🍫,🍬,🍭,🍮,🍯,🍼,☕,🍵,🍶,🍷,🍸,🍹,🍺,🍻,🍴,🌹,🍀,🍎,💰,📱,🌙,🍁,🍂,🍃,🌷,💎,🔪,🔫,🏀,⚽,⚡,👄,👍,🔥,🙈,🙉,🙊,🐵,🐒,🐶,🐕,🐩,🐺,🐱,😺,😸,😹,😻,😼,😽,🙀,😿,😾,🐈,🐯,🐅,🐆,🐴,🐎,🐮,🐂,🐃,🐄,🐷,🐖,🐗,🐽,🐏,🐑,🐐,🐪,🐫,🐘,🐭,🐁,🐀,🐹,🐰,🐇,🐻,🐨,🐼,🐾,🐔,🐓,🐣,🐤,🐥,🐦,🐧,🐸,🐊,🐢,🐍,🐲,🐉,🐳,🐋,🐬,🐟,🐠,🐡,🐙,🐚,🐌,🐛,🐜,🐝,🐞,🦋,😈,👿,👹,👺,💀,☠,👻,👽,👾,💣"}},a2kr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("a38v"),a=i("gyMJ"),r={name:"messageLog",props:["currSation","currNav"],data:function(){return{messageLog:[],offset:1,limit:5,total:0,chatLoading:!1}},watch:{currSation:{handler:function(t){t.id||(this.messageLog=[]),2!==this.currNav||"group"!==t.type&&"friend"!==t.type||this.getMessageLog()},deep:!0,immediate:!0},currNav:function(t){2===t&&this.currSation.id&&(this.total=0,this.getMessageLog())}},methods:{lookPhoto:function(t){this.$emit("lookPhoto",t)},getMessageLog:function(){var t=this;this.chatLoading=!0,this.messageLog=[];var e={roomid:this.currSation.id,offset:this.offset,limit:this.limit};a.a.loadMoreMessages(e).then(function(e){0===e.code&&(t.messageLog=e.data,t.total=e.count),t.chatLoading=!1})}},components:{messageItem:n.default}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.chatLoading,expression:"chatLoading"}],staticClass:"vchat-messageLog",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("div",{staticClass:"messageLog-container"},t._l(t.messageLog,function(e,n){return"org"!==e.type?i("message-item",{key:n,staticClass:"other",attrs:{type:"other",v:e},on:{lookPhoto:t.lookPhoto}}):t._e()}),1),t._v(" "),t.total>0?i("div",{staticClass:"page"},[i("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.offset,total:t.total},on:{"update:currentPage":function(e){t.offset=e},"update:current-page":function(e){t.offset=e},"current-change":t.getMessageLog}})],1):t._e()])},staticRenderFns:[]};var s=i("VU/8")(r,o,!1,function(t){i("XUMn")},"data-v-749d125b",null);e.default=s.exports},a38v:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vchat-messageItem mes-box"},["other"===t.type?n("p",{staticClass:"avatar"},[n("img",{attrs:{src:t.IMG_URL+t.v.avatar,alt:""}})]):t._e(),t._v(" "),"other"===t.type||"mine"===t.type?n("div",{staticClass:"messageInfo"},[n("p",{staticClass:"info"},[n("span",[t._v(t._s(t.v.nickname))]),t._v(" "),n("i",[t._v(t._s(t.v.time))])]),t._v(" "),"emoji"===t.v.style?n("p",{staticClass:"emoji"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.IMG_URL+t.v.emoji,expression:"IMG_URL + v.emoji"}],attrs:{alt:""}})]):t._e(),t._v(" "),"img"===t.v.style?n("p",{staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.IMG_URL+t.v.emoji,expression:"IMG_URL + v.emoji"}],attrs:{alt:"",title:"双击查看原图"},on:{dblclick:function(e){return t.$emit("lookPhoto",t.v.emoji)}}})]):t._e(),t._v(" "),"file"===t.v.style?n("div",{staticClass:"file"},[n("img",{attrs:{src:i("3oot"),alt:""}}),t._v(" "),n("div",[n("p",{attrs:{title:t.v.mes}},[t._v(t._s(t.v.mes.lastIndexOf(".")>12?t.v.mes.slice(0,12)+"..."+t.v.mes.slice(t.v.mes.lastIndexOf(".")):t.v.mes))]),t._v(" "),"other"===t.type?n("a",{attrs:{href:t.v.emoji,download:""}},[t._v("下载")]):t._e(),t._v(" "),"mine"===t.type?n("p",[t._v("\n                    发送成功\n                    "),n("v-icon",{staticClass:"el-icon-circle-check-outline",attrs:{color:"#67C23A"}})],1):t._e()])]):t._e(),t._v(" "),"mess"===t.v.style?n("p",{staticClass:"mes"},[t._v(t._s(t.v.mes))]):t._e()]):t._e(),t._v(" "),"mine"===t.type?n("p",{staticClass:"avatar"},[n("img",{attrs:{src:t.IMG_URL+t.v.avatar,alt:""}})]):t._e()])},staticRenderFns:[]};var a=i("VU/8")({name:"messageItem",props:["type","v"],data:function(){return{IMG_URL:""}}},n,!1,function(t){i("8q76")},"data-v-e8870b42",null);e.default=a.exports},"d0Z/":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("fZjL"),a=i.n(n),r=i("Dd8w"),o=i.n(r),s=i("woOf"),l=i.n(s),c=i("NYxO"),u=i("gyMJ"),d=i("oAV5"),h=i.n(d),p=i("4gCw"),f=i("XHO7"),m=i("a2kr"),v={name:"chatItem",props:["currSation"],data:function(){return{navList:[{name:"聊天",type:"group,friend",id:0},{name:"公告",type:"group",id:1},{name:"聊天记录",type:"group,friend",id:2}],IMG_URL:"",currNav:0,spread:!1,chatList:[],message:"",showEmoji:{f:!1},groupUsers:[],uplaodVisible:{f:!1},photoSwipeFlag:!1,photoSwipeUrl:"",onlineNum:0,chatLoading:!1,loadmoreLoading:!1,groupUserList:[],offset:1,limit:50}},components:{emoji:p.default,vMessage:f.default,messageLog:m.default},sockets:{org:function(t){t.roomid===this.currSation.id&&this.chatList.push(l()({},t,{type:"org"}))},mes:function(t){t.roomid===this.currSation.id&&(this.chatList.push(l()({},t,{type:"other"})),this.$socket.emit("setReadStatus",{roomid:t.roomid,name:this.user.name}),this.$store.commit("setUnRead",{roomid:t.roomid,clear:!0}))},getHistoryMessages:function(t){var e=this;t.length&&this.$emit("NewMes",t[t.length-1]),this.chatList=t.map(function(t){return"org"!==t.type&&(t.name===e.user.name?t.type="mine":t.type="other"),t})}},computed:o()({},Object(c.c)(["user","OnlineUser"])),watch:{currSation:{handler:function(t){t.id||(this.chatList=[]),this.offset=1,this.groupUserList=[],this.chatLoading=!0,this.currNav=0,"group"!==t.type&&"friend"!==t.type||("group"===t.type&&this.getGroupUsers(t.id),this.$socket.emit("setReadStatus",{roomid:t.id,name:this.user.name}),this.$store.commit("setUnRead",{roomid:t.id,clear:!0}),this.$socket.emit("getHistoryMessages",{roomid:t.id,offset:1,limit:100}))},deep:!0,immediate:!0},OnlineUser:{handler:function(t){this.currSation.type&&"group"===this.currSation.type&&this.getGroupUsers(this.currSation.id)},immediate:!0,deep:!0},currTool:function(t,e){t||document.documentElement.removeEventListener("click",this.watchMouse)}},mounted:function(){},methods:{lookPhoto:function(t){this.photoSwipeUrl=t,this.photoSwipeFlag=!0},uploadFileSuccess:function(t,e){e.raw.type.indexOf("image")>-1?this.send(t.data,"img"):this.send(e,"file"),this.uplaodVisible.f=!1},InmageChange:function(){var t=this,e=this.$refs.chooseInmage.files[0];if(-1!==e.type.indexOf("image"))if(e.size/1024/1024<1){var i=new FormData;i.append("f",e),u.a.uploadFile(i).then(function(e){0===e.code?t.send(e.data,"img"):t.$message({message:"上传失败",type:"warning"})}),this.$refs.chooseInmage.value=""}else this.$message.error("图片大小不能超过 1MB!");else this.$message.error("只能上传图片!")},getGroupUserStatus:function(t){var e=this;this.groupUsers.forEach(function(i,n){var r=!1;a()(t).forEach(function(t){t===i.userName&&(r=!0)}),e.$set(e.groupUsers,n,l()({},i,{status:r}))}),this.onlineNum=this.groupUsers.filter(function(t){return t.status}).length},setCurrNav:function(t){this.currNav=t},spreadInput:function(){var t=this;this.spread=!this.spread,this.$nextTick(function(e){t.$refs.searchMember.focus()})},loadmore:function(){var t=this;this.loadmoreLoading=!0,this.offset+=1,setTimeout(function(e){var i=(t.offset-1)*t.limit;t.groupUserList=t.groupUserList.concat(t.groupUsers.slice(i,i+t.limit)),t.loadmoreLoading=!1},1e3)},getGroupUsers:function(t){var e=this,i={groupId:t};u.a.getGroupUsers(i).then(function(t){if(0===t.code){e.groupUsers=t.data;var i=(e.offset-1)*e.limit;e.groupUserList=e.groupUsers.slice(i,i+e.limit),e.getGroupUserStatus(e.OnlineUser)}})},send:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mess";if(this.message||t){var i={name:this.user.name,mes:this.message,time:h.a.formatTime(new Date),avatar:this.user.photo,nickname:this.user.nickname,read:[this.user.name],roomid:this.currSation.id,style:"mess",userM:this.user.id};"emoji"===e?(i.style="emoji",i.mes="表情",i.emoji=t):"img"===e?(i.style="img",i.mes="图片",i.emoji=t):"file"===e&&(i.style="file",i.mes=t.name,i.emoji=t.response.data),this.chatList.push(l()({},i,{type:"mine"})),this.$socket.emit("mes",i),this.$emit("NewMes",i),"mess"===e&&(this.message="")}},chooseEmojiDefault:function(t){this.message+=t,this.showEmoji.f=!1},chooseEmoji:function(t){this.send(t,"emoji"),this.showEmoji.f=!1},clear:function(){this.message=""}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vchat-item"},[i("div",{staticClass:"vchat-item-header"},t._l(t.navList,function(e,n){return e.type.indexOf(t.currSation.type)>-1?i("span",{key:n,class:{active:t.currNav===e.id},on:{click:function(i){return t.setCurrNav(e.id)}}},[t._v(t._s(e.name))]):t._e()}),0),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.currNav,expression:"currNav === 0"}],staticClass:"vchat-item-container"},[i("div",{staticClass:"container-chat"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.chatLoading,expression:"chatLoading"}],staticClass:"chat-room",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("v-message",{attrs:{chatList:t.chatList},on:{lookPhoto:t.lookPhoto,chatLoading:function(e){t.chatLoading=!1}}})],1),t._v(" "),i("div",{staticClass:"chat-send"},[i("div",{staticClass:"tool"},[i("span",{directives:[{name:"watchMouse",rawName:"v-watchMouse",value:t.showEmoji,expression:"showEmoji"}],staticClass:"tool-item"},[i("v-icon",{attrs:{name:"biaoqing1",color:t.user.chatColor,cursor:"pointer",title:"发送表情"},on:{clickIcon:function(e){t.showEmoji.f=!t.showEmoji.f}}}),t._v(" "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showEmoji.f,expression:"showEmoji.f"}],staticClass:"emoji-container"},[i("emoji",{on:{chooseEmoji:t.chooseEmoji,chooseEmojiDefault:t.chooseEmojiDefault}})],1)])],1),t._v(" "),i("span",{staticClass:"tool-item"},[i("v-icon",{attrs:{name:"tupian2",color:t.user.chatColor}}),t._v(" "),i("input",{ref:"chooseInmage",attrs:{type:"file",title:"选择图片",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:t.InmageChange}})],1),t._v(" "),i("span",{staticClass:"tool-item"},[i("v-upload-popover",{directives:[{name:"watchMouse",rawName:"v-watchMouse",value:t.uplaodVisible,expression:"uplaodVisible"}],attrs:{visible:t.uplaodVisible.f},on:{handleSuccess:t.uploadFileSuccess}},[i("v-icon",{attrs:{name:"wenjian2",color:t.user.chatColor,title:"选择文件"},on:{clickIcon:function(e){t.uplaodVisible.f=!t.uplaodVisible.f}}})],1)],1)]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"},{name:"fontColor",rawName:"v-fontColor",value:t.user.chatColor,expression:"user.chatColor"}],domProps:{value:t.message},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(!1)},input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),i("div",{staticClass:"enter"},[i("button",{staticClass:"vchat-button-mini info",on:{click:t.clear}},[t._v("清空")]),t._v(" "),i("button",{staticClass:"vchat-button-mini",on:{click:function(e){return t.send(!1)}}},[t._v("发送")])])])]),t._v(" "),"group"===t.currSation.type?i("div",{staticClass:"container-handel"},[i("div",{staticClass:"handel-notice"},[i("h3",[t._v("群通知")]),t._v(" "),i("ul",[i("li",{staticClass:"vchat-line1",attrs:{title:"求star❤❤❤，点击跳转源码"}},[i("a",{staticStyle:{color:"#fff"},attrs:{href:"https://github.com/wuyawei/Vchat",target:"_blank"}},[t._v("期待你的star "),i("i",{style:{color:"red",fontStyle:"normal"}},[t._v("❤❤❤")])])])])]),t._v(" "),i("div",{staticClass:"handel-member"},[i("h3",[i("span",[t._v("群成员 ( "+t._s(t.onlineNum)+"/"+t._s(t.groupUsers.length)+" )")]),t._v(" "),i("v-icon",{staticClass:"el-icon-search",attrs:{color:t.user.chatColor,size:18},on:{clickIcon:t.spreadInput}})],1),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:t.spread,expression:"spread"}],ref:"searchMember",attrs:{type:"text"}}),t._v(" "),i("ul",[t._l(t.groupUserList,function(e){return i("li",{key:e.userId._id},[i("a",{staticClass:"vchat-photo",class:{lineOf:!e.status}},[i("img",{attrs:{src:t.IMG_URL+e.userId.photo,alt:""}})]),t._v(" "),i("span",{staticClass:"vchat-line1"},[t._v(t._s(e.userId.nickname))])])}),t._v(" "),i("li",[t.groupUsers.length>t.groupUserList.length?i("p",{staticClass:"loadmore",on:{click:t.loadmore}},[t.loadmoreLoading?i("v-icon",{staticClass:"el-icon-loading",attrs:{color:"#fff",size:14}}):t._e(),t._v("\n                            加载更多")],1):t._e()])],2)])]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.currNav,expression:"currNav === 1"}],staticClass:"vchat-item-container"},[t._v("\n        努力开发中...\n    ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.currNav,expression:"currNav === 2"}],staticClass:"vchat-item-container"},[i("message-log",{attrs:{currSation:t.currSation,currNav:t.currNav},on:{lookPhoto:t.lookPhoto}})],1),t._v(" "),i("v-photo-swipe",{attrs:{visible:t.photoSwipeFlag,url:t.photoSwipeUrl},on:{close:function(e){t.photoSwipeFlag=!1}}})],1)},staticRenderFns:[]};var g=i("VU/8")(v,y,!1,function(t){i("l1D3")},"data-v-2702691e",null);e.default=g.exports},jSyR:function(t,e){},kIu4:function(t,e){},l1D3:function(t,e){},l6BA:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("Km9/");var n=i("RvFq"),a=i.n(n),r={name:"aplayer",props:["src","pic"],data:function(){return{}},computed:{playerName:function(){return"aplayer-"+Math.random()}},methods:{initAPlayer:function(){new a.a({container:document.getElementById(this.playerName),mini:!1,autoplay:!1,theme:"#FADFA3",loop:"all",order:"random",preload:"none",volume:.7,mutex:!0,listFolded:!1,listMaxHeight:90,audio:[{name:"",artist:"",url:this.src,cover:this.pic,theme:"#ebd0c2"}]})}},mounted:function(){var t=this;this.$nextTick(function(e){t.initAPlayer()})}},o={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vchat-aplayer",attrs:{id:this.playerName}})},staticRenderFns:[]};var s=i("VU/8")(r,o,!1,function(t){i("LG4Y")},null,null);e.default=s.exports},mYXt:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("4RJ8"),a=i.n(n),r=i("gyMJ"),o={props:["url"],data:function(){return{cropper:null,cropedUrl:"",cropingUrl:"",loading:!1}},watch:{url:function(t){this.cropper&&(this.$refs.cropFile.value="",this.cropper.replace(t))}},methods:{initCropper:function(){var t=this;this.cropper=new a.a(this.$refs["avatar-image"],{viewMode:1,aspectRatio:1,crop:function(){t.cropedUrl=t.cropper.getCroppedCanvas().toDataURL("image/png")}})},reset:function(){this.cropper.reset()},fileChange:function(t){var e=this,i=new FileReader;i.readAsDataURL(t.target.files[0]),i.onload=function(t){e.cropper.replace(t.target.result)}},uploadImage:function(){for(var t=this,e=window.atob(this.cropedUrl.split(",")[1]),i=new ArrayBuffer(e.length),n=new Uint8Array(i),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);this.loading=!0;var o=new Blob([i],{type:"image/png"}),s=new FormData;s.append("f",o,"f"+Date.now()+".png"),r.a.uploadFile(s).then(function(e){0===e.code?t.$emit("avatar",e.data):t.$message({message:"保存失败",type:"warning"}),t.loading=!1})}},mounted:function(){var t=this;this.$nextTick(function(e){t.url&&t.initCropper()})}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vchat-crop-box"},[i("div",{staticClass:"vchat-crop-container"},[i("div",{staticClass:"vchat-crop-left"},[i("img",{ref:"avatar-image",attrs:{src:t.url}})]),t._v(" "),i("div",{staticClass:"vchat-crop-right"},[i("img",{attrs:{src:t.cropedUrl,alt:""}})])]),t._v(" "),i("div",{staticClass:"vchat-crop-btn"},[i("div",{staticClass:"choose-pic"},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("选择图片")]),t._v(" "),i("input",{ref:"cropFile",attrs:{type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png"},on:{change:t.fileChange}})],1),t._v(" "),i("div",[i("el-button",{attrs:{type:"primary"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.uploadImage}},[t.loading?i("v-icon",{staticClass:"el-icon-loading",attrs:{color:"#fff",size:14}}):t._e(),t._v("\n                上传\n            ")],1)],1)])])},staticRenderFns:[]};var l=i("VU/8")(o,s,!1,function(t){i("BkFi")},null,null);e.default=l.exports},oAV5:function(t,e){var i=function(t){return(t=t.toString())[1]?t:"0"+t};t.exports={formatTime:function(t){var e=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),r=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return[e,n,a].map(i).join("-")+" "+[r,o,s].map(i).join(":")},formatDate:function(t){var e=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(i);return e[0]+"年"+e[1]+"月"+e[2]+"日"}}},p60H:function(t,e){},sIqw:function(t,e){},tRMW:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAakAAAF8CAIAAAD6vdOQAAAgAElEQVR4Ae2d55LjyJVGSTiCrkz7Vo8iZmJjtaGQ3v9F9EdaRexoXLuqLkcLgAD3S2CG5bqrilUEmWQeTk83DZDIe27iw03fPD0fNnhBAAIQcIyA55i9mAsBCEDAEED7KAcQgICLBNA+F72OzRCAANpHGYAABFwkgPa56HVshgAE0D7KAAQg4CIBtM9Fr2MzBCCA9lEGIAABFwmgfS56HZshAAG0jzIAAQi4SADtc9Hr2AwBCKB9lAEIQMBFAmifi17HZghAAO2jDEAAAi4SQPtc9Do2QwACaB9lAAIQcJEA2uei17EZAhBA+ygDEICAiwTQPhe9js0QgADaRxmAAARcJID2ueh1bIYABNA+ygAEIOAiAbTPRa9jMwQggPZRBiAAARcJoH0ueh2bIQABtI8yAAEIuEgA7XPR69gMAQigfZQBCEDARQJon4tex2YIQADtowxAAAIuEkD7XPQ6NkMAAmgfZQACEHCRANrnotexGQIQQPsoAxCAgIsE0D4XvY7NEIAA2kcZgAAEXCSA9rnodWyGAATQPsoABCDgIgG0z0WvYzMEIID2UQYgAAEXCaB9LnodmyEAAbSPMgABCLhIAO1z0evYDAEIoH2UAQhAwEUCaJ+LXsdmCEAA7aMMQAACLhJA+1z0OjZDAAJoH2UAAhBwkQDa56LXsRkCEED7KAMQgICLBNA+F72OzRCAANpHGYAABFwkgPa56HVshgAE0D7KAAQg4CIBtM9Fr2MzBCCA9lEGIAABFwmgfS56HZshAAG0jzIAAQi4SADtc9Hr2AwBCKB9lAEIQMBFAmifi17HZghAAO2jDEAAAi4SQPtc9Do2QwACaB9lAAIQcJEA2uei17EZAhBA+ygDEICAiwTQPhe9js0QgADaRxmAAARcJID2ueh1bIYABNA+ygAEIOAiAbTPRa9jMwQggPZRBiAAARcJoH0ueh2bIQABtI8yAAEIuEgA7XPR69gMAQigfZQBCEDARQJon4tex2YIQADtowxAAAIuEkD7XPQ6NkMAAmjfEmVgMh4nSbLECRwKAQjYSiCwNWN25Ws+n89ms/FoEgS+XkEAN7scRG4gsCwB7uEHEZP2TUbjZDqdSfjCMOjB7UHcOAgC1hKgznu/ayR8eZ6Ph6N8lmdpOh1PiqK4/zSOgAAELCaA9t3vHAmfgr7ZLJcIFsU8TbPJaKL395/JERCAgK0E0L57PCONm2Wz0WisN934Io7G+UwfTQzYQP3ugcfPELCXANp3j28kfFM182VpGEz2e8e99qnvTU3NdzrNi/yek/kZAhCwlQBt9t/0jAI91Xank+l0PG028l77TMKXha10Fg/GrfFw7HleK275nt9ofjMRfoAABOwkgPZ9xS9SPb2KvBiPxuPRKEuSMMgO+5+jIAn8bK9zMhwfTCcTnalOjziO/cBvNtG/r5DkKwhYSwDt+4pr1JYn1Ssb9WbzYh4GyUHvKA4V6OVeo+i0Bge947PhCw15ybJ0HEXdbrfdbSsM/EpafAUBCFhJoHl6PrQyY5vJVJZmCujUlpelM/VpqI2v1z5XVbfTGobBtNk0vRtF4adZPE76F+Nnk6SfF4r7gigK405bVWCGPW/Gc1wVAksSIO77HZgquZI8jd1LJkmWZZK4dmuo6q2a+VrR2PdmC7CK/uLWOAjU+5EMxtPh5HCadnL1ieiVZUYBW63FwbyBAATsJEA17dIvCvSkYFXvbbMxV9NeFE4DP202b49knnvNQtoXhUklixrtp44RjQEscjp/L5HyDgLWEqDOe801yTRRO586dmd5rnHMcTTa733Z63xphROFe9Wh83mzKIJp1jkdvBpODrJZWx0dmufb6anVrxOG4bUU+QABCFhJAO275payf3euOm/V1zEvZurcaIVjdfIe9j9V8pdm7ZOL12fDl7MinDc0vVd9HR2pntY4kAjqdS1FPkAAAlYSoL3vmluMdPnNqBl5vhm7p8F9iXo+0oZCvE58oYa/+dwbJz0JXzZrha047miISxyEZnUXVO8aSj5AwG4CaN9X/NP0mqEXqsdWL41cmYwaSda4GD8/9NSgF6lzI8vbYSvs9rpx2wgfqvcViHwFAbsJoH3f9I8ULWpF+lkDmEfD9Hz4XK1+Gt0ynOxLHDvlmD6J4zfP5wcIQMBiAty69zgn1MC9djwej6dp17Tx5aE6N4Io6JQNfPeczM8QgICtBBjjco9nFP1J/jRzo+l5mso2SXoayayPahCkqnsPO36GgMUE0L77nRP4JspTd4Z6dRsNLyyDPoTvfnAcAQGLCaB99zvHdH2EmrIWK9Yzb8qOXbTvfnAcAQGLCdDe9yDnVJ0bmvWhXt243X7QORwEAQhYTADte5BzFOVpuJ8Wa1Fjn5r/HnQOB0EAAhYTQPuWcE6311viaA6FAAQsJoD2LeEc2viWgMWhdhAw0zQ1Bb3ZaDZp3L/mErTvGg4+QGAHCEjs8rxIk8SsLJRrFSKz7qTnqcHGD6OImUiVi9G+HSjqmACBSwLaa0GLcWhFosl4rDdajki/aY01xX1mhd12rD9SQA1auDzHyXdon5Nux+gdJaCIL0mS4WCoHaW1xKTZZSEoVOEtiqYqvlmm1XVTyWJvvy8FdHyXBbRvR28CzHKSgJaelPBp3wUJn7ZU1dKT2lHa93OtP5RkrbPhG81GT5LG7CR/9uIwarVclj+0z8lbBKN3kYAa9zTxPEmmUTB+vvex2z7TzoKeNyv3mWn6XqqlyFvh8Hz0YpLsDc6H+4ee5G8XSTzIJrTvQZg4CAKWE9CGggr31L/hNyf9ztl+70hbymjrhT+yPTf7zEQjxYONRjPNOqbqO9VUJXWAOCoCrrd3/lEy+BcC201ALX1q49P2qu1o3O+caDOZK8J3aVoUTrrtc+3DVRQzqZ+mKl3+5tg7tM8xh2PujhKQ9mmHVa01qS0WtIX0HVaGftJrnygA1NZc2mDrjiN3+ye0b7f9i3VOEJDwFYU6NFSxnfvBzPfviua8Zq5VeNUIqNEwqik7AehrRqJ9X6PCdxDYTgIayNLQn8tmvq+a0dRoP/OD+Qvt+yoivoQABLaBgGZbam3das5lXvh5cddyG8Xc005bUkkNcNH/22BfLXl01/JacJIoBDZEQMKnNYYkgdpSZpJ0v52LpvbbGk33VD9WD6/2F/z2kTv+C9q34w7GPEcISPtanZbGrEzS/mD8oii+Lmp5HkyT7nD8TIuQaysuze11hM9tM9G+20z4BgLbR0AV2F6vpxm7s7w1GO+fDN4WxU1dkyBejF980U9zv6WXViD3bx6zfZY/NsfuWv5YYpwHAUsJaHkCbZ2qYS7pND+5eJ2k3U58piEvvqcOXS+dxaPJgWq76aytqm5vrxcq6Cv7PCy1p+ZsoX01AyZ5CKyLgKn2xi2NW9GbNAnOR61pGmuQswa1FA1vNoukhkWjpUVc4k67pbUMHG7sk09s1L4iz9XxbnqtHO6EWtf9wnV2ioAf+NXO0eORnyXpdNaapGYNK73M/eT7cRS2O21pn8urGPwO5PR8WL2z5O9yas5EQzXVEKsHlCW5IhsQ2C4CqvlOxprem2r50qIw6zZr4q6iQv1xdgLvDQ9aF/dpoPlwONSI816/h/bd8BYfIfBAAgrrFAAqxCsHL6sepUXrTehn/uFVErBL+zS7MJlMq2mJWoIxSiJFf3gKAhB4BAGjdNK6Vb+qicNaCdosgR98fSTNqq9ZS3oWjXHRstqz2Ww0HJn2PvVVaR2yyVRf8oIABOwhIO0bj8bD4ShNU3ty9YicWBT3aTK2mieS6dRrZgrM89l8Op0qaGdrlUf4lVMgUAcBCZ+WvVJLogIU39fSp9H2zgyxKO7L0lSLL2qHKS0u1o0HoT/V5gLj0Ui46/AiaUIAAssS0PqA5SqB2v4t1/J/+rNsCvYcb4v2qVvKoJxoie3i2d6n5/u/deKBQCu61t/Inz0lhpw4S0BBiDZ+U21Xd6sgqJZmAsCtXQXLFu1TVTdJUg3J7LYutPKihE9/R+GolL+RyyssOnunYbhtBLTHm5rgi3ym5f+0BZKnpe9/r6ttZc3MCu2TtE3GUw3F1IqyZp8BP/W9Wad10YvPNdBPoZ9+qh41tpUG8gMBRwio7lU1xzeb+V73ZL97pN0/1DmpVqktDU023NchRSt3DDVdHI150o5G/faZqr0qT61o0mufXYyfzdK5Qmt9E5YNq3V02ztSfDETAo8moC4ODb2YZUkUTPe7x4pOtArWJO0mU82fSzWcUK9HJ76REzemfXqM6HEhauPhqJS2vBuPtL+UNpeqQJTbSo33O1/ORi9Hg4GG+2mspqZqa0hROW5p9QOXNuIALgoB+wnobp1MJmqR10aXikha2vNXNbN4ME76o2moW1hD/bZuu8vNaJ/aR9Wlq2hZNM2mAfOi37447H3W/lJXy0EUTp/vfdA35+Pns6w5OB+o/lspYBBqmcarx/IeAhCohYCET0Gfdj1XFa3Tmj7rf9LiCLqSWuT3Oifa7FyxS9yOzVDnrVocYd3ap1hPeidYaiVVY0GzkXbjoQhqXIsaUPUwueq9ZrOIounz/Q/aVW84ORhO99Osq8HP6hWJ9WrHzPq4iov3EFgtgUr1FPFJ+FThjQI1Q51rl8tys/OG72e6bfu6N6d7g4tBmmbtTqw1Abel8rs+7VOPrQaCi6C0zzQQNNNONFKHRtWlK44V0BvOk/wpwNY6PGplUNeSYuzxtJ9OY83QVnd7uf5ipLnZrPhygxsfIfAUAuVwFt2tv9+wutkkfIpR+p3TqjleieuGVbyi6pp2PpokxWSkTS/VJphquQTNxPc8tU09JQu1n7tO7TPDwc3AyHJL0ChSxHd20DuWtN1rpdr+2vFQMaCeOXmulWlDzfmdzXL93Wz2tDLPFs8qvNf4cvUhMwedXp4HsFrbIRrWobBIGmH+36GXzFGYosBCw1nUA6nODbXxqaqriE/Cp0Dvqq2Bn/W7J5qFNfAP1O+RJa10GinCidtt1cks3w9kfdqne9d0Bfm+4Kp7V9tEFfMgL8wfNR98Nei7QrlZFJ5UTxtQaT0efS8dKFPTKn+e3U+XK0Y89q1ZylBGlveY5c/Sx5q4ZedJ7cw+j2Wp1cj7Lcv9N7KrG1MvM2WtnK6rcXwazqL6ljo31MansGMR8V0m0JyrxnbQ/9Rrnw4mB+fDl6NkbzqeaUUSVX67va5EUDdoWXwvT7LkXXNt6/c9huwfkLTk7IKsRLDZ9O0n+0fen/qv73mB7336dPTzzx/G5Vifp6bI+asg0OnE33339s2bV7kmopfzHFaR6ibTMIMuRmNVzsol/wrVZ8txfKZm9sDoRDvAqVVKy+VPkl4xDxXohFGoXUTittlEaZO2fe3a64v7jPg3m2KhPVWiuFVF1GnmnY8CkVpE1Grgu8znXIttB4Pxs8G4jKhzbSqq5bZbi4haGxRcHryL7xTlSfg+fz7+9dePX76cbekg0l30TEMdAAr+ZNrbt69Vi9Fr680sK2RapKCaR6Cg1mvO1P14owfyG2bO1TDlNzLfyzyFxGWDgNKpRnHYiWZ92lchk/xpXZZq5S/pYKo1+qbJOGnpiVHtqteJLxZw1a43HB+eDPUY6TaaLY1tbunPlrSkLqx42htV7Zvn50P9URPM05Li7FUS0H19cTG4uOi+e/dmleluLi3dlVo2SauzVL2R5Ta+BxrAfHdvZJVf3bxJ2h4ne4r7kizWBpi6u3W76qWGP9XUNmfWN6+8bu2rMiIUkXbTC0OhCcKqB927GDfK8czDqllBDYJJ1j4dvhpN+4EO1JiWrepB/yby5X/IMrNsxvLncUa9BExvW5bvzELImjXQDkwfhXppy1FowTiN1IMhOVuMQlPnhmnpvPKSOGo39GnaWYxCUzpRHNo/Cm0z2lehq6rACgPb7fbpl9NkWmicpKbLqH1B8bZ6NlQXHkz21ZvR3+u3u51d7869UqDufCsOejiL3p1H8ePqCahiq3BPkrf6pK1JUWVL0wfUrPTH7IOmZm7oxtQ4PjP7oHuizo1FZo3wpfGXi7dm9kHe0q0ahOZ0zb+yf/bBJrWvIljVguNOnOczbSF6Mnj9+tnPfnOmp40m84qm4nA9i+SSBXHH37x79+r16xfdbsdxDus3X31Nnz4d//TT+/Vfes1XVEtLdd+ZDpBy1qkGMKtnW/+pV3eRGUV8Ej7NOs3zIIjC67NOF0dZ+mbz2icwkj+Ffho/OR6mipwPUjNTWmOYJ6nG7nmdnnmGWMpvE9nqdNr9vvrO4u1dOm0T2J56zaanrc784fD+4ahPvZId55ugJAg0kkxz1VTYNHNDA5g1jk/DWYJAoZ9CYF9VXUV8Er5uvy+t3K7VRqzQPvlaNV+1jJpx5FlxPnqhDia1m84bURyXbaXbtkREraXX1HhLINfaXWq9JImbPl31O4m9W/UPlTTdmOoG0Z2pmRtq/tNos/3uFzXNq3NDkYqquor4JHxms/Otuk9t0T49ZFSxVYeG5vlejFTVnaubSY8ds3CLY6XtIToj1SuHVaB+D6G1mmPKQSyOAtc9qJ5GTVnTzA0NYNaWEhrOouhEU+zVKqWqriK+7RI+lQlbtE9ZCcMobptF6tW9q49C2Yr0TVuyuJrCSyoQgMBjCSguMdWyaaSZG2qL1zg+/a21RcrOja0MUCzSPkmcRr30el21LKg3TWGgAmm1uT7WWZwHAQisjICJReKW5upqyppmbmgAs8bxqQFUQZ/+3sYAxSLtk5cEUWNZ1JvWzHOB1p+VuY6EIACBpxHQuD/VwzRXV4PPlJIGMGscn1qltlH4lH+7tE8QzXC/TruM+1q09D2trHI2BFZJQF09VaP8dGKamzVzQwOY7R/H9y0Edmmfcin5UxQttOpa+lam+R4CEFg/AbVKqftRq7OY0RimVUoz6+PtbY23Tl+kfXq2rN+vXBECELiXgKpiqvaG0UiLFFRzde89xdoDrNM+a0mRMQhAQAS0Hp+WpdLsvm2PUdA+yjMEILAEAdXMtB6fBjrauTrLwy1B+x7OiiMhAAFDwMKFSB/hmB1f+/MRRDgFAhBwgQDa54KXsRECELhJAO27SYTPEICACwTQPhe8jI0QgMBNAvR13CSye5+rBUgcXYHkTneWmx7feQQ/7i4BtG93ffuHZdo+2+yH/MdH/l0Q0EIZnplJtPiCNw4RQPt239kSvpnZRXH3LV3WQq0MKeEz//FyjwDtfe75HIshAAGNUgQCBCAAAQcJoH0OOh2TIQAB4j7KAAQg4CQB4j4n3Y7REHCeANrnfBEAAAScJID2Oel2jIaA8wQY37f7RUDrrPnNRtFkgN9NX2tsM0P7bkJx5jPat/uu1sQFDeLVBIbdN3VJC1XrYVbHksx253C0b3d8+S1LmLrwLTJ87zIB2vtc9j62Q8BdAmifu77Hcgi4TADtc9n72A4Bdwmgfe76Hssh4DIBtM9l72M7BNwlgPa563ssh4DLBNA+l72P7RBwlwDa567vsRwCLhNA+1z2PrZDwF0CaJ+7vsdyCLhMAO1z2fvYDgF3CTCfd/d9rz3atFXbZu30tZgMe0Fu1gdc/ToBtO86j138pO0pi02Ln6dltFhHZhdL1/bahPZtr+8emnPtzKuob7P785o8zM1muLwgYAkB2vsscQTZgAAE1koA7Vsrbi4GAQhYQgDts8QRZAMCEFgrAbRvrbi5GAQgYAkBtM8SR5ANCEBgrQTQvrXidvdi6uGlk9dd99toOdpno1dqyBPCUwNUktxmAozv22bvPSzvvud5m96cl1kdD/MVR62PANq3PtabupLZo5JRxZuiz3VtJUCd11bPkC8IQKBOAmhfnXRJGwIQsJUA2merZ8gXBCBQJwG0r066pA0BCNhKAO2z1TPkCwIQqJMA2lcnXdKGAARsJYD22eoZ8gUBCNRJAO2rky5pQwACthJA+2z1DPmCAATqJID21UmXtCEAAVsJoH22eoZ8QQACdRJA++qkS9oQgICtBNA+Wz1DviAAgToJoH110iVtCEDAVgKsYWWrZ1aXr0J7k1d79K4uTdtTaja9RtPjyW67nzaZP7Rvk/TXc20JX55vdmvy9Rh6eRWtUj3XqoUeyxZeMuHdDQJo3w0gu/hx3phLC/S/O6/f16lmpX53XL60pdQKlkbGCRCAwA4QQPt2wImYAAEILE0A7VsaGSdAAAI7QID2vqWdaLYcUzu6Oa/+5qRymyFa7Jd2EidA4D4CaN99hK7/rp7D8qW+g+L6L6v/ZDon5o08L/Sau9VVsXqYpAiBGwTQvhtA7voo1QsCP02S9+8/D4djKdJdR6/ktzLAPDk5n83ylaRHIhCAQEUA7VuiJAS+N7gYfPjwWdq3TjHKsplCvyUyev1QE6jqm/or6Ncvu8lPsvV3qzeZC65tNQG0bwn3eF5zNJocHZ0o6FvitE0fKuUL/KZTlWbTIEsr6aYLnuXXR/uWc1CWZUmSLnfOpo82sxtcCvo2zZvrbwcBtG8pP5npAlcDKEWCnv6vOcSoujuWyigHQwACdxNA++7mc8+v/X7v+fODTie+57gn/Cyp/fjx8/n5cJ0tjE/IL6dCYDsIoH1P8lO/3/3Tn161220zGmXVrypF3/PVvDgcTtC+VQMmPacJoH1Pcn8QBHEcR61I4+9WL36mb7YZhX4YBnVXq59EgZMhsIUE0L6nOk2SVy4S9fgxKHfkQJI3n3u1yOodV+UnCDhAgPm8DjgZEyEAgVsE0L5bSPgCAhBwgADa54CTMRECELhFAO27hYQvIAABBwigfQ44GRMhAIFbBNC+W0j4AgIQcIAA2ueAkzERAhC4RQDtu4WELyAAAQcIoH0OOBkTIQCBWwTQvltI+AICEHCAANrngJMxEQIQuEUA7buFhC8gAAEHCKB9DjgZEyEAgVsE0L5bSPgCAhBwgADa54CTMRECELhFAO27hYQvIAABBwigfQ44GRMhAIFbBNC+W0j4AgIQcIAA2ueAkzERAhC4RQDtu4WELyAAAQcIoH0OOBkTIQCBWwTQvltI+AICEHCAANrngJMxEQIQuEUA7buFhC8gAAEHCKB9DjgZEyEAgVsEglvf8MUOEpjPLTCq2WhakAuyAIGKANq3+yVhVszzXOq3Yf0LPM/3mk30b/dL3HZYiPZth5+elEsje/ONh34mFyjfkxzJyaskQHvfKmnamtaGI74rWOzJyZVM8dZJAmifk27HaAg4TwDtc74IAAACThJA+5x0O0ZDwHkCaJ/zRQAAEHCSANrnpNsxGgLOE2CMy+4XAY2pa5rxJTZYakUmbABBHjZOAO3buAvWkQGNKV7HZe68hg15uDOD/OgWAbRv9/2t2RSet3nt23wOdt/VWLgEAbRvCVjbeyi6s72+I+c1EaCvoyawJAsBCFhNAO2z2j1kDgIQqIkA2lcTWJKFAASsJoD2We0eMgcBCNREAO2rCSzJQgACVhNA+6x2D5mDAARqIoD21QSWZCEAAasJoH1Wu4fMQQACNRFA+2oCS7IQgIDVBNA+q91D5iAAgZoIoH01gSVZCEDAagJon9XuIXMQgEBNBNC+msCSLAQgYDUBtM9q95A5CECgJgJoX01gSRYCELCaANpntXvIHAQgUBMBtK8msCQLAQhYTQDts9o9ZA4CEKiJANpXE1iShQAErCaA9lntHjIHAQjURADtWw7shjb9md/I5YaycSMXbn2czxv6c/Vl9j3GE1eJbNV7tG8pd81V3D3vEtp8Pi+KotbyryvqEnotMuqbTSeb12/DxY+8qYuAvCx3y+GLC5jCYDY+xhULJNv05vI23qZcbyivKvgSviDwF9ef6ZXNdA/UJ39KO8/z69rne55/IwZZZIk3NRHQHscSvtksX6Svh1AQBPMC7Vsg2aY3aN9y3lJZD8NwcY7uhDTLjPTVJn6KM3WVq7ec8qC7bpEH3qyHgLycZfl0miwuVxaGAOVbANmuN9xCy/nLD7wwvNzQPU2zZJqUleDVi59SVJUqS1OFfVdzKekrYxBuuqtUan+vB1yWZdNpuriSnkBXC8Pie95sBQG0bwk3qZqpoK/dbi3OmU6no9H4agvg4qenv1GgIfk7Px/olqtS0xetVlQGfauX2qdneLdTkJf1nBsORwszoyiK41bZ+MBzaEFla96gfUu4qijmcavV63UW5yRJOhpN8lleS4NfWZU+Oj5Nkkvt6/e7vq/GPm62hRPW8UZPnSIvVOEdj6eL6+kp2O128gJvLJBs0xu0bwlvqZBHrajXM+pTnSY1lPxdXAxNjLZq/VN66kX+cnyapr/XsxR6PHt2EIQBd9sSblvFoYq1R+OJhG/R6SRftNtxt9tefLOK65DG+gigfUuwluLopea2/f3eop6ruO+nn96Lo9rglkjrvkOVvjoQh8OxhFWdydXhugNfvnym7hap8H0J8PvKCOipFgb+p49HJydni0QV/qvCa2I+fLGAslVv0L7l3KVyHrVar169KBvdzLnq7vjy5dQ0A5kRMCuTP43hS5Lpf/7zS5bNqptLwWanE+uWkywq3lwu3xz9WAISPvliMp6cnl5crfA+e7bf7XXRvcdy3fx5aN9yPlAFRyMbXr16rmd+Ffrpm8lk+ssvH9QQbvpfV1HzVUeuundPT86Pjk4WVao4jt68eamrL5djjn4CATlTwqen2i+/fFQAroGWSkwujqJQjQ96FM2ud8E/4VKcum4CaN9yxFXH0Vh+dTi8eHGoG6A6WWNQfvvt0/HxiRrmJFtPlL9KUs/OLj58ONKIiqpKpS/Vzvind6812oUK73I+e+zRpfApxC5OT89//fWDnnBVSnrAPX9+sLff13No8WR67EU4b2ME0L6l0asZThXO77//TgpYyZzkST0eP/746+dPXzTDqQz+Hln5lXBKPVWDfv/+86dPx4vMKczc3+/3ez3VdmlgWmCp9Y2eN5K/wcXgn64yur8AAAa8SURBVP/8P7XqVjJXBX0//PCdaeyj5aFWB9ScONq3NGCJj4Y19Pd6Va1ncb76JX766beff3rfCs3Ei0dEf2pD1KnDweDf//vjxyvCp6TevHnx/ffvMk2oooVpQbzON/KgfHF8dPrvf/+kIZaL+E6DmeX3/YM9zbfRTMM6s0Da9RKg8ehxfCV/xXd/fqsGoJ9/fq/uDqWicEzxmj4qBlRUGLVCTXuflXHavdeQ6pVtfNn7j0dqOlSFV9OEF2e9ffvy9esXYRTN8pw+jgWWOt7oMaNoT+22Erv//PiLou/z84uF8KmS+/z54V/+8oMOIuirg/8600T7HkNbsddsVmh419u3r9QPK7Wqbg/Nuh0MRvpGbw4P9xQddNqx1ErHF2VVeVFdVWVKjeamadCsyaKJounx6ejky5m6jE9Ozhc3m+5DNfPpKgozy8ou0vcYf919ThWhC7Wp4jbMxLWTs4uzs8GnT0eDwbjq39D3OkDNfH/+89tevycPo313U7X/1+bp+dD+XNqZQ7UHqWZ7fmGqqBr5Jb27Im3Ng4O+gjXVjzQNLoxCjVDRzWNuM/0pj9O4ZXWSzHSrzWaDwVBthcfHZ4vpazJZ6Utef/jh3bt3b1px68asXjuZbF2u9FiSN/Rk0rQNwc/STE+vDx8+y6FXgcsXBwd73//wnZ5DauVbCOLW2UuGFwTQvgWKx7ypBG06mf7jH/9SRVUytpC/KjlNv1UfxYuXzw4P+hIyTckwM9KKuY5U1Vh1ZI1iUayn/txFrLfIh6aLaiTz3/7234sO5cVPvFkVAWle5Yvzi+Hx8anGFak/96oT9ajSM07DKv/61/969vxQj66ra+qsKhuks34CaN9TmSuaM81Def6vf/2f4oXJ5HKNIyVtKrWqTJWvqm5Vhn3morrB9FJwoZfe3M5Hea4XRaZdQmfxWjmBMugzqYq/nGA8ccsXZefG/t///j+mY7ehiI/+jZX7YTMJon1P5S5RUkOR7/nTyUQR3MePR0dHp9SJnorVgvPLem5f48k1jUdrFugBRZOrBW5ZWRbo63gqStOVoRageR632y9f+arYHh7uq+Xu4mKg/t+vBnRPvSTn10lA4baaMjSWUj0b6rDa2+u3O23N3zCRYZ3XJe01EyDuWyVw3TOq/0rvPn86VmO5BsSqUS/RElQamFcudYQUrhL36tKq2iVUvVUbq5potTjV4eGBZi624kh+q3y3uquRkhUE0L4Vu0ENcwoc1KWh8XoSPQ2L/Xz05eJ8oN4MM/KF1qIV815BchI+DdxTh9Lenon1zJD1blueKt2lau4KLkESFhJA+2pxStk1Yfo2TGtgQ3uqFdXYMVWbqqEwBIC1cF8yUbXomVDdrMZo2vJKT8ljpg1DL3y0JM4tO5z2vlocVgYLagQ0HbTmlmp65d1k/g1CzSMklqgF+/KJmufTvNpoSp4yHpPiIXrLg9zCM9C+Gp0mhTO30fVaUxkS1nhRkl6GgPpulzmcY3eIANq3bmdeV8J1X53rQQACFQHWcaEkQAACLhJA+1z0OjZDAAJoH2UAAhBwkQDa56LXsRkCEED7KAMQgICLBNA+F72OzRCAANpHGYAABFwkgPa56HVshgAE0D7KAAQg4CIBtM9Fr2MzBCCA9lEGIAABFwmgfS56HZshAAG0jzIAAQi4SADtc9Hr2AwBCKB9lAEIQMBFAmifi17HZghAAO2jDEAAAi4SQPtc9Do2QwACaB9lAAIQcJEA2uei17EZAhBA+ygDEICAiwTQPhe9js0QgADaRxmAAARcJID2ueh1bIYABNA+ygAEIOAiAbTPRa9jMwQggPZRBiAAARcJoH0ueh2bIQABtI8yAAEIuEgA7XPR69gMAQigfZQBCEDARQJon4tex2YIQADtowxAAAIuEkD7XPQ6NkMAAmgfZQACEHCRANrnotexGQIQQPsoAxCAgIsE0D4XvY7NEIAA2kcZgAAEXCSA9rnodWyGAATQPsoABCDgIgG0z0WvYzMEIID2UQYgAAEXCaB9LnodmyEAAbSPMgABCLhIAO1z0evYDAEIoH2UAQhAwEUCaJ+LXsdmCEAA7aMMQAACLhJA+1z0OjZDAAJoH2UAAhBwkQDa56LXsRkCEED7KAMQgICLBNA+F72OzRCAANpHGYAABFwkgPa56HVshgAE0D7KAAQg4CIBtM9Fr2MzBCCA9lEGIAABFwmgfS56HZshAAG0jzIAAQi4SADtc9Hr2AwBCKB9lAEIQMBFAmifi17HZghAAO2jDEAAAi4SQPtc9Do2QwACaB9lAAIQcJHA/wPNs7QCergtKQAAAABJRU5ErkJggg=="},tvaV:function(t,e){},xDE0:function(t,e){}});