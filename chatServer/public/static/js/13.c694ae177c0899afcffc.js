webpackJsonp([13],{"124w":function(t,i){},RT1c:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=s("woOf"),o=s.n(n),e=s("Dd8w"),r=s.n(e),a=s("gyMJ"),c=s("XOnc"),u=s("NYxO"),l={name:"ownGroup",data:function(){return{is_focus:!1,IMG_URL:"",loadingWait:!1,Groups:[],mySetGroups:[],myJoinGroups:[],showList:["set"],currGroup:{},visible:!1,x:"",y:""}},components:{vApheader:c.default},computed:r()({},Object(u.c)(["conversationsList"]),{addOrDel:function(){var t=this;return this.conversationsList.filter(function(i){return i.id===t.currGroup._id}).length}}),methods:{handleCommand:function(t){this.$router.push(t)},goGroupDetail:function(t){this.$router.push({name:"groupDetail",params:{id:t}})},getMyGroup:function(){var t=this;this.loadingWait=!0,a.a.getMyGroup().then(function(i){0===i.code&&(t.Groups=i.data,t.filterGroups(),t.loadingWait=!1)})},filterGroups:function(){this.mySetGroups=this.Groups.filter(function(t){return 1===t.holder}),this.myJoinGroups=this.Groups.filter(function(t){return 1!==t.holder})},setShowList:function(t){this.showList.indexOf(t)>-1?this.showList.splice(this.showList.indexOf(t),1):this.showList.push(t)},upVisible:function(t){this.visible=t},contextmenuClick:function(t,i){t.preventDefault(),t.stopPropagation(),this.currGroup=i,this.visible=!0,this.x=t.clientX,this.y=t.clientY},handleConversitionList:function(t){this.addOrDel?this.removeConversitionList(t):this.addConversitionList(t)},addConversitionList:function(t){var i=this,s={name:t.title,photo:t.img,id:t._id,type:"group"};a.a.addConversitionList(s).then(function(t){0===t.code?(i.$message({type:"success",message:"添加成功"}),i.$store.commit("setConversationsList",s)):i.$message({type:"success",message:"添加失败"}),i.visible=!1})},removeConversitionList:function(t){var i=this,s={id:t._id};a.a.removeConversitionList(s).then(function(t){0===t.code?(i.$message({type:"success",message:"移除成功"}),i.$store.commit("setConversationsList",o()({},s,{d:!0}))):i.$message({type:"success",message:"移除失败"}),i.visible=!1})}},mounted:function(){this.getMyGroup()}},d={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"vchat-ownGroup vchat-noUser"},[s("v-apheader",{attrs:{title:"我的群聊"}},[s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[s("v-icon",{attrs:{cursor:"pointer",name:"hanbaobao",color:"#fff"}}),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"/main/personalMain/group/set"}},[t._v("新建群聊")]),t._v(" "),s("el-dropdown-item",{attrs:{command:"/main/personalMain/group/search"}},[t._v("查找群聊")])],1)],1)],1),t._v(" "),t.Groups.length?s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingWait,expression:"loadingWait"}],staticClass:"vchat-ownGroup-container"},[s("div",{staticClass:"vchat-linkman-container",class:{active:t.showList.indexOf("set")>-1}},[s("h3",{on:{click:function(i){return t.setShowList("set")}}},[s("p",[s("v-icon",{staticClass:"list-icon",attrs:{name:"fanhui",size:16,color:"#b7b6b6"}}),t._v(" "),s("span",[t._v("我创建的")])],1),t._v(" "),s("span",[t._v(t._s(t.mySetGroups.length))])]),t._v(" "),s("ul",{staticClass:"vchat-linkman-list"},t._l(t.mySetGroups,function(i){return s("li",{key:i._id,on:{click:function(s){return t.goGroupDetail(i.groupId._id)},contextmenu:function(s){return t.contextmenuClick(s,i.groupId)}}},[s("a",{attrs:{href:"javascript:;"}},[s("img",{attrs:{src:t.IMG_URL+i.groupId.img,alt:""}})]),t._v(" "),s("div",[s("p",[s("span",{staticClass:"vchat-line1",attrs:{title:i.groupId.title}},[t._v(t._s(i.groupId.title))])]),t._v(" "),s("p",[s("span",{staticClass:"vchat-line1",attrs:{title:i.groupId.desc}},[t._v(t._s(i.groupId.desc))])])])])}),0)]),t._v(" "),s("div",{staticClass:"vchat-linkman-container",class:{active:t.showList.indexOf("join")>-1}},[s("h3",{on:{click:function(i){return t.setShowList("join")}}},[s("p",[s("v-icon",{staticClass:"list-icon",attrs:{name:"fanhui",size:16,color:"#b7b6b6"}}),t._v(" "),s("span",[t._v("我加入的")])],1),t._v(" "),s("span",[t._v(t._s(t.myJoinGroups.length))])]),t._v(" "),s("ul",{staticClass:"vchat-linkman-list"},t._l(t.myJoinGroups,function(i){return s("li",{key:i._id,on:{click:function(s){return t.goGroupDetail(i.groupId._id)},contextmenu:function(s){return t.contextmenuClick(s,i.groupId)}}},[s("a",{attrs:{href:"javascript:;"}},[s("img",{attrs:{src:t.IMG_URL+i.groupId.img,alt:""}})]),t._v(" "),s("div",[s("p",[s("span",{staticClass:"vchat-line1",attrs:{title:i.groupId.title}},[t._v(t._s(i.groupId.title))])]),t._v(" "),s("p",[s("span",{staticClass:"vchat-line1",attrs:{title:i.groupId.desc}},[t._v(t._s(i.groupId.desc))])])])])}),0)])]):s("v-nodata",[s("p",{staticClass:"vchat-no-have"},[t._v("\n            还没有加入群聊哦，去 "),s("router-link",{attrs:{to:"/main/personalMain/group/search"}},[t._v("查找")]),t._v("， 去 "),s("router-link",{attrs:{to:"/main/personalMain/group/set"}},[t._v("新建")]),t._v("。\n        ")],1)]),t._v(" "),s("v-dropdown",{attrs:{command:t.currGroup,x:t.x,y:t.y,visible:t.visible},on:{upVisible:t.upVisible},scopedSlots:t._u([{key:"dropdown",fn:function(i){var n=i.command;return s("v-dropdown-item",{on:{dropdownClick:function(i){return t.handleConversitionList(n)}}},[t._v("\n            "+t._s(t.addOrDel?"从会话列表移除":"添加到会话列表")+"\n        ")])}}])})],1)},staticRenderFns:[]};var p=s("VU/8")(l,d,!1,function(t){s("124w")},"data-v-e572b654",null);i.default=p.exports}});