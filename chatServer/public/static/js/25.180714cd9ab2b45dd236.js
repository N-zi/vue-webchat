webpackJsonp([25],{o77C:function(r,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=o("gyMJ"),a=o("mYXt"),s=o("XOnc"),u={name:"setGroup",data:function(){return{groupForm:{groupName:"",groupDesc:""},InmageUrl:"",groupImage:"/img/zwsj5.png",groupRules:{groupName:[{validator:function(r,e,o){if(""===e)o(new Error("请输入群名称"));else{if(!/^[\u4e00-\u9fa5_a-zA-Z0-9!！￥@#$,，.。？?、/;:：；|~·]{2,10}$/.test(e))return void o(new Error("请输入2~10位中文、数字、字母、下划线"));o()}},trigger:"blur"}],groupDesc:[{validator:function(r,e,o){if(""===e)o(new Error("请输入群简介"));else{if(e.length>200)return void o(new Error("请输入不超过200位字符"));o()}},trigger:"blur"}]},showCrop:!1,cropUrl:""}},components:{cropper:a.default,vApheader:s.default},methods:{setShowCrop:function(){this.showCrop=!0,this.cropUrl=""+this.groupImage},handleClose:function(r){this.cropUrl="",r()},getAvatar:function(r){this.groupImage=r,this.showCrop=!1},setUp:function(){var r=this;this.$refs.groupForm.validate(function(e){if(!e)return!1;var o={groupImage:r.groupImage,groupName:r.groupForm.groupName,groupDesc:r.groupForm.groupDesc};t.a.createGroup(o).then(function(e){if(0===e.code){var o={name:r.groupForm.groupName,photo:r.groupImage,id:e.data,type:"group"};t.a.addConversitionList(o).then(function(e){0===e.code&&r.$store.commit("setConversationsList",o)}),r.$message.success("创建成功"),r.$router.push("/main/personalMain/group/own")}else r.$message.success("创建成功")})})}}},n={render:function(){var r=this,e=r.$createElement,o=r._self._c||e;return o("div",{staticClass:"vchat-setGroup"},[o("v-apheader",{attrs:{title:"新建群聊",back:"/main/personalMain/group/own"}}),r._v(" "),o("div",{staticClass:"vchat-setGroup-contianer"},[o("el-form",{ref:"groupForm",staticClass:"groupForm",attrs:{"label-width":"65px",rules:r.groupRules,model:r.groupForm}},[o("el-form-item",{attrs:{label:"群头像"}},[o("div",{staticClass:"avatar-container",on:{click:r.setShowCrop}},[r.groupImage?o("img",{staticClass:"avatar",attrs:{src:r.InmageUrl+r.groupImage}}):o("i",{staticClass:"el-icon-plus"})])]),r._v(" "),o("el-form-item",{attrs:{label:"群名称",prop:"groupName"}},[o("el-input",{attrs:{placeholder:"名称"},model:{value:r.groupForm.groupName,callback:function(e){r.$set(r.groupForm,"groupName",e)},expression:"groupForm.groupName"}})],1),r._v(" "),o("el-form-item",{attrs:{label:"群简介",prop:"groupDesc"}},[o("el-input",{attrs:{placeholder:"请输入不超过200个字",type:"textarea",aotusize:"",resize:"none",maxlength:200},model:{value:r.groupForm.groupDesc,callback:function(e){r.$set(r.groupForm,"groupDesc",e)},expression:"groupForm.groupDesc"}})],1)],1),r._v(" "),o("button",{staticClass:"vchat-full-button",on:{click:r.setUp}},[r._v("创建")])],1),r._v(" "),o("el-dialog",{attrs:{visible:r.showCrop,width:"700px","before-close":r.handleClose},on:{"update:visible":function(e){r.showCrop=e}}},[o("cropper",{attrs:{url:r.cropUrl},on:{avatar:r.getAvatar}})],1)],1)},staticRenderFns:[]};var p=o("VU/8")(u,n,!1,function(r){o("ty2L")},"data-v-373ad870",null);e.default=p.exports},ty2L:function(r,e){}});