webpackJsonp([30],{Cl5h:function(t,i){},egsB:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=n("woOf"),e=n.n(s),o=n("Dd8w"),r=n.n(o),a=n("XOnc"),c=n("NYxO"),d=n("gyMJ"),l={data:function(){return{friendList:[],IMG_URL:"",showList:["mine"],visible:!1,currFriend:{},x:"",y:""}},components:{vApheader:a.default},computed:r()({},Object(c.c)(["conversationsList","user"]),{addOrDel:function(){var t=this;return this.conversationsList.filter(function(i){return i.id===t.currFriend.roomid}).length}}),methods:{handleCommand:function(t){this.$router.push(t)},goFriendDetail:function(t){this.$router.push({name:"friendDetail",params:{id:t}})},setShowList:function(t){this.showList.indexOf(t)>-1?this.showList.splice(this.showList.indexOf(t),1):this.showList.push(t)},upVisible:function(t){this.visible=t},contextmenuClick:function(t,i){t.preventDefault(),t.stopPropagation(),this.currFriend=i,this.visible=!0,this.x=t.clientX,this.y=t.clientY},handleConversitionList:function(t){this.addOrDel?this.removeConversitionList(t):this.addConversitionList(t)},addConversitionList:function(t){var i=this,n={name:t.nickname,photo:t.photo,id:t.roomid,type:"friend"};d.a.addConversitionList(n).then(function(t){0===t.code?(i.$message({type:"success",message:"添加成功"}),i.$store.commit("setConversationsList",n)):i.$message({type:"success",message:"添加失败"}),i.visible=!1})},removeConversitionList:function(t){var i=this,n={id:t.roomid};d.a.removeConversitionList(n).then(function(t){0===t.code?(i.$message({type:"success",message:"移除成功"}),i.$store.commit("setConversationsList",e()({},n,{d:!0}))):i.$message({type:"success",message:"移除失败"}),i.visible=!1})},findMyfriends:function(){var t=this,i={userId:this.user.id};d.a.findMyfriends(i).then(function(i){0===i.code&&(t.friendList=i.data)})}},mounted:function(){this.findMyfriends()}},u={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"vchat-myFriend vchat-noUser"},[n("v-apheader",{attrs:{title:"我的好友"}},[n("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[n("v-icon",{attrs:{cursor:"pointer",name:"hanbaobao",color:"#fff"}}),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"/main/personalMain/friendly/search"}},[t._v("添加好友")])],1)],1)],1),t._v(" "),n("div",{staticClass:"vchat-myFriend-container"},[n("div",{staticClass:"me-li",on:{click:function(i){return t.goFriendDetail(t.user.id)}}},[n("a",{attrs:{href:"javascript:;"}},[n("img",{attrs:{src:t.IMG_URL+t.user.photo,alt:""}})]),t._v(" "),n("div",[n("span",{staticClass:"vchat-line1",attrs:{title:t.user.nickname}},[t._v(t._s(t.user.nickname))]),t._v(" "),n("v-icon",{attrs:{name:"enter",color:"#d5d5d5"}})],1)]),t._v(" "),t.friendList.length?n("div",{staticClass:"vchat-linkman-container",class:{active:t.showList.indexOf("mine")>-1}},[n("h3",{on:{click:function(i){return t.setShowList("mine")}}},[n("p",[n("v-icon",{staticClass:"list-icon",attrs:{name:"fanhui",size:16,color:"#b7b6b6"}}),t._v(" "),n("span",[t._v("我的好友")])],1),t._v(" "),n("span",[t._v(t._s(t.friendList.length))])]),t._v(" "),n("ul",{staticClass:"vchat-linkman-list"},t._l(t.friendList,function(i){return n("li",{key:i._id,on:{click:function(n){return t.goFriendDetail(i.id)},contextmenu:function(n){return t.contextmenuClick(n,i)}}},[n("a",{attrs:{href:"javascript:;"}},[n("img",{attrs:{src:t.IMG_URL+i.photo,alt:""}})]),t._v(" "),n("div",[n("p",[n("span",{staticClass:"vchat-line1",attrs:{title:i.nickname}},[t._v(t._s(i.nickname))])]),t._v(" "),n("p",[n("span",{staticClass:"vchat-line1",attrs:{title:i.signature}},[t._v(t._s(i.signature))])])])])}),0)]):n("v-nodata",[n("p",{staticClass:"vchat-no-have"},[t._v("\n                还没有添加好友哦，去 "),n("router-link",{attrs:{to:"/main/personalMain/friendly/search"}},[t._v("添加")]),t._v("。\n                ")],1)])],1),t._v(" "),n("v-dropdown",{attrs:{command:t.currFriend,x:t.x,y:t.y,visible:t.visible},on:{upVisible:t.upVisible},scopedSlots:t._u([{key:"dropdown",fn:function(i){var s=i.command;return n("v-dropdown-item",{on:{dropdownClick:function(i){return t.handleConversitionList(s)}}},[t._v("\n            "+t._s(t.addOrDel?"从会话列表移除":"添加到会话列表")+"\n        ")])}}])})],1)},staticRenderFns:[]};var v=n("VU/8")(l,u,!1,function(t){n("Cl5h")},"data-v-19a2dc51",null);i.default=v.exports}});