webpackJsonp([14],{nPxT:function(t,e){},"sRz/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Dd8w"),i=n.n(o),s=n("oAV5"),a=n.n(s),c=n("NYxO"),r=n("P6zD"),l={data:function(){return{nav:[{name:"主页",class:"icon-daohangshouye",activeClass:"icon-group_fill",id:3,link:"personalMain"},{name:"应用空间",class:"icon-yingyong",activeClass:"icon-people_fill",id:2,link:"application"}]}},watch:{conversationsList:{handler:function(){this.joinRoom()},deep:!0,immediate:!0}},computed:i()({},Object(c.c)(["user","conversationsList","Vchat"])),components:{vHeader:r.default},sockets:{connect:function(t){console.log(this.$socket.id),console.log("连接成功")},customEmit:function(t){console.log("连接失败")},joined:function(t){console.log("加入了",t),this.$store.commit("setOnlineUser",t)},leaved:function(t){this.$store.commit("setOnlineUser",t)},getHistoryMessages:function(t){var e=this,n=t.filter(function(t){return-1===t.read.indexOf(e.user.name)});n.length&&this.$store.commit("setUnRead",{roomid:n[0].roomid,count:n.length})},mes:function(t){this.$store.commit("setUnRead",{roomid:t.roomid,add:!0,count:1})},takeValidate:function(t){this.$store.commit("setUnRead",{roomid:t.roomid,add:!0,count:1}),"info"===t.type&&this.$store.dispatch("getUserInfo")}},methods:{joinRoom:function(){var t=this;this.user.name&&this.conversationsList.forEach(function(e){var n={name:t.user.name,time:a.a.formatTime(new Date),avatar:t.user.photo,roomid:e.id},o={roomid:e.id,offset:1,limit:200};t.$socket.emit("join",n),t.$socket.emit("getHistoryMessages",o)})}},mounted:function(){}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vchat-main"},[n("v-header"),t._v(" "),n("div",{staticClass:"vchat-content"},[n("div",{staticClass:"vchat-content-nav"},[n("ul",t._l(t.nav,function(e){return n("li",{key:e.id,class:{active:t.$route.path.indexOf(e.link)>-1}},[n("router-link",{attrs:{to:{name:e.link}}},[n("i",{staticClass:"iconfont",class:[e.class]}),t._v(" "),n("p",[t._v(t._s(e.name))])])],1)}),0)]),t._v(" "),n("div",{staticClass:"vchat-content-sub"},[n("router-view")],1)])],1)},staticRenderFns:[]};var u=n("VU/8")(l,d,!1,function(t){n("nPxT")},"data-v-dbf09b16",null);e.default=u.exports}});